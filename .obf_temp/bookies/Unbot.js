function a0f(a,b){const c=a0e();return a0f=function(d,e){d=d-0xdf;let f=c[d];if(a0f['QwAFFF']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0f['AmXUiA']=g,a=arguments,a0f['QwAFFF']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0f['AmXUiA'](f),a[i]=f):f=j,f;},a0f(a,b);}(function(a,b){const F=a0f,c=a();while(!![]){try{const d=parseInt(F(0x12e))/0x1+parseInt(F(0x135))/0x2+parseInt(F(0x107))/0x3+-parseInt(F(0x125))/0x4*(parseInt(F(0x155))/0x5)+-parseInt(F(0x162))/0x6+parseInt(F(0xe3))/0x7+-parseInt(F(0x147))/0x8*(parseInt(F(0xf2))/0x9);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0e,0x1f0f7));const a0i=a0b;function a0b(d,e){const f=a0a();return a0b=function(k,l){const G=a0f;k=k-0x115;let m=f[k];if(a0b[G(0x15a)+'L']===undefined){var n=function(v){const H=G,w=H(0x143)+H(0x115)+H(0x101)+H(0x102)+H(0x133)+H(0x160)+H(0x169)+H(0x15d)+H(0xf9)+H(0xe9)+H(0x163)+H(0x158)+H(0xf3);let x='',y='';for(let z=0x0,A,B,C=0x0;B=v[H(0x168)+'t'](C++);~B&&(A=z%0x4?A*0x40+B:B,z++%0x4)?x+=String[H(0x145)+H(0x136)+'de'](0xff&A>>(-0x2*z&0x6)):0x0){B=w[H(0x150)+'Of'](B);}for(let D=0x0,E=x[H(0x14c)+'h'];D<E;D++){y+='%'+('00'+x[H(0x11d)+H(0x122)](D)[H(0x16a)+H(0x119)](0x10))[H(0x11b)](-0x2);}return decodeURIComponent(y);};a0b[G(0x138)+'c']=n,d=arguments,a0b[G(0x15a)+'L']=!![];}const o=f[0x0],p=k+o,q=d[p];return!q?(m=a0b[G(0x138)+'c'](m),d[p]=m):m=q,m;},a0b(d,e);}(function(f,g){const I=a0f,i=a0b,j=f();while(!![]){try{const k=parseInt(i(0x128))/0x1+-parseInt(i(0x125))/0x2+parseInt(i(0x147))/0x3+parseInt(i(0x16a))/0x4+parseInt(i(0x14b))/0x5*(parseInt(i(0x168))/0x6)+-parseInt(i(0x129))/0x7+-parseInt(i(0x115))/0x8*(parseInt(i(0x161))/0x9);if(k===g)break;else j[I(0x111)](j[I(0x14b)]());}catch(l){j[I(0x111)](j[I(0x14b)]());}}}(a0a,0x9cd59));import a0g from'fs';import a0h from'path';import{error,info}from'../bookieutils/logger.js';import{getConfig}from'../bookieutils/config.js';import{registerModule}from'../bookieutils/helpeutils/fonthelp.js';function a0a(){const J=a0f,a=[J(0x153)+'wq',J(0x157)+J(0x110)+J(0xf6)+J(0xec),J(0x123)+'2m',J(0x12c)+'Ia',J(0x13b)+'M8',J(0xeb)+J(0x113)+'y',J(0x10c)+'My',J(0x149)+'gy',J(0xe2)+'ey',J(0x161)+'ge',J(0x14f)+'ge',J(0x105)+'3K',J(0x151)+'2G',J(0x16e)+'wW',J(0xf0)+'hu',J(0x15c)+'a',J(0xe4)+'w0',J(0x148)+'Ia',J(0x134)+'M8',J(0x12f)+'gu',J(0x132)+'a',J(0x15e)+'MK',J(0x13e)+'Mu',J(0x104)+'wK',J(0xe8),J(0x141)+'xq',J(0xdf)+'wq',J(0xfc)+J(0xef)+J(0x171),J(0xe6)+'Nm',J(0x116)+'gu',J(0x11f)+'a',J(0xfe)+'q',J(0x164)+'tG',J(0x166)+'s8',J(0x120)+J(0x112)+J(0xe0)+'I',J(0xf1)+'w4',J(0x129)+J(0x131)+J(0x16d)+J(0x103),J(0x13c),J(0x16f)+J(0x12b)+J(0x10d),J(0xee)+'Mm',J(0x132)+'eK',J(0x144)+'vm',J(0x12a)+'wu',J(0x13d)+J(0xe1),J(0x10f)+'Ia',J(0x11a)+'2G',J(0xe7)+'wq',J(0x15b)+'xq',J(0x170)+'20',J(0x124)+'2m',J(0x14a)+'wi',J(0x114)+J(0x165),J(0x118),J(0x159)+'g0',J(0x10a)+J(0xfd)+J(0x109),J(0xf7)+'a',J(0x139)+'2e',J(0x156)+J(0x154)+J(0x11c)+'d',J(0xf8)+J(0xf5)+J(0x127)+J(0x128),J(0xfa)+'wi',J(0x14d)+'3q',J(0xed)+J(0x140)+'y',J(0x137)+'Ni',J(0x13a)+'xq',J(0xfb)+'3q',J(0x12d)+'2u',J(0x13f)+'a',J(0x11e)+'M8',J(0x167)+'KK',J(0x142),J(0xea)+'a',J(0x16c)+'q',J(0xff),J(0x106)+'xa',J(0xe5)+J(0x117)+'q',J(0x15f)+'hu',J(0x16b)+'xi',J(0x100)+'M8',J(0x14e)+J(0x152),J(0x108)+'Ni',J(0xf4)+'a',J(0x10e)+'Ja',J(0x130)+'w4',J(0x126)+'xi',J(0x121)+'hi',J(0x146),J(0x10b)+'2W'];return a0a=function(){return a;},a0a();}export const name=a0i(0x12a)+'ot';export const version=a0i(0x140);registerModule(name);const DATA_FILE=a0h[a0i(0x145)+'ve'](a0i(0x167)+a0i(0x121)+a0i(0x162)+'on');let processing=![],globalBot=null,retryTimeout=null;function loadQueue(){const b=a0i;if(!a0g[b(0x12b)+b(0x116)](DATA_FILE))return[];try{return JSON[b(0x130)](a0g[b(0x14e)+b(0x151)+'nc'](DATA_FILE,b(0x166)))||[];}catch(c){return error(b(0x119)+b(0x11d)+b(0x153)+b(0x126)+c[b(0x127)+'ge']),[];}}function saveQueue(c){const d=a0i;try{a0g[d(0x159)+d(0x118)+d(0x15e)](DATA_FILE,JSON[d(0x141)+d(0x165)](c,null,0x2));}catch(e){error(d(0x119)+d(0x15c)+d(0x153)+d(0x126)+e[d(0x127)+'ge']);}}function enqueueRetry(e,f){const g=a0i,h=loadQueue(),i=h[g(0x164)](j=>j[g(0x117)+'d']===e&&j[g(0x133)+'d']===f);i?i[g(0x15b)+'es']=(i[g(0x15b)+'es']||0x1)+0x1:h[g(0x13f)]({'chatId':e,'userId':f,'retries':0x1}),saveQueue(h),processQueue();}function a0e(){const K=['ne8RwMK','AwHUseq','qJnPnMK','C2jOqxG','ENDYuhK','q05lrW','ywjJzgu','CK1mu3O','zNjVBum','q0PprW','ndy0mgP6sNnkzW','q2nIvKi','ENDUuMK','ExC1mee','C2HPzNq','BgvUz3q','ENHiuem','nfbzzMK','q0LHmwK','Aw5KzxG','qxDUmhe','zteXrge','ExDmu3O','DhK1qK0','mta2mhvSufr5DG','BKPhm28','BuPdm20','mZq1nJC','qxHUyNO','D3PcB2C','ENnIveq','AwDmvwK','sKTmtu4','q012mem','qxC1sKi','EKfcq0q','qJnXr0e','mtqXmJeWmhbouvH2zG','wvOWmti','rhHYtwW','zuXuqNe','EMDMmhK','rhHUtem','y2HHCKe','ruzhseK','Dg9tDhi','ENCXsxO','EK5QvKi','rfrbmhy','AwD6see','BxrTnw0','qwDMmhG','vgv1z20','qJnQsNO','mxj3zKW','zMPmrge','q012shO','nZeXmta5Ew9Ar0Dy','ExHYBNO','ogORs0W','qJnXvue','AwDyvNK','rxC1sG','vfvwv1G','Eu05mgK','BLP2sxK','v0rh','ogORqKS','qZfUnui','wKXZrhC','qxC1tMK','ENHUwKe','mtHiBwD4vvi','odKRlZ0','q2H2wKe','DgK1BMC','tg13s1G','ENDXnMK','B2r1mM0','t1bruLm','CxC1mee','qMD2vxO','BLPTmw0','wNjzDgu','EJjmtuu','ExHIua','ENDXr3O','A2XTBM8','ChfYC3q','EhzH','ENnItxK','qxDythu','rgHYtei','mZG5nti2zKjNALbK','qxHUyKm','DM9Ymda','BvPlmM4','q012wKi','ENnItei','we9XCq','BuK0wgW','qMD2s28','DhKZBta','ChvZAa','DeTxqwu','DtvZrhG','nfaYBwK','zMDOAwO','AwDMtuq','swjUrhG','EMD2wG','Aw5N','qxC0r3K','C2XPy2u','DLj2zvq','y2HHCKm','ENDXr3K','EK1mvxO','BvPHmw0','q012wKq','B2rLqxq','AwHIwui','qK12m3G','mZe0mg5Ts2rmCa','qK1Yu3O','vfjYAeq','whfX','BvPdww8','DxH2teq','thP0C0S','AwD6vKm','q2DMwum','nJmXntr1CwzXzM4','rdnQueq','qZnYwue','zemYBMG','Etjiseq','Dxz3EhK','qxHUrNK','ndCXmtqWugz6sxjb','AgfYq28','ELLItem','vwT4uLq','qND2wKm','AwniwxO','AwD2wum','Eu12wq'];a0e=function(){return K;};return a0e();}async function processQueue(){const h=a0i;if(processing)return;processing=!![];try{let i=loadQueue();const j=[];for(const k of i){const {chatId:l,userId:n,retries:retries=0x1}=k;if(retries>0x5){info(h(0x12c)+h(0x154)+h(0x157)+h(0x135)+n+h(0x155)+l+(h(0x163)+h(0x150)+h(0x138)+'ts'));continue;}try{await globalBot[h(0x137)][h(0x143)+h(0x152)+h(0x156)+h(0x16b)](l,n,{'permissions':{'can_send_messages':![],'can_send_media_messages':![],'can_send_polls':![],'can_send_other_messages':![],'can_add_web_page_previews':![],'can_change_info':![],'can_invite_users':![],'can_pin_messages':![]},'until_date':0x0}),info(h(0x13d)+h(0x132)+'t\x20'+n+h(0x155)+l+(h(0x12e)+h(0x134))+retries+')');}catch(o){error(h(0x11a)+h(0x134)+retries+(h(0x153)+h(0x13c)+'r\x20')+n+':\x20'+o[h(0x127)+'ge']),j[h(0x13f)]({'chatId':l,'userId':n,'retries':retries+0x1});}await new Promise(p=>setTimeout(p,0xc8));}saveQueue(j),j[h(0x12f)+'h']>0x0&&(retryTimeout=setTimeout(processQueue,0xbb8));}catch(p){error(h(0x119)+h(0x148)+h(0x169)+h(0x12d)+h(0x131)+p[h(0x127)+'ge']);}finally{processing=![];}}function isAdmin(c){const d=a0i;try{const {ADMINS:ADMINS=[]}=getConfig();return c&&Array[d(0x13e)+'ay'](ADMINS)&&ADMINS[d(0x13a)+d(0x123)](c['id']);}catch(e){return error(d(0x124)+d(0x11c)+d(0x14d)+d(0x146)+':\x20'+e[d(0x127)+'ge']),![];}}export async function initialize(b){globalBot=b,processQueue();}export async function onMessage(g){const h=a0i;try{const i=g[h(0x127)+'ge']?.[h(0x120)+h(0x11f)+h(0x13b)+'s'];if(!Array[h(0x13e)+'ay'](i)||i[h(0x12f)+'h']===0x0)return;const j=g[h(0x127)+'ge'][h(0x136)];if(isAdmin(j))return;for(const k of i){if(!k[h(0x158)+'t'])continue;try{await g[h(0x137)][h(0x143)+h(0x152)+h(0x156)+h(0x16b)](g[h(0x15a)]['id'],k['id'],{'permissions':{'can_send_messages':![],'can_send_media_messages':![],'can_send_polls':![],'can_send_other_messages':![],'can_add_web_page_previews':![],'can_change_info':![],'can_invite_users':![],'can_pin_messages':![]},'until_date':0x0}),info(h(0x139)+h(0x14c)+h(0x160)+h(0x149)+h(0x135)+k['id']+h(0x155)+g[h(0x15a)]['id']);}catch(l){error(h(0x122)+h(0x15f)+h(0x11e)+h(0x15d)+h(0x11b)+l[h(0x127)+'ge']),enqueueRetry(g[h(0x15a)]['id'],k['id']);}}}catch(m){error(h(0x12a)+h(0x14f)+h(0x142)+h(0x14a)+h(0x144)+m[h(0x127)+'ge']);}}
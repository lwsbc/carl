(function(a,b){const K=a0d,c=a();while(!![]){try{const d=parseInt(K(0xe3))/0x1*(parseInt(K(0x109))/0x2)+-parseInt(K(0xe4))/0x3*(-parseInt(K(0x18a))/0x4)+-parseInt(K(0x16b))/0x5+-parseInt(K(0x12a))/0x6+-parseInt(K(0x176))/0x7+parseInt(K(0x104))/0x8+-parseInt(K(0xc2))/0x9*(-parseInt(K(0xef))/0xa);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0x37cc8));const a0t=a0b;(function(f,g){const L=a0d,h=a0b,i=f();while(!![]){try{const j=parseInt(h(0x177))/0x1*(-parseInt(h(0x1a0))/0x2)+-parseInt(h(0x16b))/0x3+-parseInt(h(0x19d))/0x4*(-parseInt(h(0x13f))/0x5)+-parseInt(h(0x189))/0x6+parseInt(h(0x1a4))/0x7+-parseInt(h(0x18c))/0x8*(parseInt(h(0x15c))/0x9)+-parseInt(h(0x1a9))/0xa*(-parseInt(h(0x129))/0xb);if(j===g)break;else i[L(0x18c)](i[L(0x180)]());}catch(k){i[L(0x18c)](i[L(0x180)]());}}}(a0a,0xb56ed));import{error,info}from'../bookieutils/logger.js';import{getConfig}from'../bookieutils/config.js';function a0b(d,e){const f=a0a();return a0b=function(k,l){const M=a0d;k=k-0x11e;let m=f[k];if(a0b[M(0x127)+'F']===undefined){var n=function(v){const N=M,w=N(0x140)+N(0x14a)+N(0x160)+N(0xcb)+N(0x14c)+N(0xc3)+N(0x12f)+N(0x14b)+N(0x166)+N(0xd4)+N(0xc1)+N(0x163)+N(0x146);let x='',y='';for(let z=0x0,A,B,C=0x0;B=v[N(0x116)+'t'](C++);~B&&(A=z%0x4?A*0x40+B:B,z++%0x4)?x+=String[N(0xf0)+N(0xf2)+'de'](0xff&A>>(-0x2*z&0x6)):0x0){B=w[N(0x13b)+'Of'](B);}for(let D=0x0,E=x[N(0xd3)+'h'];D<E;D++){y+='%'+('00'+x[N(0x13d)+N(0x149)](D)[N(0x152)+N(0xd6)](0x10))[N(0xc0)](-0x2);}return decodeURIComponent(y);};a0b[M(0xf7)+'E']=n,d=arguments,a0b[M(0x127)+'F']=!![];}const o=f[0x0],p=k+o,q=d[p];return!q?(m=a0b[M(0xf7)+'E'](m),d[p]=m):m=q,m;},a0b(d,e);}import{db}from'../bookieutils/db.js';function a0a(){const O=a0d,a=[O(0xfa),O(0x10e)+'3i',O(0x15d)+'wq',O(0xdb)+'2u',O(0xda)+'MK',O(0x188)+'I4',O(0x134)+'08',O(0x10f)+'gu',O(0xe1),O(0xd1)+'a',O(0x133)+'xi',O(0xea)+'3q',O(0x117)+'xm',O(0x107)+'hq',O(0x15b),O(0x110)+'w4',O(0x156)+O(0xb7)+'rb',O(0xc6)+'G',O(0x114)+'Ia',O(0x103)+O(0xd2)+'n3',O(0xf4)+'xq',O(0xf3)+'wu',O(0xc5)+'a',O(0x17e)+O(0x126)+O(0x142)+O(0xcd),O(0x136)+'3i',O(0xfb)+'xq',O(0x113)+'hK',O(0x130)+'W',O(0x14e)+O(0x157)+'rw',O(0xc8)+'gm',O(0x11a)+'w4',O(0x191)+'a',O(0xe7)+'W',O(0x177)+'MK',O(0xbe)+'g8',O(0x17a)+'gy',O(0x139)+'fC',O(0x158)+'Ni',O(0xdc)+'ca',O(0x115)+'q',O(0xdd)+'Me',O(0x191)+'ci',O(0x18d)+'xO',O(0x16e)+'3q',O(0x144)+'dO',O(0x172)+'ey',O(0xf5)+'gy',O(0x137)+'gm',O(0x112)+'2u',O(0x16f)+'hq',O(0xe9)+'sa',O(0x11d)+'hu',O(0xc7)+'ZK',O(0x101)+'gq',O(0x131)+'3i',O(0xd0)+'hq',O(0x184)+'3q',O(0x128)+O(0xc9)+'q',O(0x138),O(0x173),O(0x188)+'Ii',O(0xc4),O(0xd5)+'wm',O(0x17c)+'a',O(0xf1),O(0x11b)+'3u',O(0x189)+O(0x18e)+O(0x11e)+O(0x10c),O(0x115)+'sa',O(0xba)+'W',O(0x155)+'Mu',O(0x10a)+'w4',O(0x15e)+'My',O(0x12b)+'Ia',O(0xca)+'gu',O(0xd8)+'MK',O(0xbd)+'W',O(0x183)+'w4',O(0xfc)+'w4',O(0x13e)+'sa',O(0x187),O(0xbc)+O(0x100),O(0x14d)+'gm',O(0xcf)+'Mq',O(0xbc)+O(0x143),O(0x151)+'w4',O(0x17b)+'gy',O(0x123)+'Mu',O(0x168)+'ge',O(0x185)+O(0x159)+O(0xe8),O(0xf8)+'2q',O(0xf9)+'w4',O(0x118)+'wW',O(0xbf)+'um',O(0x148)+'3u',O(0x18f)+'g8',O(0x119),O(0xee)+'3q',O(0xbc)+O(0x174),O(0xfd)+'eK',O(0x17d)+'hi',O(0x13c)+'gu',O(0x12c)+'2G',O(0xe2)+'xm',O(0x191)+'gq',O(0x193)+'t4',O(0xe0)+'Ia',O(0x165)+'Ia',O(0xe6),O(0x170)+'xa',O(0x111)+'Ja',O(0xb8)+'xi',O(0x122)+'a',O(0x162)+'wC',O(0x181)+'a',O(0xe5)+'Mu',O(0xde)+'2e',O(0x13f)+'ca',O(0x15c)+O(0xdf)+O(0x145)+O(0x124),O(0x15f)+'28',O(0x190)+'f8',O(0x105),O(0x167)+'G',O(0xd9)+'dS',O(0x18b)+'gG',O(0x12b)+'G',O(0xd7)+'xq',O(0xec)+'24',O(0x14f)+'we',O(0xce)+'0e',O(0xb9)+'Ni',O(0x186)+'gy',O(0x113)+'ge',O(0x150)+O(0x178)+O(0x164)+O(0xed),O(0x193)+'q',O(0x190)+'a',O(0x129)+'J4',O(0x16a)+'2u',O(0xff)+'xu',O(0x121),O(0x169)+O(0x13a),O(0xbc)+O(0x147),O(0x108)+'MK',O(0xbc)+O(0x11c),O(0x120)+'ca',O(0x141)+O(0xf6)+O(0x16c),O(0x192)+'gK',O(0x153)+'ha',O(0x175)+'ge',O(0xfe)+'xq',O(0x182)+'MK',O(0x135)+'wW',O(0x10b)+'w4',O(0x11f)+'3C',O(0x125)+'Mu',O(0x12d)+'ca',O(0x16d)+'2O',O(0x10d)+'wW',O(0xeb)+'gK',O(0x15a)+'gu',O(0x17f)+'M8',O(0x171)+'24',O(0x179)+'Ia',O(0x102)+O(0x12e)+O(0xbb)+O(0x161),O(0xcc)+'wm',O(0x106)+'q',O(0x154)+O(0x132)];return a0a=function(){return a;},a0a();}function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0xb7;let f=c[d];if(a0d['paTpZZ']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['riBaTH']=g,a=arguments,a0d['paTpZZ']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0d['riBaTH'](f),a[i]=f):f=j,f;},a0d(a,b);}import{getDefault,getConnection}from'../bookieutils/connection.js';import{applyFont,registerModule}from'../bookieutils/helpeutils/fonthelp.js';export const name=a0t(0x17c)+a0t(0x163);export const version=a0t(0x154);registerModule(name);let botApi=null;function isAdmin(c){const d=a0t;try{const {ADMINS:ADMINS=[]}=getConfig();return!!c[d(0x1b4)]?.['id']&&Array[d(0x1b2)+'ay'](ADMINS)&&ADMINS[d(0x1c0)+d(0x146)](c[d(0x1b4)]['id']);}catch(e){return error(d(0x141)+d(0x18a)+d(0x168)+d(0x134)+d(0x169)+d(0x155)+':\x20'+e[d(0x15a)+'ge']),![];}}function escapeHtml(b){const c=a0t;return b[c(0x16a)+'ce'](/&/g,c(0x161))[c(0x16a)+'ce'](/</g,c(0x1a8))[c(0x16a)+'ce'](/>/g,c(0x1ad))[c(0x16a)+'ce'](/"/g,c(0x147)+';')[c(0x16a)+'ce'](/'/g,c(0x1c1)+';');}function rehydrateChatFilters(e){const f=a0t,g=new Map();for(const h in e){const i=e[h];if(i){i[f(0x1af)+f(0x12b)]?i[f(0x1af)+f(0x12b)]=i[f(0x1af)+f(0x12b)][f(0x122)](j=>{const k=f;if(typeof j===k(0x12d)+'g')return{'text':j,'entities':[]};if(!Array[k(0x1b2)+'ay'](j[k(0x164)+k(0x124)]))j[k(0x164)+k(0x124)]=[];return j;}):i[f(0x1af)+f(0x12b)]=[];if(!i[f(0x145)+'ns'])i[f(0x145)+'ns']=[];if(!i[f(0x128)+'t'])i[f(0x128)+'t']=[];}else i={'responses':[],'buttons':[],'layout':[]};g[f(0x152)](h,i);}return g;}async function getFilterDefinitionFromDb(e,o){const p=a0t;try{const q=await db[p(0x136)](p(0x143)+p(0x187)+p(0x182)+p(0x1ba)+p(0x1b0)+p(0x155)+p(0x12e)+p(0x1b1)+p(0x135)+p(0x15e)+p(0x1bf)+'?',e);if(!q)return null;const r=JSON[p(0x190)](q[p(0x191)+p(0x15d)+'n']),s=rehydrateChatFilters(r),t=o[p(0x17f)+p(0x199)+'e']();let u=t;const v=s[p(0x136)](t);if(v&&v[p(0x167)+p(0x193)+'f'])u=v[p(0x167)+p(0x193)+'f'];else{if(!v)return null;}const w=s[p(0x136)](u);if(!w||w[p(0x167)+p(0x193)+'f'])return null;const x=[];for(const [z,A]of s[p(0x131)+'es']()){A[p(0x167)+p(0x193)+'f']===u&&x[p(0x1a3)](z);}return{'masterName':u,'aliases':x,'responses':w[p(0x1af)+p(0x12b)]||[],'buttons':w[p(0x145)+'ns']||[],'layout':w[p(0x128)+'t']||[]};}catch(B){return error(p(0x1c3)+p(0x14a)+p(0x133)+p(0x17d)+p(0x14e)+p(0x1ae)+p(0x150)+p(0x12a)+p(0x186)+p(0x13e)+'t\x20'+e+(p(0x142)+p(0x1ac))+o+':\x20'+B[p(0x15a)+'ge'],B),null;}}export async function onMessage(e){const s=a0t;if(!botApi)botApi=e[s(0x171)];const t=e[s(0x15a)+'ge']?.[s(0x156)]||'',u=t[s(0x17f)+s(0x199)+'e']()[s(0x17b)]('\x20')[0x0],v=e[s(0x1b4)]?.['id'],w=e[s(0x16d)][s(0x18b)],x=e[s(0x16d)]['id'];if(u===s(0x1bb)+s(0x155)){if(!isAdmin(e))return e[s(0x1a7)](await applyFont(name,s(0x120)+s(0x162)+s(0x12c)+'d.'));const y=t[s(0x17b)]('\x20');if(y[s(0x11f)+'h']<0x2)return e[s(0x1a7)](await applyFont(name,s(0x16f)+s(0x1bd)+s(0x19a)+s(0x13c)+s(0x155)+s(0x14f)));const A=y[0x1][s(0x17f)+s(0x199)+'e']();let B=x;if(w===s(0x1b5)+'te')try{const C=await getDefault();if(C){const D=await getConnection(C);if(D)B=D;else return e[s(0x1a7)](await applyFont(name,s(0x137)+s(0x181)+s(0x153)+'\x20\x27'+C+(s(0x198)+s(0x19c)+s(0x19f)+s(0x138)+s(0x125)+s(0x160))));}else return e[s(0x1a7)](await applyFont(name,s(0x148)+s(0x170)+s(0x1a5)+s(0x1bc)+s(0x157)+s(0x1b3)+s(0x179)+s(0x1a1)+s(0x17a)+'t.'));}catch(E){return error(s(0x1c3)+s(0x1be)+s(0x1c2)+s(0x183)+s(0x165)+s(0x178)+s(0x17e)+s(0x169)+s(0x155)+':\x20'+E[s(0x15a)+'ge']),e[s(0x1a7)](await applyFont(name,s(0x175)+s(0x159)+s(0x174)+s(0x14c)+s(0x196)+E[s(0x15a)+'ge']));}try{const F=await getFilterDefinitionFromDb(B,A);if(!F)return e[s(0x1a7)](await applyFont(name,s(0x13a)+s(0x1b6)+s(0x18d)+escapeHtml(A)+(s(0x123)+s(0x176)+s(0x139)+s(0x1aa)+s(0x149)+s(0x16e))+B+s(0x192)),{'parse_mode':s(0x126)});let G=s(0x11e)+s(0x121)+F[s(0x194)+s(0x1a2)];F[s(0x14d)+'es']&&F[s(0x14d)+'es'][s(0x11f)+'h']>0x0&&(G+=','+F[s(0x14d)+'es'][s(0x158)]()[s(0x19e)](',')),G+='\x0a';for(const H of F[s(0x1af)+s(0x12b)]){G+='!'+H[s(0x156)]+'\x0a';}if(F[s(0x145)+'ns']&&F[s(0x145)+'ns'][s(0x11f)+'h']>0x0){F[s(0x128)+'t']&&F[s(0x128)+'t'][s(0x11f)+'h']>0x0&&!(F[s(0x128)+'t'][s(0x11f)+'h']===0x1&&F[s(0x128)+'t'][0x0]===F[s(0x145)+'ns'][s(0x11f)+'h'])?G+=s(0x145)+'n\x20'+F[s(0x128)+'t'][s(0x19e)](':')+'\x0a':G+=s(0x145)+'n\x20'+F[s(0x145)+'ns'][s(0x11f)+'h']+'\x0a';for(const I of F[s(0x145)+'ns']){G+='?'+I[s(0x16c)]+'('+I[s(0x127)]+')\x0a';}}return G[s(0x11f)+'h']>0xfa0&&(G=G[s(0x1b8)+s(0x132)](0x0,0xfa0-0x32)+(s(0x188)+s(0x1ab)+s(0x18f)+')')),e[s(0x1a7)](s(0x130)+'>'+escapeHtml(G)+(s(0x140)+'e>'),{'parse_mode':s(0x126)});}catch(J){return error(s(0x17c)+s(0x12f)+s(0x166)+s(0x197)+s(0x151)+J[s(0x15a)+'ge'],J),e[s(0x1a7)](await applyFont(name,s(0x173)+s(0x18e)+s(0x144)+s(0x1b9)+'\x20'+J[s(0x15a)+'ge']));}}}function a0c(){const P=['ovbZz3K','qxDXr3a','ALLIvui','Cu05mgK','rgnIsKi','nhnH','AK5Mmui','mty0mJbVyuTUrgi','zNjVBum','rhHQuW','AgfYq28','q0S1sei','q01mmNK','Bdjeteq','wKW1rwG','D2zIsgq','Cgm5sKi','CxDYvee','CgDPkW','AwDmvue','qJnPr0e','qwDMmgK','qZnIu0e','EMD2txK','zxjmEKC','qxC1tMK','BLPlwM0','Bxr1nhO','mtyWnJq0oen5CfblzW','ENDXvq','rgHmv3O','rgD6uei','qZi5u0q','nJGZotqWDuvZEMLv','qZnYwue','qJi0r0e','v3fx','END6seq','ENHQwui','qNDMwKq','AwD6vKq','Bxm0v2W','B0LHvNO','q012v0i','EMnIvKm','EK5QvKi','y2HHCKe','ENHQzhK','BgnItue','EMD2wG','A2HYwuq','qMDMnui','zxzzq0C','qxC1sKi','ug11DNO','rgC5Bui','AwC1vKq','ExHIua','rgD2neq','q3H2uem','quvH','Etj1r0m','wKS0BJa','re5TrMi','ogORqve','CMnHohK','nJK2ndK4sKrOuMH3','qMHYtem','qK1dr3K','ExH2u0q','DeCZBMC','ruzhseK','AK1ymg8','CNHQwui','mLbADNe','qK1Xr3O','qMDmsem','ELLItue','qMHXr3O','qJn2v2K','ENHPrW','qxDewMK','zurmrge','Aw5KzxG','EK1Muei','y2HHCKm','C2v2C3i','qxC1ueq','ywjJzgu','BxrhwM0','muHfzxi','zxPqqMe','q05QthO','CM5dtuq','odKRlZ0','zwzvAwe','AwC5sNK','B2rLqxq','zMDOAwO','sKTmtu4','Dxz3EhK','qK05mgK','BuPLv0m','Eti5vei','BxrLm28','qK5UmhK','Dg9tDhi','EK05wwK','B2HqshK','qJnQueu','BvPhv0i','s254CMC','qxHUyKm','zgjWDK0','EK1mu0q','EMrprW','BMr5mg4','EtjMmhO','EdjUvKi','EJe5uum','A2XTBM8','shLX','qJi1tue','mZq1nJC','muH5tNi','q005ww8','t1bruLm','rgD2s2W','q0LIsKe','nfbzzMK','DNHUshO','mJaWntaYnwnLDwzVEG','ufb2DZG','EK1mtNG','qZn2sum','AwDeteq','EJnQvKq','DMnIsKi','qZi5vwK','qNDMvW','ztvwAwe','ENnIsKe','ntq3odGZBvPStuDP','END6uei','DhLyBuS','y0K0vwW','DuS5BMK','ENHPr3a','C2zYBNq','AwHQteq','B3rLmM0','CMvPr3O','C2HPzNq','qZi5wuq','CJj2mhO','qxD2mKe','qMD2vxO','BvPhmg0','Awveteq','EJj2ma','Cgm5sxa','BxrPmg8','mtjREM1wDfC','AwDMmuq','ChvZAa','qxDMu0e','DgfAB3G','Eu52meq','Etjiseq','rgD2wwK','qK12sKq','qK1MvhO','AhzVqwG','qxDymhO','qvLItem','qK5Utem','ovbdAfa','nfaYBwK','q01mvxO','q012wKm','Dtb2Bxi','C2XPy2u','wvOWmti','otK5yuHsv2zR','EKfcq0q','qxD2wG','q2H2wKe','qu05uei','AKLTv20','AwDmvwK','wwjVqJm','CgDUvNO','ChfYC3q','AwDUt3O','nhjH','Ede5uem','EK05mui','Bdj6uei','ExHXnMK','z1b3DKS','BgvUz3q','vfvwv1G','qJi1vxO','Aw5N','ENC1mee','ENC1mem','AK1Mvem','Eti5vxO','q2DMwum','rhHQthO','q2HQueq','qND2wKm','DhfyBte','rgDmvKi','q0LImG','ExDyuhK','mwzmuK5yzW','otG4nZfesNvMrKm','qJnPr0m','qZj2ma','AK1emg8'];a0c=function(){return P;};return a0c();}export async function initialize(c){const d=a0t;try{if(!c?.[d(0x171)])throw new Error(d(0x184)+d(0x13b)+d(0x180)+d(0x13d)+'d.');botApi=c[d(0x171)],c['on'](d(0x15a)+'ge',onMessage),info(d(0x172)+d(0x185)+d(0x195)+version+(d(0x1a6)+d(0x1b7)+d(0x15f)));}catch(e){error(d(0x17c)+d(0x12f)+d(0x15b)+d(0x14b)+d(0x19b)+e[d(0x15a)+'ge']);throw e;}}
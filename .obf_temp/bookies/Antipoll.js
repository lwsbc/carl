(function(a,b){const F=a0d,c=a();while(!![]){try{const d=-parseInt(F(0x1d2))/0x1+parseInt(F(0x22a))/0x2*(-parseInt(F(0x28f))/0x3)+parseInt(F(0x2be))/0x4*(parseInt(F(0x234))/0x5)+parseInt(F(0x2bd))/0x6*(parseInt(F(0x2a3))/0x7)+parseInt(F(0x2b0))/0x8*(-parseInt(F(0x21c))/0x9)+-parseInt(F(0x233))/0xa+parseInt(F(0x222))/0xb;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0x6ae21));function a0c(){const K=['q0PprW','CNzPr3i','C2XPy2u','AwnID3e','Aw5KzxG','ENHQwui','ENHYs3O','EJj2rKe','qJjyuW','B2rLqxq','DeXYCgK','qJjyu3G','zguXBwu','AwDmvwK','qxHIvKi','BNrhwg4','BuK0wgW','ENnHt2m','EMfpCKe','qMHXr3O','y2HHCKm','y0LHr2K','CtfQzNe','Bxrlm28','mxDZz1a','AwrHu2m','AwqWr3a','DeX2Bxq','EJj2ma','rgD2wKq','wMvzCMu','A2XTBM8','DMnIsKe','EMnxr3O','EdnMmxO','CMv2Bxi','Awq4r3y','ENnIDhi','DuT1r3K','ztvwAwe','Eu1ythO','AwnHr3K','qK1dr0m','DuLIANi','AwvyANq','AwHIwui','wMeXBwC','mti4otK2mw9cCxzpvG','qwDMmhG','q3H2teq','CNnIDxe','q052vq','Awu5z3i','mtmXmZG0mZngA3rUwxu','ExDyuW','Awu5BW','D3nIBhi','CNzQDwK','ENy5uhO','Dxz3EhK','qKLItxK','mMX0ru1vtG','ExHYrKe','qZj1r2W','CxDYvee','A3fpr2K','rgDmmei','DNzIzxe','y2HHCKe','AwnHr3y','mtCYodyWB0Dtu1f3','nvjWre93vW','A2q4u2K','D3nHt3K','ExH2u0q','DwC5u0i','BgvUz3q','EMD2u3O','EMD2wG','ENHithK','q005ww8','Etjiseq','mZq1nJC','CNziANu','q2C5u0i','odKRlZ0','BvPPmM0','AuLIvui','zNjVBum','CNnIz3u','EJnQvKq','DuXlr3m','AwCXtem','AwHQteq','ExDethG','q2HQvKq','ExHIua','D0XkExy','ENuXtem','DgvMzhi','EMD2txK','mxPbD3e','AwD2wum','EtnYuei','qxDXr3m','ExDQu3O','ELLItem','CfLxr3a','Aw5N','ENHUwNK','B3rdwuu','Bgfpr2K','rhD1r3O','rgD2neq','EJnTr2S','AwnHr2K','B3rTnw4','q012mem','AwDUt3O','uNLX','BLnXm24','t1bruLm','BhHUteq','Cxrx','zMHYCvK','ExrX','wvOWmti','qxC1tKm','ENHXvwK','Awv6C3q','nufYtva','AwvmB3y','y0LHrW','qxHXvq','Dgz2zNu','C3u1Dxi','q012v0i','EMm0r3u','s3z5EMG','qK5Yuem','q01mtem','CNzQzMK','qMD2s28','AwDMvuq','Dgv1r3m','rgHmv3O','AgfYq28','EKfcq0q','ENHUwKe','A2fpr2K','ChvZAa','DhnIsei','zeC1BNC','CNC1weq','Dtb2Bxi','Dwz3DgC','EJj2mhe','Cxu1Dxm','ugH2tMi','ENnIEhm','qxDXu2K','EK5QvKi','mtuZmZC1ovDhDMDXEq','ruzhseK','qJn2v2K','rgy5uhO','qvLItxK','ENHYmee','B3rMt0m','DuLIC3i','rgHQuhO','ENH2tgK','EJnTr3y','DNPqDxu','mxP0vW','CNnIsei','DNv2DgK','BNrQDNy','DdfQzMK','zxjmEKC','BxrXwM0','ENm5m3K','mZaYntqWre5vtMfZ','qZj2mhi','AwD6vKq','sMzwDdi','BgnIvhO','AwnIANq','qxC1sKi','EMnxr0m','vfvwv1G','ExDeta','shr6mxi','sKTmtu4','Cxu1zwK','oe9XAgzHBq','EdjUvNO','zMDOAwO','qJnPnMK','CMD2u3O','AwnIvhO','CNv6yNy','ExC1mee','qND2wKm','qZjMtNO','ChfYC3q','qMD2vxO','AwnIwxO','mZbXBhnIDfa','ndGZnZe2s2njB3Hf','CJb2C2K','Awu1Chy','qMDyrKm','C2HPzNq','ENC1shK','CJnQvKq','DwzQANq','sMKYru0','DxH2teq','DMnItei','qK1Xr3O','BuPLm24','Dg9tDhi','ndiXnZCXD0HdBgng','DJjMwui','C3u1Dxq','qxDXugm','ChnHlW','AwnHr3O','ywjJzgu','qxD2wMK','AwnHr2S','DMv2Ahi','BxrPm24','DuTmBNe','CKTMDNq','EMnHowK','qxHUzKi','CKXQChq','nfaYBwK','AwvMB3i','EtjMmhK','CxC1mee','qZn2v3O','DdbyBq','DMnHwg0','DvLIsei','q2HQueq','EdnUteq','DMnHwgm'];a0c=function(){return K;};return a0c();}function a0a(){const G=a0d,a=[G(0x24d),G(0x22f)+'gu',G(0x26c)+'Ya',G(0x209),G(0x24c)+'gu',G(0x247)+'xa',G(0x29c)+'Nq',G(0x207)+'Ya',G(0x243)+G(0x288)+G(0x29b),G(0x2bc)+'xq',G(0x213)+'2G',G(0x2bf)+'eq',G(0x2b5)+'xm',G(0x226)+'e8',G(0x219)+'uK',G(0x251)+'xu',G(0x210)+'vq',G(0x250)+'sa',G(0x1f0)+'uW',G(0x230)+'vq',G(0x1e2)+G(0x214),G(0x1df)+'d8',G(0x20d)+'ge',G(0x22e)+'ca',G(0x1d4)+'Ya',G(0x1de)+'fq',G(0x1cd)+'wu',G(0x25a)+'wC',G(0x21e)+'wu',G(0x1fe)+'Ia',G(0x21a)+'2m',G(0x1ce)+'Me',G(0x202)+'ca',G(0x1d0)+G(0x285)+G(0x205)+G(0x268),G(0x24b)+'2K',G(0x1d7)+'w4',G(0x29d)+'cG',G(0x25d)+'xi',G(0x2b9)+'v8',G(0x25e)+'a',G(0x217)+'2u',G(0x249)+'3m',G(0x2a8)+'Lm',G(0x216)+'2G',G(0x28d)+'g0',G(0x26d)+'fu',G(0x295)+G(0x29a)+'i',G(0x23b),G(0x203)+'vq',G(0x218)+'04',G(0x1e8)+'a',G(0x298)+'cG',G(0x236)+'2G',G(0x296)+'va',G(0x22d)+'w4',G(0x27d)+'uy',G(0x26e)+'00',G(0x275)+'hK',G(0x255)+'u4',G(0x227)+'ca',G(0x2a1)+G(0x1cc)+G(0x265)+'Q',G(0x1e2)+G(0x2a0),G(0x293)+'wK',G(0x20e)+'w4',G(0x23d)+'Ia',G(0x1fb)+'gW',G(0x1f5),G(0x235)+'d8',G(0x1c9)+'MW',G(0x1ca)+'xa',G(0x267)+'ca',G(0x2b8)+'2e',G(0x24f)+'3m',G(0x276)+'Mu',G(0x206)+'Ia',G(0x1e1)+'sa',G(0x1f8)+'3m',G(0x287)+'um',G(0x1fc)+G(0x21b)+G(0x28b)+G(0x264),G(0x212)+'vq',G(0x1dc)+G(0x2a6)+G(0x252),G(0x1e4)+'2G',G(0x21d)+'2K',G(0x241)+'a',G(0x256)+'wq',G(0x2bb)+'3q',G(0x20f)+'xu',G(0x2a4)+'w4',G(0x2a2)+'xi',G(0x1f3)+'wy',G(0x207)+'W',G(0x2b1)+'gu',G(0x2b7)+'xa',G(0x2af)+'g0',G(0x286)+'wu',G(0x1eb)+'hq',G(0x1da)+'tS',G(0x227)+'cK',G(0x1fd)+'Ja',G(0x28e)+'q',G(0x274)+'uC',G(0x291)+'hm',G(0x272),G(0x21f)+'ui',G(0x253)+'M8',G(0x2a7)+'xm',G(0x254)+'24',G(0x273)+'Ya',G(0x1f4)+'wq',G(0x1cf)+'xi',G(0x232)+'Ke',G(0x223),G(0x1ec)+'Ia',G(0x211)+'0G',G(0x28a)+'va',G(0x1e6)+'xi',G(0x1d5)+'Ia',G(0x246)+'K8',G(0x292)+'cW',G(0x28c)+'eu',G(0x1ed),G(0x1e0)+'Me',G(0x20a)+'a',G(0x27c)+'gK',G(0x2c0)+'ca',G(0x27b)+'Ia',G(0x258)+'YK',G(0x1ee)+'eu',G(0x1d9)+'d0',G(0x2bf)+'fa',G(0x284)+'Nq',G(0x2a5)+'w4',G(0x260)+'ca',G(0x289)+'2G',G(0x237)+'c4',G(0x261)+G(0x20b)+G(0x26f)+'5',G(0x297)+'xm',G(0x1d6),G(0x1dd)+'vi',G(0x204)+G(0x1f9)+G(0x2ad)+G(0x26a),G(0x294)+'w4',G(0x200)+'3i',G(0x238)+'ca',G(0x24a)+'hi',G(0x220),G(0x1db)+'vi',G(0x23e)+'a',G(0x1e7),G(0x271),G(0x248)+'0u',G(0x23a)+'xq',G(0x1f7)+'ge',G(0x27e)+'q',G(0x1fa)+'a',G(0x229)+'wK',G(0x25c)+'ca',G(0x281)+'w4',G(0x22b)+'wq',G(0x225)+'vK',G(0x240)+'1q',G(0x270)+'eu',G(0x244)+'3q',G(0x1d3)+'MK',G(0x257)+'Ni',G(0x215)+'ca',G(0x279)+'Ya',G(0x262)+'MK',G(0x25b)+G(0x277)+'bf',G(0x23c)+'W',G(0x2aa)+'Mu',G(0x1c7)+'xu',G(0x25f)+'gm',G(0x299)+'0G',G(0x237)+'ca',G(0x1e9)+'Nq',G(0x27a)+'gm',G(0x1cb)+'ue',G(0x263)+'wm',G(0x2a9)+'hu',G(0x208)+'cW',G(0x241)+'f8',G(0x282)+'ca',G(0x29f)+'eK',G(0x23e)+'f8',G(0x1f2)+'3i',G(0x2ac),G(0x2b4)+'xq',G(0x221)+'G',G(0x1e5)+'xa',G(0x224),G(0x278)+'g8',G(0x2b3)+'a',G(0x1ea)+'Me',G(0x2b6)+'uW',G(0x22c)+'3m',G(0x29e)+G(0x24e)+'m',G(0x1e3)+'ca'];return a0a=function(){return a;},a0a();}const a0n=a0b;function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0x1c7;let f=c[d];if(a0d['NmBRTp']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['VRIVKU']=g,a=arguments,a0d['NmBRTp']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0d['VRIVKU'](f),a[i]=f):f=j,f;},a0d(a,b);}(function(f,g){const H=a0d,h=a0b,i=f();while(!![]){try{const j=-parseInt(h(0x1e3))/0x1*(-parseInt(h(0x191))/0x2)+parseInt(h(0x19b))/0x3*(parseInt(h(0x23a))/0x4)+-parseInt(h(0x21e))/0x5+parseInt(h(0x1cf))/0x6*(-parseInt(h(0x1c1))/0x7)+parseInt(h(0x21a))/0x8+-parseInt(h(0x1b4))/0x9+parseInt(h(0x1e1))/0xa;if(j===g)break;else i[H(0x283)](i[H(0x1c8)]());}catch(k){i[H(0x283)](i[H(0x1c8)]());}}}(a0a,0x54d60));import{db}from'../bookieutils/db.js';import{getConfig}from'../bookieutils/config.js';import{error,info}from'../bookieutils/logger.js';import{applyFont,registerModule}from'../bookieutils/helpeutils/fonthelp.js';import{getDefault,getConnection,getConnectionName}from'../bookieutils/connection.js';export const name=a0n(0x24f)+a0n(0x1d5);export const version=a0n(0x1f5);registerModule(name);let globalBot=null,processing=![];function isAdmin(c){const d=a0n;try{const {ADMINS:ADMINS=[]}=getConfig();return c[d(0x1f6)]&&ADMINS[d(0x245)+d(0x1c2)](c[d(0x1f6)]['id']);}catch(e){return error(name,d(0x1c9)+d(0x244)+d(0x1d1)+d(0x210)+e[d(0x1da)+'ge']),![];}}async function initDatabase(){const a=a0n;await db[a(0x23b)](a(0x1b3)+a(0x1c3)+a(0x1fa)+a(0x1ca)+a(0x20f)+a(0x232)+a(0x241)+a(0x1d4)+a(0x1f2)+a(0x195)+a(0x248)+a(0x1be)+a(0x230)+a(0x233)+a(0x214)+a(0x21d)+a(0x231)+a(0x22e)+a(0x1b6)+a(0x1e7)+a(0x233)+a(0x19e)+a(0x254)+a(0x203)+a(0x1f3)+a(0x1b3)+a(0x1c3)+a(0x1fa)+a(0x1ca)+a(0x20f)+a(0x232)+a(0x241)+a(0x1d4)+a(0x1e9)+a(0x1b0)+a(0x217)+a(0x24a)+a(0x1cd)+a(0x224)+a(0x20f)+a(0x246)+a(0x1b3)+a(0x19f)+a(0x1b9)+a(0x1cd)+a(0x224)+a(0x20f)+a(0x246)+a(0x1b3)+a(0x19c)+a(0x238)+a(0x1f7)+a(0x212)+a(0x1ac)+a(0x1dd)+a(0x217)+a(0x243)+a(0x228)+a(0x1c7)+a(0x230)+a(0x1fc)+a(0x1b9)+a(0x207)+a(0x1f3)+a(0x227));}async function isEnabled(d){const e=a0n;try{const f=await db[e(0x196)](e(0x1e0)+e(0x1b2)+e(0x237)+e(0x1de)+e(0x1ef)+e(0x1df)+e(0x21f)+e(0x23f)+e(0x242)+e(0x1e5)+e(0x1a8),d);return f?Boolean(f[e(0x1d7)+'ed']):!![];}catch(g){return error(name,e(0x20c)+e(0x237)+e(0x24b)+':\x20'+g[e(0x1da)+'ge']),!![];}}async function setEnabled(d,e){const f=a0n;try{await db[f(0x223)](f(0x1b3)+f(0x1bd)+f(0x1a0)+f(0x1c8)+f(0x1a4)+f(0x1ab)+f(0x1ef)+f(0x1df)+f(0x21f)+f(0x23e)+f(0x1e5)+f(0x1d2)+f(0x1e7)+f(0x1aa)+f(0x201)+f(0x1fe)+f(0x1d6)+f(0x1aa)+'\x20',d,e?0x1:0x0);}catch(g){error(name,f(0x1ea)+f(0x1e7)+f(0x1fb)+f(0x20b)+g[f(0x1da)+'ge']);}}async function enqueueDeletion(d,e){const f=a0n;try{await db[f(0x223)](f(0x1b3)+f(0x1bd)+f(0x1a0)+f(0x1c4)+f(0x249)+f(0x22a)+f(0x251)+f(0x23d)+f(0x1c6)+f(0x24a)+f(0x1bf)+f(0x1ae)+f(0x1f4)+f(0x1b3)+f(0x1a5)+f(0x1b7)+f(0x211)+f(0x1b3),d,e),processQueue();}catch(g){error(name,f(0x1f1)+f(0x1b8)+f(0x1d3)+g[f(0x1da)+'ge']);}}async function processQueue(){const e=a0n;if(processing||!globalBot)return;processing=!![];try{let h;while(h=await db[e(0x202)](e(0x1e0)+e(0x1a9)+e(0x209)+e(0x1bc)+e(0x1b5)+e(0x23c)+e(0x21b)+e(0x1cb)+e(0x20e)+e(0x247)+e(0x1af)+e(0x1a1)+e(0x1c5))){if(!h[e(0x1e8)+'h'])break;for(const i of h){try{await globalBot[e(0x193)][e(0x229)+e(0x1db)+e(0x24c)](i[e(0x24a)+'id'],i[e(0x1da)+e(0x1ff)]),await db[e(0x223)](e(0x1a3)+e(0x208)+e(0x215)+e(0x1d4)+e(0x1e9)+e(0x20a)+e(0x19d)+e(0x230)+e(0x19a)+e(0x1f0)+e(0x1ae)+e(0x1ce)+e(0x21c),i[e(0x24a)+'id'],i[e(0x1da)+e(0x1ff)]);}catch(j){const k=j[e(0x24b)+e(0x1ee)];if(k===0x190||k===0x194)await db[e(0x223)](e(0x1a3)+e(0x208)+e(0x215)+e(0x1d4)+e(0x1e9)+e(0x20a)+e(0x19d)+e(0x230)+e(0x19a)+e(0x1f0)+e(0x1ae)+e(0x1ce)+e(0x21c),i[e(0x24a)+'id'],i[e(0x1da)+e(0x1ff)]);else{const l=i[e(0x239)+'es']+0x1;l>=0x5?await db[e(0x223)](e(0x1a3)+e(0x208)+e(0x215)+e(0x1d4)+e(0x1e9)+e(0x20a)+e(0x19d)+e(0x230)+e(0x19a)+e(0x1f0)+e(0x1ae)+e(0x1ce)+e(0x21c),i[e(0x24a)+'id'],i[e(0x1da)+e(0x1ff)]):(await db[e(0x223)](e(0x1a6)+e(0x199)+e(0x1d4)+e(0x1e9)+e(0x1e2)+e(0x222)+e(0x213)+e(0x204)+e(0x242)+e(0x1e5)+e(0x1a8)+e(0x192)+e(0x1da)+e(0x1ff)+e(0x1ed),l,i[e(0x24a)+'id'],i[e(0x1da)+e(0x1ff)]),await new Promise(m=>setTimeout(m,0x7d0)));}await new Promise(m=>setTimeout(m,0x32));}}}}catch(m){error(name,e(0x1ad)+e(0x1b1)+e(0x22f)+e(0x236)+e(0x252)+m[e(0x1da)+'ge']);}finally{processing=![];}}async function getGroupInfo(d){const e=a0n;try{const f=await getConnectionName(d);if(f)return f;const g=await globalBot[e(0x193)][e(0x218)+'at'](d);return g[e(0x194)]||e(0x1d8)+'\x20'+d;}catch{return e(0x1d8)+'\x20'+d;}}async function sendResponse(h,i,j){const k=a0n,l=await getGroupInfo(j),m=i+k(0x22c)+l,n=await applyFont(name,m),o=await h[k(0x1cc)](n);setTimeout(()=>h[k(0x193)][k(0x229)+k(0x1db)+k(0x24c)](j,o[k(0x1da)+k(0x1ff)])[k(0x1e4)](()=>{}),0x1388);}async function sendWarning(e){const f=a0n,{WARNING_TEXT:WARNING_TEXT='',SEND_WARNING:SEND_WARNING=!![],WARNING_TTL_MS:WARNING_TTL_MS=0x1388}=getConfig()[f(0x205)+f(0x226)];if(!SEND_WARNING||!WARNING_TEXT)return;try{const g=await applyFont(name,WARNING_TEXT),h=await e[f(0x1cc)](g);h?.[f(0x1da)+f(0x1ff)]&&setTimeout(()=>{const i=f;e[i(0x193)][i(0x229)+i(0x1db)+i(0x24c)](e[i(0x225)]['id'],h[i(0x1da)+i(0x1ff)])[i(0x1e4)](()=>{});},WARNING_TTL_MS);}catch(i){error(name,f(0x235)+f(0x1bb)+f(0x200)+f(0x1d3)+i[f(0x1da)+'ge'],i);}}function a0b(d,e){const f=a0a();return a0b=function(k,l){const I=a0d;k=k-0x190;let m=f[k];if(a0b[I(0x269)+'q']===undefined){var n=function(v){const J=I,w=J(0x1d8)+J(0x2b2)+J(0x20c)+J(0x2ba)+J(0x228)+J(0x280)+J(0x290)+J(0x2ae)+J(0x266)+J(0x2ab)+J(0x26b)+J(0x23f)+J(0x242);let x='',y='';for(let z=0x0,A,B,C=0x0;B=v[J(0x231)+'t'](C++);~B&&(A=z%0x4?A*0x40+B:B,z++%0x4)?x+=String[J(0x245)+J(0x27f)+'de'](0xff&A>>(-0x2*z&0x6)):0x0){B=w[J(0x1f1)+'Of'](B);}for(let D=0x0,E=x[J(0x239)+'h'];D<E;D++){y+='%'+('00'+x[J(0x201)+J(0x1f6)](D)[J(0x1d1)+J(0x259)](0x10))[J(0x1ef)](-0x2);}return decodeURIComponent(y);};a0b[I(0x1ff)+'I']=n,d=arguments,a0b[I(0x269)+'q']=!![];}const o=f[0x0],p=k+o,q=d[p];return!q?(m=a0b[I(0x1ff)+'I'](m),d[p]=m):m=q,m;},a0b(d,e);}export async function initialize(b){globalBot=b,await initDatabase(),processQueue();}export async function onMessage(e){const m=a0n,n=getConfig()[m(0x205)+m(0x226)]||{},o=e[m(0x225)]?.['id'],p=e[m(0x1da)+'ge']?.[m(0x1da)+m(0x1ff)],q=e[m(0x1da)+'ge']?.[m(0x1ba)]||'';if(isAdmin(e)&&q){let r=null,s=o;if(/^\/pollon\b/i[m(0x20d)](q))r=m(0x221)+m(0x197)+m(0x1fd)+m(0x250);else{if(/^\/polloff\b/i[m(0x20d)](q))r=m(0x221)+m(0x197)+m(0x1fd)+m(0x24e);}if(r){if(e[m(0x225)][m(0x22b)]===m(0x253)+'te'){const u=await getDefault();if(!u)return await e[m(0x1cc)](m(0x1a7)+m(0x1a2)+m(0x220)+m(0x1f8)+m(0x1c0)+m(0x190)+m(0x1ec)+m(0x219));s=await getConnection(u);if(!s)return await e[m(0x1cc)](m(0x1d0)+m(0x240)+'\x22'+u+(m(0x234)+m(0x216)+m(0x1dc)+m(0x1d9)+m(0x1f9)));}const t=r[m(0x245)+m(0x1c2)]('ON');await setEnabled(s,t),await sendResponse(e,'✅\x20'+r,s);}return;}if([m(0x198),m(0x206)+m(0x198)][m(0x245)+m(0x1c2)](e[m(0x225)]?.[m(0x22b)])){const v=await isEnabled(o);if(v&&e[m(0x1da)+'ge']?.[m(0x1e6)]&&!isAdmin(e))try{await e[m(0x229)+m(0x1db)+m(0x24c)](),enqueueDeletion(o,p),await sendWarning(e);}catch(w){error(name,m(0x24d)+m(0x1eb)+m(0x22d)+m(0x210)+w[m(0x1da)+'ge'],w);}}}export async function onCallbackQuery(){}
(function(a,b){const S=a0d,c=a();while(!![]){try{const d=-parseInt(S(0xf6))/0x1*(-parseInt(S(0x138))/0x2)+-parseInt(S(0x111))/0x3+parseInt(S(0x9e))/0x4+-parseInt(S(0xda))/0x5*(parseInt(S(0x129))/0x6)+parseInt(S(0xee))/0x7+parseInt(S(0x76))/0x8*(parseInt(S(0xf3))/0x9)+-parseInt(S(0x127))/0xa;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0x7ef66));const a0w=a0b;(function(f,g){const T=a0d,h=a0b,i=f();while(!![]){try{const j=-parseInt(h(0xe5))/0x1+parseInt(h(0xfe))/0x2+parseInt(h(0x108))/0x3+-parseInt(h(0x13b))/0x4*(-parseInt(h(0x95))/0x5)+-parseInt(h(0xf6))/0x6+-parseInt(h(0xee))/0x7*(-parseInt(h(0xbe))/0x8)+parseInt(h(0x13c))/0x9;if(j===g)break;else i[T(0x156)](i[T(0x9a)]());}catch(k){i[T(0x156)](i[T(0x9a)]());}}}(a0a,0x47b75));import{info,error}from'../bookieutils/logger.js';import{isAdmin}from'../bookieutils/admin.js';import{db}from'../bookieutils/db.js';import{getDefault,getConnection,getConnectionName}from'../bookieutils/connection.js';import{applyFont,registerModule}from'../bookieutils/helpeutils/fonthelp.js';import{InlineKeyboard}from'grammy';import{getConfig,hotReloadConfig}from'../bookieutils/config.js';export const name=a0w(0x100)+'er';export const version=a0w(0x122);export const adminOnly=![];registerModule(name),hotReloadConfig(()=>{const b=a0w,c=getConfig()[b(0x123)+'ER'];info(b(0x100)+b(0x8f)+b(0x138)+b(0xa7)+b(0x119)+b(0xe9)+b(0xcd)+b(0x106)+c[b(0xd8)+b(0xe2)+b(0xc6)]+(b(0x9f)+b(0xbc)+b(0xbd)+'=')+c[b(0x104)+b(0x11f)+b(0x107)]);});const userBlockerState=new Map();export async function initialize(){const a=a0w;info(await applyFont(name,a(0x8c)+a(0x116)+a(0xf8)+a(0xc9))),await db[a(0xae)](a(0xcf)+a(0x12e)+a(0xb2)+a(0x87)+a(0xd1)+a(0x84)+a(0x124)+a(0xb3)+a(0xa5)+a(0x8e)+a(0x120)+a(0x11a)+a(0xd0)+a(0xc7)+a(0xb6)+a(0x130)+a(0xdb)+a(0x115)+a(0xc5)+a(0xc0)+a(0xb7)+a(0x10d)+a(0xdf)+a(0xc8)+a(0x140)+a(0xe4)+a(0xf4));}function userKey(b){const c=a0w;return b[c(0x89)]['id']+'_'+b[c(0xa0)]?.['id'];}function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0x64;let f=c[d];if(a0d['MBayBX']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['ALiLGz']=g,a=arguments,a0d['MBayBX']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0d['ALiLGz'](f),a[i]=f):f=j,f;},a0d(a,b);}function a0a(){const U=a0d,a=[U(0x10c)+'Me',U(0xef)+'xi',U(0x12d)+'xa',U(0x139)+'a',U(0x114)+'g8',U(0x123)+'0m',U(0x109)+'xi',U(0xd8)+'ca',U(0x7e)+'0u',U(0xbe)+'ca',U(0x130)+'2u',U(0xec)+'hi',U(0x8d)+'Nq',U(0x13f)+'gG',U(0xea)+'W',U(0xac)+'q',U(0xce)+'00',U(0xd5)+'wC',U(0x68)+'Mu',U(0x13b)+'vG',U(0xa0)+'w4',U(0xfe),U(0x88)+'YW',U(0x8f)+'cW',U(0x155)+'1e',U(0x112)+'w4',U(0x9b)+'0G',U(0x6f)+'a',U(0x137)+'tS',U(0xa5)+U(0x7f)+U(0x14d)+'v',U(0x134)+'gG',U(0xd3)+'3m',U(0x152),U(0xca)+'f8',U(0xeb)+'gK',U(0xde)+'q',U(0xcc)+'ca',U(0xd1)+'t0',U(0x8a)+U(0x74)+U(0x10f)+'5',U(0x12c),U(0xc7)+U(0x12b),U(0x147)+'xm',U(0xbb)+'hK',U(0xa6)+'3q',U(0x126),U(0xdc)+'Ku',U(0xf8)+U(0x153)+U(0xb9)+U(0x108),U(0x149)+'gW',U(0xb7)+'MW',U(0xc0)+'Ia',U(0x79)+'d0',U(0x83),U(0x99)+'g8',U(0xb3)+U(0x136)+'y',U(0x9d)+U(0xc4)+U(0x121)+U(0x103),U(0xe1)+'a',U(0xb5)+'2S',U(0x145),U(0xfa)+'ee',U(0x6c)+'xq',U(0x95)+'v8',U(0xf1)+'gu',U(0x91)+'Z0',U(0xc1),U(0x132)+U(0x12e)+U(0x14a)+'v',U(0xae),U(0x102)+'xm',U(0x8b),U(0xdb)+'Lq',U(0x81)+'ge',U(0xb2)+'xu',U(0xef)+'wq',U(0x7d)+'Ya',U(0x7a)+'G',U(0x75)+'gi',U(0xeb)+'ha',U(0x102)+'q',U(0x119)+'ca',U(0x90)+'MK',U(0xa7),U(0xfb)+'wu',U(0x116)+U(0x70),U(0x79)+'eK',U(0x131)+'Ia',U(0xad)+'sa',U(0xf0)+'vq',U(0xb8)+'xq',U(0x82)+'vK',U(0xa1)+'xq',U(0x14e)+'1i',U(0xf2)+'Ja',U(0xa9)+'0S',U(0x142)+'g8',U(0xb6)+'gm',U(0xc2)+'xq',U(0x144)+'ca',U(0xc8)+'ey',U(0xb1)+'wy',U(0xff)+'e0',U(0xb4)+'3C',U(0xd9)+'a',U(0x150)+'3q',U(0xa4)+'vq',U(0x14b)+U(0x13d),U(0xd7)+'2u',U(0x65)+'xy',U(0xb0)+'gm',U(0xa2)+'hm',U(0x96)+'wC',U(0x69)+'Nq',U(0x10b)+'g8',U(0xcb)+'hq',U(0x13c)+'Ya',U(0x10e)+'vi',U(0xe8)+'gu',U(0xe6)+U(0xab)+U(0x14c)+'A',U(0x115)+U(0xe4)+U(0xa8)+U(0x97),U(0xe7)+'2S',U(0x105)+'w4',U(0x8c)+'K8',U(0x86)+'Ia',U(0x125)+'1q',U(0x122)+'g8',U(0x133)+'wq',U(0x84)+'uy',U(0xbf)+'Mu',U(0x107)+'a',U(0x9c)+'hi',U(0x9f)+U(0x7b)+U(0x11a),U(0x146)+'gK',U(0xe3)+'2e',U(0x66)+'ca',U(0x118)+'28',U(0xe9)+'um',U(0x7c)+'3m',U(0x110)+'fu',U(0x11d),U(0xfc)+'2S',U(0x73)+U(0x64),U(0x8e)+'uu',U(0x67),U(0x89)+'2u',U(0xba)+'q',U(0xc5)+'wC',U(0x77)+'xa',U(0x13a)+'t8',U(0x71)+'a',U(0x106),U(0x92)+'vy',U(0x120)+'q',U(0xe2)+'xm',U(0x14f)+U(0xd4)+'m',U(0xcc)+'c4',U(0xe0)+'xm',U(0xb6)+'aO',U(0xb3)+U(0xf4)+'q',U(0x151)+'2e',U(0xf5)+'3q',U(0x12f),U(0xaa),U(0xcd),U(0x11b)+'ca',U(0x117)+'0G',U(0xc9)+'W',U(0x93)+'gi',U(0xea)+'2W',U(0x135)+'ca',U(0x12a)+'ui',U(0x148)+'xm',U(0x6e)+'xu',U(0x80)+'gG',U(0x66)+'ha',U(0x87)+'vK',U(0x14b)+U(0x128),U(0x94)+U(0x7b)+U(0xfd),U(0xed)+'hu',U(0x11e)+'ca',U(0x85)+'uW',U(0x13e)+'vm',U(0xbc)+U(0x154)+'8',U(0x78)+'2G',U(0x11f)+'vi',U(0x104)+'3i',U(0x101)+'q',U(0xa3)+'2K',U(0xc7)+U(0x140),U(0x66)+'fa',U(0x6a),U(0xdd)+'ca'];return a0a=function(){return a;},a0a();}async function getGroupName(c){const d=a0w,e=await getConnectionName(c);return e||d(0xca)+'\x20'+c;}function a0c(){const X=['qJn2v2K','qwDMmhG','CtfQzNe','BNr5ww4','Bdjyuem','EJj2ma','shj5DMO','CuTyChe','ExDeta','wMeWExC','EMDMmhK','ExHUtgS','qNDMvW','zNjVBum','CNzQzMK','ENHYs3O','ExDUuNu','ogORqve','rgC5Bui','Cu1yvNK','rgHTr2S','qK1dr3e','CMD2u3O','otr6DM4','rgHmv3O','q012v0i','BvPQvNm','t1bruLm','Awu1Chy','Etn2wum','q1LIuei','EdaXDa','EMD2u3O','BevQvLm','sKm1B2u','ENHUwNK','ruzhseK','nfbzzMK','ExHUtgK','ENHithK','AwuXyNC','ENzYteu','ExH2u0q','ExDyuW','DhvMExG','BgvUz3q','vfvwv1G','q01MwNO','y2HHCKm','qZj1r2W','swjTqJi','qK5YCxK','A2XTBM8','qwHQsem','y0LHr2K','q2H2wKe','ndaXnvvSAvryzW','CNnIANq','DJbizNu','DuLxA2K','rgHQuei','Aw5KzxG','q2DiwxK','qZi5wuq','ENHQzhK','qND2wKm','DeCYBKS','EKfcq0q','BMrhwM0','BdjyvNK','EK1Muei','Dtb2Bxi','qMC5sKe','qtj2s2K','DMnIv0e','qxC1sKi','ntq1ndeWnMLnAgXqDa','qJjUuNO','CMv2Bxi','EK1mu0q','Bxm0wMW','owPksgDtEq','wwjVqJm','AuLIvui','ndnbDNDfywO','Dg9tDhi','BuP5mg8','odKRlZ0','EMqWl2K','ENDXr0i','Eu1yvNK','AKH5vW','Awq4nW','ENDYueq','mZq1nJC','rhD2wuu','q2DMtNO','u3rH','qMHXr3O','ExDmvue','CfLlnW','Etjiseq','v0nH','qZn2v3O','rvjOA3a','DfLIsui','AwHIt0m','ChfYC3q','C3u1Dhi','zNH5DMO','ENHXvwK','ntmYmdyYC1PIBhnt','AwD6vKq','sKTmtu4','Bdn2vui','BuPXmw4','EMD2s2K','rgHTr3y','ENHPr3K','DMnxA2K','nvzPyq','CNDYueq','AgfYq28','qZj2ma','ExDyuhO','DuTmBNe','EK5QvKi','vfj2thy','DhnIsui','DhzUAhG','ywjJzgu','CNziANu','y0LHrW','mtu0nJy0mJbQr2rRs1u','ztvwAwe','mJyZngrTA3Hvva','CNnIDxe','zNzvqMe','ENHQnq','CJnQvKq','sM0WENG','ELLHsq','qZnUshO','DMnIChu','BvP1m20','EJj2rKe','DeTXr0m','EtjuthO','wwjQqK4','AwnHr2S','mZq2otzAB3vnz3K','rgD2neq','Edjms3a','AwnIDxi','qK16uhO','zxjmEKC','CxzmrNq','AwDMmuq','zvHwEvC','Aw5N','DvLIsui','zMDOAwO','De12neq','ExHIua','C3C1ueq','ENnIu0e','Etjuu0e','q0TUsei','ug5XmLa','nfaYBwK','mvn3s1a','AKLbzwO','C3veB3q','ogORDuS','qMD2vxO','q012u0i','EMD2wG','DeTxBwC','s0rODti','Eu1MsKe','ChvZAa','B2rLqxq','thiWq1C','ExDUmee','AwnHr2K','EMrprW','qJnQueu','AwDUvKi','CxzQDa','C2XPy2u','qZnIu0e','wvOWmti','EMD2txK','EJj2ANO','B2TNs0C','AwDmvwK','y2HHCKe','BNvquNu','wMeYq2y','DuS5BMK','mJC2nZeXmKLTtu1rvW','EJnQvKq','EtjMmhK','Edjms2K','qu05uei','n0LWAwu','ENuXtem','qxHUmem','DeXYzNi','sMvxDuS','qZfeueq','AwnisKe','CMv2Bxe','B0DpAW','Dgv1r3m','CNy5zxi','qZj1ugm','D3nIBhi','DvLHt3a','ExC1wKq','BMrHmw4','q052vq','CNnIz3u','qZnYsem','DKTMBxy','rgy5uhO','ExDyueu','C2vMC3u','BgnIDhe','EtjMu0i','nffzzJC','DtbMD3i','ENHQv3K','ANjH','Dxz3EhK','De04r0i','C2HPzNq','DtberNe','EMnyv0e','BxrLv24','mJKWmJe2mhLRuwvrrG','nfbrrZC','ENHTr0e','AwDUt3K'];a0c=function(){return X;};return a0c();}function a0b(d,e){const f=a0a();return a0b=function(k,l){const V=a0d;k=k-0x84;let m=f[k];if(a0b[V(0x10a)+'k']===undefined){var n=function(v){const W=V,w=W(0x124)+W(0x143)+W(0xd6)+W(0x10d)+W(0x98)+W(0xe5)+W(0xc6)+W(0x113)+W(0xbd)+W(0xd0)+W(0x6d)+W(0x100)+W(0xf9);let x='',y='';for(let z=0x0,A,B,C=0x0;B=v[W(0x72)+'t'](C++);~B&&(A=z%0x4?A*0x40+B:B,z++%0x4)?x+=String[W(0xaf)+W(0x11c)+'de'](0xff&A>>(-0x2*z&0x6)):0x0){B=w[W(0xdf)+'Of'](B);}for(let D=0x0,E=x[W(0xcf)+'h'];D<E;D++){y+='%'+('00'+x[W(0xd2)+W(0x157)](D)[W(0xf7)+W(0x141)](0x10))[W(0x6b)](-0x2);}return decodeURIComponent(y);};a0b[V(0xc3)+'Z']=n,d=arguments,a0b[V(0x10a)+'k']=!![];}const o=f[0x0],p=k+o,q=d[p];return!q?(m=a0b[V(0xc3)+'Z'](m),d[p]=m):m=q,m;},a0b(d,e);}function prepareBlockPages(i,j){const k=a0w,l=getConfig()[k(0x123)+'ER'][k(0xd8)+k(0xe2)+k(0xc6)],m=i[k(0x109)](p=>'•\x20'+p)[k(0xff)](),n=[];let o=k(0xa2)+k(0x113)+k(0x130)+k(0xf9)+j+k(0xfb);for(const p of m){const q=p+'\x0a';(o+q)[k(0x12d)+'h']>l?(n[k(0x12c)](o[k(0xeb)]()),o=k(0xa2)+k(0x113)+k(0x130)+k(0xf9)+j+k(0xfb)+q):o+=q;}if(o)n[k(0x12c)](o[k(0xeb)]());return n;}function getKeyboard(d,e){const f=a0w,g=new InlineKeyboard();if(d>0x1){if(e>0x0)g[f(0xcb)](f(0xb9)+'k',f(0x94)+f(0x134)+'e_'+(e-0x1));if(e<d-0x1)g[f(0xcb)](f(0x127)+'➡️',f(0x94)+f(0x134)+'e_'+(e+0x1));}return g;}export async function onMessage(v){const w=a0w,x=v[w(0x8d)+'ge']?.[w(0xcb)]?.[w(0xeb)]();if(!x)return;const y=[w(0x9b),w(0xce)+w(0x9b)][w(0xba)+w(0xe8)](v[w(0x89)][w(0x99)]),[z,...A]=x[w(0x103)]('\x20'),B=A[w(0x111)]('\x20')[w(0xeb)]()[w(0x12b)+w(0xa1)+'e']();if([w(0x13d),w(0xcc)+'ck',w(0xf3)+w(0xd6)][w(0xba)+w(0xe8)](z)){if(!await isAdmin(v))return v[w(0xf2)](await applyFont(name,w(0xa6)+w(0xd5)+w(0xda)+'d'));let C=y?v[w(0x89)]['id']:await((async()=>{const G=w,H=await getDefault();if(!H)return await v[G(0xf2)](await applyFont(name,G(0xb8)+G(0xb4)+G(0xc1)+G(0x133)+G(0x92)+G(0xe7)+G(0x129)+G(0xa3))),null;const I=await getConnection(H);if(!I)return await v[G(0xf2)](await applyFont(name,G(0x12f)+G(0xec)+'\x22'+H+(G(0xa8)+G(0xe1)+'d.'))),null;return I;})());if(!C)return;const E=await getGroupName(C),F=B[w(0x103)](',')[w(0x109)](G=>G[w(0xeb)]())[w(0x105)+'r'](Boolean);if(z===w(0x13d)){for(const G of F){await db[w(0x10b)](w(0x139)+w(0x11b)+w(0x121)+w(0x10c)+w(0x136)+w(0xb3)+w(0x125)+w(0xc3)+w(0x8a)+w(0x11c)+w(0x96)+w(0xde)+w(0x9e),C,G);}return v[w(0xf2)](await applyFont(name,w(0xc4)+w(0xea)+'n\x20'+E+':\x20'+F[w(0x111)](',\x20')));}if(z===w(0xcc)+'ck'){for(const H of F){await db[w(0x10b)](w(0x11d)+w(0x13f)+w(0x85)+w(0xb3)+w(0xad)+w(0x132)+w(0xc3)+w(0x102)+w(0xe6)+w(0xed)+'?;',C,H);}return v[w(0xf2)](await applyFont(name,w(0xf0)+w(0x10f)+w(0x9d)+E+':\x20'+F[w(0x111)](',\x20')));}if(z===w(0xf3)+w(0xd6)){const I=await db[w(0xab)](w(0x90)+w(0xd3)+w(0x128)+w(0x112)+w(0xb0)+w(0x110)+w(0xf5)+w(0x120)+w(0xfa)+w(0xdd),C),J=I[w(0x109)](P=>P[w(0xa4)+'e']);if(!J[w(0x12d)+'h'])return v[w(0xf2)](await applyFont(name,w(0xfc)+w(0xb1)+w(0xa4)+w(0xdc)+'\x20'+E+'.'));const K=prepareBlockPages(J,E),L=userKey(v),M={'pages':K,'currentPage':0x0,'messageId':null},N=await applyFont(name,K[0x0]),O=await v[w(0xf2)](N,{'reply_markup':getKeyboard(K[w(0x12d)+'h'],0x0)});M[w(0x8d)+w(0xe3)]=O[w(0x8d)+w(0x86)],userBlockerState[w(0x93)](L,M);}}if(y&&!await isAdmin(v)){const P=x[w(0x12b)+w(0xa1)+'e'](),Q=await db[w(0xab)](w(0x90)+w(0xd3)+w(0x128)+w(0x112)+w(0xb0)+w(0x110)+w(0xf5)+w(0x120)+w(0x9c)+';',v[w(0x89)]['id']);for(const {phrase:R}of Q){if(P[w(0xba)+w(0xe8)](R)){await v[w(0x126)+w(0x91)+w(0xaa)]()[w(0xbf)](()=>{}),info(w(0x11e)+w(0x118)+w(0xd2)+w(0x9d)+v[w(0x89)]['id']+(w(0x135)+w(0x13e)+w(0xa9))+R+'\x22');return;}}}}export async function onCallbackQuery(e){const i=a0w,j=e[i(0xaf)+i(0x10e)+i(0xef)]?.[i(0xd7)];if(!j?.[i(0xd4)+i(0xb5)](i(0x94)+i(0x134)+'e_'))return;const k=userKey(e),l=userBlockerState[i(0x117)](k);if(!l)return e[i(0x98)+i(0xf7)+i(0xe0)+i(0xc2)](i(0x8b)+i(0x131)+i(0xf1)+'t');const m=parseInt(j[i(0x103)]('_')[0x1],0xa);if(isNaN(m)||m<0x0||m>=l[i(0x10a)][i(0x12d)+'h'])return e[i(0x98)+i(0xf7)+i(0xe0)+i(0xc2)](i(0xfd)+i(0xbb)+i(0x114));l[i(0x88)+i(0xd9)+'e']=m,await e[i(0x98)+i(0xf7)+i(0xe0)+i(0xc2)]();const n=await applyFont(name,l[i(0x10a)][m]);try{await e[i(0x101)][i(0x12a)+i(0x9a)+i(0x137)](e[i(0x89)]['id'],l[i(0x8d)+i(0xe3)],n,{'reply_markup':getKeyboard(l[i(0x10a)][i(0x12d)+'h'],m)});}catch(o){error(i(0xac)+i(0x13a)+i(0x97)+o[i(0x8d)+'ge']);}}
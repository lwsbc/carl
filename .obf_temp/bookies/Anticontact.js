(function(a,b){const Q=a0d,c=a();while(!![]){try{const d=-parseInt(Q(0x1a2))/0x1+-parseInt(Q(0x193))/0x2+-parseInt(Q(0x115))/0x3*(parseInt(Q(0x134))/0x4)+parseInt(Q(0x14f))/0x5+parseInt(Q(0x100))/0x6*(-parseInt(Q(0x169))/0x7)+-parseInt(Q(0x1af))/0x8*(-parseInt(Q(0x108))/0x9)+parseInt(Q(0xfb))/0xa*(parseInt(Q(0x11f))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0xca61f));const a0w=a0b;(function(f,g){const R=a0d,h=a0b,i=f();while(!![]){try{const j=parseInt(h(0xb7))/0x1*(parseInt(h(0xcf))/0x2)+-parseInt(h(0xe4))/0x3*(parseInt(h(0xa1))/0x4)+-parseInt(h(0xb0))/0x5*(parseInt(h(0xc4))/0x6)+-parseInt(h(0xcc))/0x7+parseInt(h(0x12c))/0x8+parseInt(h(0x13e))/0x9*(-parseInt(h(0x11e))/0xa)+parseInt(h(0xd3))/0xb*(parseInt(h(0x120))/0xc);if(j===g)break;else i[R(0x165)](i[R(0x186)]());}catch(k){i[R(0x165)](i[R(0x186)]());}}}(a0a,0x55f08));import{getConfig}from'../bookieutils/config.js';import{error,info}from'../bookieutils/logger.js';function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0xe5;let f=c[d];if(a0d['NJGybM']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['wCEQlp']=g,a=arguments,a0d['NJGybM']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0d['wCEQlp'](f),a[i]=f):f=j,f;},a0d(a,b);}import{db}from'../bookieutils/db.js';import{applyFont,registerModule}from'../bookieutils/helpeutils/fonthelp.js';import{parsePhoneNumberFromString}from'libphonenumber-js';export const name=a0w(0x106)+a0w(0xf2)+'t';export const version=a0w(0xb2);registerModule(name);const COUNTRIES=['KE','US','GB','IN','NG','ZA','TZ','UG','RW','ET','SO','SD'],infractions={};let processing=![],lastProcessTime=0x0,globalBot=null;function containsEmail(b){const c=a0w;return/[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}/[c(0x110)](b);}function containsPhoneNumber(j){const k=a0w,l=/\b(?:(?:\+254|254)\d{9}|(?:07|01)\d{8})[\s()-.]*\b/g,m=j[k(0x124)+'ce'](/\r\n/g,'\x0a')[k(0xd2)]('\x0a');for(const n of m){const o=n[k(0x115)]();if(!o)continue;let p;while((p=l[k(0x11a)](o))!==null){const q=p[0x0][k(0x124)+'ce'](/[^\d+]/g,'');if(q[k(0xf3)+'h']<0x9||q[k(0xef)+k(0xa6)]('+')&&q[k(0xf3)+'h']<0xc)continue;for(const r of COUNTRIES){try{const s=parsePhoneNumberFromString(q,r);if(s?.[k(0xc7)+'id']()&&s[k(0x12f)+'ry']==='KE')return!![];}catch{}}}}return![];}async function initDatabase(){const a=a0w;await db[a(0x11a)](a(0xf6)+a(0x127)+a(0x121)+a(0xff)+a(0x146)+a(0xd6)+a(0xa4)+a(0x11f)+a(0x132)+a(0x128)+a(0xaf)+a(0xf4)+a(0xd0)+a(0xd9)+a(0xa8)+a(0x13f)+a(0x100)+a(0xd1)+a(0xae)+a(0xb3)+a(0xd9)+a(0xa8)+a(0x13f)+a(0x100)+a(0xd1)+a(0x134)+a(0x129)+a(0x126)+a(0xde)+a(0xce)+a(0xe9)+a(0x148)+a(0xf5)+a(0xe8)+a(0x102)+a(0xbf)+a(0x11b)+a(0x108)+a(0xcb)+a(0xa2)+a(0x109)+a(0xc2)+a(0xdf)+a(0xe5)+'\x20\x20');}async function enqueueDeletion(c,d){const e=a0w;await db[e(0x114)](e(0xa3)+e(0x107)+e(0x10e)+e(0xe1)+e(0x10b)+e(0x11f)+e(0x132)+e(0x128)+e(0xb8)+e(0xbe)+e(0xae)+e(0xb3)+e(0xdd)+e(0x12e)+e(0x135),c,d),processQueue();}function a0b(d,e){const f=a0a();return a0b=function(k,l){const S=a0d;k=k-0x9f;let m=f[k];if(a0b[S(0x122)+'u']===undefined){var n=function(v){const T=S,w=T(0x177)+T(0x13a)+T(0x13d)+T(0x163)+T(0xea)+T(0xfd)+T(0x19c)+T(0x148)+T(0x10e)+T(0x124)+T(0x116)+T(0x11b)+T(0x197);let x='',y='';for(let z=0x0,A,B,C=0x0;B=v[T(0x18d)+'t'](C++);~B&&(A=z%0x4?A*0x40+B:B,z++%0x4)?x+=String[T(0x17c)+T(0x14d)+'de'](0xff&A>>(-0x2*z&0x6)):0x0){B=w[T(0x17f)+'Of'](B);}for(let D=0x0,E=x[T(0xec)+'h'];D<E;D++){y+='%'+('00'+x[T(0x138)+T(0xef)](D)[T(0x151)+T(0xff)](0x10))[T(0x155)](-0x2);}return decodeURIComponent(y);};a0b[S(0xf9)+'F']=n,d=arguments,a0b[S(0x122)+'u']=!![];}const o=f[0x0],p=k+o,q=d[p];return!q?(m=a0b[S(0xf9)+'F'](m),d[p]=m):m=q,m;},a0b(d,e);}async function processQueue(){const e=a0w,g=Date[e(0x13c)](),{QUEUE_COOLDOWN_MS:QUEUE_COOLDOWN_MS=0xbb8}=getConfig()[e(0xd4)+e(0xa9)+'T'];if(processing||g-lastProcessTime<QUEUE_COOLDOWN_MS||!globalBot)return;processing=!![],lastProcessTime=g;try{let h;while(h=await db[e(0xe0)](e(0xfe)+e(0x123)+e(0xa2)+e(0x109)+e(0xc2)+e(0xbc)+e(0xda)+e(0x11f)+e(0x132)+e(0x128)+e(0xb1)+e(0x133))){if(!h[e(0xf3)+'h'])break;for(const i of h){try{await globalBot[e(0x119)][e(0x13d)+e(0xfc)+e(0x139)](i[e(0x145)+'id'],i[e(0xae)+e(0xb3)]);}catch(j){![0x190,0x194][e(0xc0)+e(0xad)](j[e(0x11d)+e(0xaa)])&&error(name,e(0x12a)+e(0x105)+e(0xcd)+e(0x112)+j[e(0xae)+'ge']);}await db[e(0x114)](e(0xc6)+e(0xb5)+e(0xda)+e(0x11f)+e(0x132)+e(0x128)+e(0xc9)+e(0x10d)+e(0xd8)+e(0x11c)+e(0x12d)+e(0x113)+e(0xc5)+'?',i[e(0x145)+'id'],i[e(0xae)+e(0xb3)]),await new Promise(k=>setTimeout(k,0x32));}}}catch(k){error(name,e(0x12a)+e(0x103)+e(0x131)+e(0x13a)+'\x20'+k[e(0xae)+'ge']);}finally{processing=![];}}function a0a(){const U=a0d,a=[U(0x10d)+U(0x149),U(0x1b4)+'WO',U(0x10f)+'M8',U(0x1ba)+'a',U(0x19d)+'u0',U(0x15b)+'em',U(0x145)+'wu',U(0x103),U(0x157),U(0x1b0)+'hi',U(0x189)+'gK',U(0x1ab)+'Nq',U(0x18b)+'wW',U(0x1b1)+'uq',U(0x1a4)+'wm',U(0x153)+'3q',U(0x12f)+'2G',U(0x185)+'u0',U(0x176)+'ca',U(0x117)+'1u',U(0x15f)+'gu',U(0x19e)+'uW',U(0x16b)+'3u',U(0x11a)+'vm',U(0xfe)+'3m',U(0x1c1)+'sa',U(0x18e)+'um',U(0x1c4)+'uy',U(0x167)+'Ia',U(0x11d)+'2G',U(0x1a5)+'ca',U(0x140)+'2m',U(0x1aa)+'u4',U(0x102)+'gu',U(0x113)+'wm',U(0x1b3)+'Ia',U(0x1b6)+'vK',U(0xf8)+'3m',U(0x135)+'G',U(0x13b)+'Nq',U(0x174)+'04',U(0xe8)+'xq',U(0x164)+'1i',U(0x109)+'ee',U(0x16a)+'a',U(0x198)+'eK',U(0x146)+'Ia',U(0x129)+'v8',U(0x152),U(0x1a0)+'q',U(0x184)+'2G',U(0x13f)+'eq',U(0x147)+'q',U(0x156),U(0xeb)+'W',U(0x15c)+'vi',U(0xfc)+'u4',U(0x1bc)+'3i',U(0x1b5)+U(0x173)+U(0x111),U(0x15e)+'Nq',U(0x120)+U(0x1b2)+U(0x1b7)+'5',U(0xf0)+'ui',U(0x106)+'a',U(0x136)+'ge',U(0xf3)+'ge',U(0x18f)+'Ku',U(0xee)+'uu',U(0x194)+'vq',U(0x15a)+'sa',U(0x143)+'xq',U(0x13c)+'wu',U(0x158)+'gu',U(0x1b8)+U(0x19f)+U(0x190)+'b',U(0x150)+'xm',U(0x1bb)+'cG',U(0x1bf)+'Nq',U(0x162)+'a',U(0x1a6)+'gu',U(0x11c)+'3e',U(0x16e),U(0xe5)+'xq',U(0x16f)+'YK',U(0xfa)+'we',U(0x101)+'xa',U(0x1b9),U(0x128),U(0xe7)+'JO',U(0xf1)+'fq',U(0xf6),U(0xf2)+'xq',U(0x178)+U(0x16d)+U(0xe9),U(0x182)+'Lu',U(0x188)+'sa',U(0xf7)+'MK',U(0x14b)+'a',U(0x133)+'gu',U(0x119)+'w0',U(0x1a3)+'f8',U(0xf4)+'ca',U(0x117)+'fi',U(0x1bd)+'u4',U(0x127),U(0x188)+'wq',U(0x12d)+'xi',U(0x130)+'Mu',U(0x172)+U(0x195)+U(0x15d)+'p',U(0x12a)+'cW',U(0x1ae)+'vi',U(0x17d)+'Nq',U(0x18c)+'xi',U(0x105)+'gG',U(0x10c)+'3q',U(0x1a1)+'e4',U(0x12b)+'um',U(0x160)+'gu',U(0xf5)+'M4',U(0x12c)+'gG',U(0x1ac),U(0x191)+'2e',U(0x13e)+'ca',U(0x126)+U(0x159)+U(0x168)+'t',U(0x17e)+'vq',U(0x1a9)+'Je',U(0x107)+'wq',U(0x171)+'hi',U(0x175)+'K8',U(0x192)+'G',U(0x142)+U(0x17b),U(0x110)+'xq',U(0xf3)+'hK',U(0x199)+'W',U(0x139)+'ui',U(0x1a7)+'K8',U(0x19b)+'Ke',U(0x154)+'ca',U(0x16c)+'fa',U(0x141)+'hu',U(0x1c0)+'a',U(0x131)+'2K',U(0x1ad)+'2u',U(0x17a)+U(0x166),U(0x132)+'sa',U(0x125)+'vq',U(0x14e)+'wW',U(0x179)+'Ia',U(0x12e)+'Ku',U(0x118)+'q',U(0x123)+'ge',U(0x187)+U(0x114)+U(0x1c6)+U(0x1be),U(0xed)+'xi',U(0x121)+'Ke',U(0x1c5)+U(0x183)+U(0x196)+'r',U(0x14a)+'wq',U(0x16c)+'ca',U(0x1c3)+'xq',U(0x144)+U(0x18a)+'Dn',U(0x161)+'um',U(0xe6)+'2K',U(0x19a)+'1q',U(0x14c)+'Nq',U(0x11e)+'d0',U(0x181)+'eu',U(0x180)+'Nq',U(0x1a3)+'a',U(0x170)+'KK',U(0x1c2)+'uW',U(0x104)+'va',U(0x112)+'ca',U(0x10b),U(0x137)+'Lq',U(0x10a)+'a',U(0x1a8)];return a0a=function(){return a;},a0a();}export async function initialize(b){globalBot=b,await initDatabase(),processQueue();}export async function onMessage(e){const v=a0w,w=getConfig()[v(0xd4)+v(0xa9)+'T'],x=e[v(0xae)+'ge']?.[v(0x142)]??e[v(0xae)+'ge']?.[v(0xee)+'on'];if(!x||e[v(0xdb)][v(0x118)]!==v(0xa5)+v(0x137)||e[v(0xca)]?.[v(0xe6)+'t'])return;const y=e[v(0xdb)]['id'],z=e[v(0xae)+'ge'][v(0xae)+v(0xb3)],A=e[v(0xca)]['id'];let B=![],D='';w[v(0xf9)+v(0xbb)+v(0xeb)]&&containsEmail(x)&&(B=!![],D=v(0xf0)),w[v(0x10f)+v(0x104)+v(0xf1)]&&containsPhoneNumber(x)&&(B=!![],D=D?D+(v(0xac)+v(0xe3)):v(0xa0));if(!B)return;let E=![];try{await e[v(0x13d)+v(0xfc)+v(0x139)](),E=!![];}catch(L){enqueueDeletion(y,z);}const F=Date[v(0x13c)](),G=w[v(0xbd)+v(0x10c)+v(0x111)+v(0xfb)]||0x36ee80,H=w[v(0xbd)+v(0x10c)+v(0x125)+v(0x117)]||0x2;infractions[A]=(infractions[A]||[])[v(0x143)+'r'](M=>F-M<G),infractions[A][v(0xe7)](F);if(infractions[A][v(0xf3)+'h']>=H){try{await e[v(0x119)][v(0xb4)+v(0x101)+v(0x144)+v(0x149)](y,A,{'permissions':{'can_send_messages':![]}}),await info(name,v(0x14a)+v(0x9f)+'\x20'+A+(v(0xc8)+v(0x136)+v(0xc1))+D);}catch(M){error(name,v(0x140)+v(0x12b)+v(0x138)+M[v(0xae)+'ge'],M);}return;}const I=e[v(0xca)][v(0xab)+v(0xec)]?'@'+e[v(0xca)][v(0xab)+v(0xec)]:v(0xed)+v(0xd7)+v(0xfa)+v(0xd5)+'d='+A+'\x22>'+(e[v(0xca)][v(0xa7)+v(0xea)]||v(0x10a))+v(0xb6),J=!e[v(0xca)][v(0xab)+v(0xec)],K=await applyFont(name,w[v(0xdc)+v(0x147)+v(0x122)]||'')+I+await applyFont(name,w[v(0xdc)+v(0xf7)+v(0xe2)]||'');try{const N=await e[v(0xb9)](K,{'parse_mode':J?v(0x130):undefined}),O=w[v(0xdc)+v(0x13b)+v(0xba)]||0x493e0;setTimeout(()=>e[v(0x119)][v(0x13d)+v(0xfc)+v(0x139)](y,N[v(0xae)+v(0xb3)])[v(0x116)](()=>{}),O);}catch(P){error(name,v(0x141)+v(0xc3)+v(0xf8)+v(0xfd)+v(0x12b)+v(0x138)+P[v(0xae)+'ge'],P);}}function a0c(){const V=['DJbMC3q','q012wKq','B2r1v24','zgiYquS','CtfYANq','CNnIz3u','y0LHr2K','ywjJzgu','BuPHmM0','AwD6vKm','BK1ym0u','D0XzDge','zNjVBum','DvLIsei','DgvmBNm','Aw5KzxG','DhnIsei','AwvmB3y','DdfXr3q','Dg00qZa','EtjMmhK','DMy5Dxm','C2HPzNq','BuPhmw8','DhH2mhO','EtjMv0q','mNzRrhu','CNCXsee','qZn2v3O','y2HHCKe','Dtb2Bxi','EdfYAxu','tgz3tNy','qND2wKm','Cgm5sha','mJm3nZm0mLblwKnmtq','CtfQzNe','sNKWqZi','oxnXm0q','odKRlZ0','Edb2Exu','Dgy5BNu','CNziANu','C3u1z3u','ruzhseK','CNzUDxe','CJaXyNm','zhfxrde','rgHQuei','CJb2C2K','oti2otG0wwT1BM56','Etjiseq','qJi1mhK','DwnxA2K','ENHUwMK','EMnIz3u','qJi1ta','BuK0wgW','CtfYrNi','qZnYsem','EMD2wG','qK1dr0m','C3u1Dhi','mJGWvg12u3Ph','CgDLr0e','CxvQBxi','wKDxDNC','DMnIChu','AwnHug8','BuPPnw4','D3nIBhi','vdbds1G','BNrhng0','EMrprW','q2H2wKe','DNv2DgK','ENHQwui','DNzQC3i','nNPx','Eti5mui','rgD2s2K','qMD2mhO','A3nID3e','qZnIu0e','Dgv1r3m','BKPXv28','tgHZm2O','EtnQthK','qZj2wxa','q05QvKm','AwDUt3K','yKP5rW','Dxz3EhK','ENHithK','BgvUz3q','rgD1r3O','AwzYANq','B2rLqxq','CNnIDxe','DeTerNy','EMD2u3O','q012v0i','Awu1Chy','rhHUtem','qK05mW','DJjMwui','AwCXtem','sM1iz2S','q012v3O','otqZmdeZmhvQB0DKDW','Awq4r3e','EKfcq0q','ENuXtem','Aw5N','ndmYnde3mfb5qvvYEq','EJnQvKq','AwDYtei','Dgv2zq','DtfYyNq','qZfeueq','CNv6ANC','EJj2rKe','mtq3mZnlEer1tNi','Cta5B3y','CKT6ANC','ExDyuW','EK1mwum','BKTYDhy','t1bruLm','qxHUrNK','A2DUt3K','ouf0tem','EMnlA2K','CxC1mee','DgKWB2G','mJfvCxHsuvm','wvOWmti','DeTerNu','EK5QvKi','ExHYBNO','DuXmrNq','mZq1nJC','ExDUmhG','qxDUmhe','Edjms2K','ndriqLLXtwS','BvPLnw0','AwvYzNi','ywnPq04','AwnisKe','vfvwv1G','CMv2Bxi','B2r5mM4','Eu12wq','ExDeta','qZjMtNO','rgy5uhO','Dda1Dxe','Awn5r3u','AwH2wNO','DJbizNu','AwnHr3K','DwDivKi','ExDethG','qxDXr3a','EK1mu0q','mJyZmZaWwwHyzw5m','DNHUtem','DMnIsKe','CNnIANq','y2HHCKm','Edb2B3e','zMDOAwO','DfLIsei','DxH2teq','A2XTBM8','A2fpr2K','DtbiChq','AwHIwui','qxC1sKi','BxC5Ehu','ENDYrNK','BKPLmNK','Edi1sei','q005ww8','rgHmv3O','sKTmtu4','s0XODNe','ExHYrKe','rgD2neq','END5owK','AgfYq28','qxHUD3K','mtq4mZy4nurSuLfjzW','CMnIvhO','Dg9tDhi','q052vq','qMD2vxO','Edjms2W','C2XPy2u','ExHIua','ExCXta','EK1Muei','zgLxD3G','rhD2mxO','DNvyDwK','DuTmBNe','EKPcmNy','qxDUvKi','qK1XvNO','EdjUvNO','Cxu1Dxm','C2zYBNq','ChfYC3q','C3veB3q','ChvZAa','EeH4Cxe','Dgvxu2m','tgzZtfa','n2joCxrMBa','rgD2wKq','ELPpvMW','AwnHr2K','DNO2rwy','AwrLvW','CfLxr3a'];a0c=function(){return V;};return a0c();}export async function onCallbackQuery(){}
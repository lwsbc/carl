(function(a,b){const F=a0g,c=a();while(!![]){try{const d=-parseInt(F(0x234))/0x1*(parseInt(F(0x1dc))/0x2)+-parseInt(F(0x172))/0x3*(-parseInt(F(0x270))/0x4)+parseInt(F(0x21b))/0x5*(parseInt(F(0x295))/0x6)+-parseInt(F(0x276))/0x7*(-parseInt(F(0x239))/0x8)+parseInt(F(0x1db))/0x9+-parseInt(F(0x248))/0xa+parseInt(F(0x1e3))/0xb*(-parseInt(F(0x299))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0f,0xcbc39));const a0r=a0b;function a0g(a,b){const c=a0f();return a0g=function(d,e){d=d-0x15e;let f=c[d];if(a0g['Uphziv']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0g['RGiCDl']=g,a=arguments,a0g['Uphziv']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0g['RGiCDl'](f),a[i]=f):f=j,f;},a0g(a,b);}(function(f,g){const G=a0g,i=a0b,j=f();while(!![]){try{const k=-parseInt(i(0x10b))/0x1*(-parseInt(i(0x155))/0x2)+-parseInt(i(0x157))/0x3*(parseInt(i(0x10a))/0x4)+parseInt(i(0xaf))/0x5*(-parseInt(i(0x183))/0x6)+-parseInt(i(0xe8))/0x7*(-parseInt(i(0x198))/0x8)+parseInt(i(0x18e))/0x9+parseInt(i(0xa7))/0xa*(-parseInt(i(0x99))/0xb)+parseInt(i(0x13d))/0xc*(parseInt(i(0x168))/0xd);if(k===g)break;else j[G(0x24c)](j[G(0x15f)]());}catch(l){j[G(0x24c)](j[G(0x15f)]());}}}(a0a,0x5861c));import a0h from'sqlite3';import{open}from'sqlite';import a0i from'fs-extra';import a0j from'path';import{getConfig}from'./config.js';function a0f(){const K=['B1Dpr2K','DhDmtKm','DMv2Ahi','ExnImum','ENHTvwW','AwDyvNO','CxzYzMK','qZjMtNO','qtj2num','Dg9tDhi','qwD2rKm','AwnhA2K','q01MvxO','ota1AuDey25i','CK96D1G','CK1ymum','C3C1ueq','AwD6see','AwnIzhu','CZb2EMK','DuDpr2K','Dxz3EhK','AwH2wNO','ywjJzgu','CxnItui','Eu1MwNO','C3v5r3q','rgDmvKi','ENHiueq','AwD6u0q','BLrbDtu','qJnevwK','qK1mmee','CxnIweq','rgC5ANu','CMvQrNu','AwnHr2S','BLPinue','nZy0vxz4Eejc','C2XPy2u','m0XbCNC','wNPoDu4','EK1Muei','mty4ntm2vfLgwwTQ','y2HHCKm','tKXkDwy','Edjms2K','DuSWr0m','Bxrlwg0','DtjUt3O','qMC5wKe','CxnImum','BgnHl2W','q1LHr2K','q1LHt0q','AwDYmum','Bgfpr2K','ENDUuM8','odq3ndi0mgngrfrHvW','CxvQBxi','EtjithK','CxnIuui','ChvZAa','DMfpr2K','ExDQsem','DMv2Exy','Aw5KzxG','ENDXnMK','qZn2tem','t1bruLm','q2H2wKe','A2fpr2K','qxHXr3O','qxC1mhO','CuT2Ahm','ENHlr2K','EtjMmhK','AwzYzNC','C3zqzG','q2nItxK','AK5YDtu','ENDmtKi','zemYrgG','BNrTmM4','q01Ms3O','CxnIwKu','DtbMzhy','AwHYwMK','CxnIsNK','ExHUta','DuS5Bxq','A3fpr2K','q001sei','BgvUz3q','CNziDwK','ovncmva','rxy5mee','q05QvKm','ndCZmKHnt2zXsa','Etjiwui','AgfYq28','qtnIvKe','ELLItei','Be1Qsee','ndyYq0fJtgr0','DtnYwue','ChnIEhe','BuPdmg8','qKLHwa','BLPTv20','DuLxA2K','qMD1r2K','ENDXr0i','qMC5sKe','DtbmAhm','qMD2vxO','rwDmwKq','sKTmtu4','qxDXu2K','C3zYEG','CJvbthK','CNziDwW','BvPPmxK','qK05mW','AwzYC3e','EdjUt3O','DeTUyNy','B3rHmg4','AwnHug8','BvPTmw8','Awz6yNq','qxDXr3m','AwHYvMK','BxrLwxO','AwCXvNO','ndy5nJjZDLD1EMS','q005ww8','ru11r3a','ChnHwg8','mtiWzhbqrML2','rgHlr0e','CNvezNu','qJnPnMK','C2HPzNq','BuS1ANK','q01mtem','qwHQsem','rxC1sG','tfbjC3e','ChnHwg0','DMvUAxG','DtfYDgK','AwDYseq','AwmWr3K','rhD2s2K','AwHeueq','EJj2ma','EJj1r3y','Etjiseq','q012wKi','ELLIs3K','ChnIChq','nJK2q0PWwwHh','rgD2tKm','qJi1sNO','zNjVBum','qJjewMK','ENC1mem','re12u2K','ExDh','ENC5muq','ENHYsgK','DeXYzNi','rgniDxu','C3C1mhO','qMD2s28','qMH2wKe','odKRlZ0','BhrLv20','rhC1wKe','Cta5BNq','EtjyvKm','qNC5s0q','vfvwv1G','zKXPCJm','qJn2wMK','rxy5sKe','BwrHnW','DfLIu0i','qMDmnNO','AKP1m24','ExDxr3O','ENDewue','zgLyCKS','AwH6sei','qu05uei','EMDmsMK','re12wum','qZnIu0e','DuTMy3m','qJi1vxO','AwnIANq','qK16wxK','A2XTBM8','DMHQsei','mZq1nJC','AwC1sei','B2rhv3K','ExDmu3O','zMDOAwO','Cu1MsKe','ExDUuKq','ExHUtgW','qND2wKm','q0W5mNO','B2rIwNi','rhHUtem','ruzhseK','qwnItem','y2HHCKe','CfLxr3a','thLbtuC','CxnIm3K','ChfYC3q','DMnIANq','DuXlr3m','C3u1Dhi','qxHUmem','mhPzqta','Eti5v0u','ENvYuem','CKX2Bxq','EtnesW','D3nIBhi','Eu1mu0e','qwDmtKe','AwHQtei','EMDMmhK','DeS5C3q','EhzzCJa','D2zXu2m','CMvPr0e','CNzTr2S','qZjmvKi','ExDUmee','y0LHr2K','rhDytgW','ENDMs0u','DeSXBu0','ENDmmNO','ENC1wKq','qJnUuei','D3nxA2K','AwDUwxO','q3H2uhK','CxnIsuq','CMDMmhK','EtjtnW','BgnIvhO','qxC1tMK','Etj2ueq','AwnICxu','Dtjimuq','B2rLqxq','q2HQtem','ENnHr3y','wMKYEMu','otyYnty5oeXhwNrZqG','nJy4C2fUD3HM','ENHithK','qxHqta','D2zXA2K','DeHKqJi','qNC5s3O','ENnIDxi','mJqZnti1n0fKs2ncCW','q052vq','DuTmBNe','EKfcq0q','DMnIwxO','DtbmAhy','CxvUBg8','AwnHr2K','Aw5N','EMnHvgK','rgD2s2K','Dda0nW','AwnHr0i','DwzQANq','DhvMC3C','rhHUt2K','DwD2wue','Du12weq','Cu1MmhK','ExHXrW','q2DMmee','DeDyDxC','BxrPwg0','CMvQrNi','qZjyuhK','qxC1uei','vvzPt1q','CxnIuei','ExHUtgK','EMrprW','qKLItem','DMnIzNC','EtjurNK','BgnIvei','qMD2mNO','q2DiwxK','CMvQrNe','wvOWmti','EK1mvxK','vgTgrwS','DwzQyNi','q01mmeu','ENHQwKe'];a0f=function(){return K;};return a0f();}import{info,error,warn}from'./logger.js';let db,dbReady=![],writeQueue=[],isFlushing=![],flushTimer;export async function initializeDatabase(){const h=a0b;try{const j=getConfig(),k=a0j[h(0xfb)+'ve'](process[h(0xff)](),j[h(0xd9)+'TH']);a0i[h(0x108)+h(0x190)+h(0x113)](k);const l=a0j[h(0xa5)](k,h(0x146)+h(0x12c)+'b'),m=a0j[h(0xa5)](k,h(0x146)+h(0x1a1)+new Date()[h(0xd0)+h(0xc5)+'g']()[h(0x186)](0x0,0xa)+h(0xde));db=await open({'filename':l,'driver':a0h[h(0x114)+h(0x125)]}),await db[h(0x191)](h(0xe3)+h(0xf6)+h(0x122)+h(0x119)+h(0x116)+';'),await db[h(0x191)](h(0xe3)+h(0x131)+h(0xa4)+h(0x118)+h(0xeb)+h(0xc1)),await db[h(0x191)](h(0xe3)+h(0xb4)+h(0x17b)+h(0x112)+'\x20'+(j[h(0x9c)+h(0x137)+h(0x163)]===h(0xb9)?h(0xd3):h(0xbe)+'L')+';'),await db[h(0x191)](h(0xe3)+h(0x19f)+h(0x95)+h(0x96)+h(0xa6)),await db[h(0x191)](h(0xe3)+h(0x18d)+h(0xcd)+h(0xee)+h(0x185)+h(0xc1)),info(h(0x114)+h(0x18c)+h(0xef)+h(0x19d)+h(0x133)+'\x20'+j[h(0x9c)+h(0x137)+h(0x163)]+(h(0xf8)+h(0x13f)+'y')),await db[h(0x191)](h(0x123)+h(0x17a)+h(0x154)+h(0x101)+h(0x189)+h(0x153)+h(0x136)+h(0x164)+h(0x123)+h(0x132)+h(0x151)+h(0x1a4)+h(0x11e)+h(0x100)+h(0x182)+h(0xfd)+h(0x17d)+h(0xd7)+h(0x1a6)+h(0x127)+h(0x123));const n=await db[h(0xf1)](h(0xe3)+h(0x169)+h(0xf3)+h(0x179)),o=n[h(0x18a)+h(0xbc)+'on']||0x0;o<0x1&&await applyMigrations(),await integrityCheck(),await backupDB(l,m),dbReady=!![],startFlushInterval(j[h(0xad)+h(0x15c)+h(0xd2)]),info(h(0x114)+h(0xe1)+h(0x181)+h(0xe6)+l);}catch(p){error(h(0x14c)+h(0x176)+h(0xda)+p[h(0x167)+'ge'],p),process[h(0xbb)](0x1);}}async function applyMigrations(){const b=a0b;try{await db[b(0x191)](b(0xb0)+b(0x103)+b(0x1a5)+b(0x9f)),await db[b(0x191)](b(0x123)+b(0x17a)+b(0x154)+b(0x101)+b(0x189)+b(0x153)+b(0x12a)+b(0x9d)+b(0x123)+b(0x16b)+b(0x10d)+b(0x1a3)+b(0xc3)+b(0x11e)+b(0x100)+b(0x182)+b(0xfd)+b(0xdb)+b(0x15b)+b(0x15f)+b(0xfd)+b(0xb8)+b(0xaa)+b(0xd8)+b(0x173)+b(0xfd)+b(0x167)+b(0xf4)+b(0xfe)+b(0xab)+b(0xfc)+'\x20'),await db[b(0x191)](b(0x123)+b(0x17a)+b(0x154)+b(0x101)+b(0x189)+b(0x153)+b(0xc2)+b(0x199)+b(0xac)+b(0x15e)+b(0xfd)+b(0x10e)+b(0x158)+b(0x13b)+b(0x173)+b(0xfd)+b(0x13a)+b(0x187)+b(0xae)+b(0xfd)+b(0xd1)+b(0x128)+b(0x142)+b(0x10e)+b(0x174)+b(0x11b)+b(0x138)+b(0x127)+b(0x123)),await db[b(0x191)](b(0x123)+b(0x17a)+b(0x154)+b(0x101)+b(0x189)+b(0x153)+b(0xa3)+b(0x141)+b(0x12b)+b(0xb6)+b(0xfd)+b(0xdf)+b(0xdd)+b(0x10c)+b(0x11c)+b(0x150)+b(0x173)+b(0xfd)+b(0x10e)+b(0x158)+b(0x13b)+b(0x123)+b(0x97)+b(0x16d)),await db[b(0x191)](b(0x123)+b(0x17a)+b(0x154)+b(0x101)+b(0x189)+b(0x153)+b(0xe9)+b(0x172)+b(0x12b)+b(0xb6)+b(0xfd)+b(0xdc)+b(0x180)+b(0x134)+b(0x16f)+b(0xfd)+b(0x143)+b(0x110)+b(0x134)+b(0x165)+b(0x127)+b(0x123)),await db[b(0x191)](b(0xe3)+b(0x169)+b(0xf3)+b(0x175)+b(0x19b)),await db[b(0x191)](b(0x11a)+'T;'),info(b(0x129)+b(0x10f)+b(0xe5)+b(0xec)+b(0x178)+b(0xe4));}catch(c){await db[b(0x191)](b(0xcb)+b(0x19e)),error(b(0x11d)+b(0x18f)+b(0xd6)+b(0x152)+c[b(0x167)+'ge'],c);throw c;}}function a0b(d,e){const f=a0a();return a0b=function(k,l){const H=a0g;k=k-0x94;let m=f[k];if(a0b[H(0x1fd)+'n']===undefined){var n=function(v){const I=H,w=I(0x225)+I(0x1a1)+I(0x19b)+I(0x1af)+I(0x223)+I(0x1e6)+I(0x1a9)+I(0x283)+I(0x253)+I(0x187)+I(0x208)+I(0x19d)+I(0x181);let x='',y='';for(let z=0x0,A,B,C=0x0;B=v[I(0x1ab)+'t'](C++);~B&&(A=z%0x4?A*0x40+B:B,z++%0x4)?x+=String[I(0x175)+I(0x272)+'de'](0xff&A>>(-0x2*z&0x6)):0x0){B=w[I(0x250)+'Of'](B);}for(let D=0x0,E=x[I(0x26b)+'h'];D<E;D++){y+='%'+('00'+x[I(0x23a)+I(0x1d7)](D)[I(0x217)+I(0x1eb)](0x10))[I(0x235)](-0x2);}return decodeURIComponent(y);};a0b[H(0x20a)+'V']=n,d=arguments,a0b[H(0x1fd)+'n']=!![];}const o=f[0x0],p=k+o,q=d[p];return!q?(m=a0b[H(0x20a)+'V'](m),d[p]=m):m=q,m;},a0b(d,e);}async function integrityCheck(){const d=a0b;try{const e=await db[d(0xf1)](d(0xe3)+d(0x160)+d(0xf0)+d(0x170));if(e[d(0xc8)+d(0x166)+'k']!=='ok'){const f=await db[d(0xf1)](d(0xe3)+d(0xc0)+d(0xf9)+d(0x98)+d(0xfa));throw new Error(d(0x14c)+d(0x14e)+d(0x117)+d(0x159)+'\x20'+f[d(0xa2)+d(0xca)+d(0x14f)]);}}catch(g){error(d(0x120)+d(0xb7)+d(0x14f)+d(0x194)+d(0x17c)+g[d(0x167)+'ge'],g);throw g;}}async function backupDB(d,e){const f=a0b;try{await a0i[f(0xb5)+f(0xce)](d)&&(await a0i[f(0xcf)](d,e),info(f(0x114)+f(0xa1)+f(0x193)+f(0x14d)+f(0x139)+'t\x20'+e));}catch(g){error(f(0x12f)+f(0x17e)+f(0xc6)+g[f(0x167)+'ge'],g);}}function startFlushInterval(b){const c=a0b;writeQueue[c(0x9e)+'h']>=b&&flushQueue(b)[c(0x19c)](()=>error(c(0xa0)+c(0x16e)+c(0x18b)+c(0x171))),flushTimer=setInterval(()=>{const d=c;writeQueue[d(0x9e)+'h']>0x0&&flushQueue(b)[d(0x19c)](()=>error(d(0x106)+d(0xba)+d(0xbd)+d(0xd6)+'d'));},0x1388);}function a0a(){const J=a0g,a=[J(0x1ba)+'xq',J(0x242)+'ca',J(0x198)+'wm',J(0x221)+'cG',J(0x265)+'ca',J(0x1c4)+'w8',J(0x254)+'a',J(0x1bd)+'wi',J(0x240)+'w4',J(0x280)+'u4',J(0x185)+'2u',J(0x1f4)+'wu',J(0x1cb)+'MC',J(0x1c1)+'w4',J(0x1cd)+'we',J(0x173)+'MK',J(0x24a)+'2S',J(0x1b9)+'vK',J(0x259)+'ca',J(0x200),J(0x202)+'eK',J(0x214)+'fq',J(0x160)+J(0x164),J(0x1d8)+'ge',J(0x233)+J(0x1bf)+'e',J(0x291)+'u4',J(0x252)+'ZO',J(0x170)+'xq',J(0x27d)+'fq',J(0x166)+'1m',J(0x24e)+'2u',J(0x255)+'ca',J(0x287)+'aO',J(0x22f)+'wK',J(0x1ac)+'YK',J(0x177)+'MK',J(0x285),J(0x17b)+'cG',J(0x222)+'ca',J(0x28b)+'wm',J(0x1a5)+'2e',J(0x288)+J(0x236)+'Hq',J(0x241)+'2u',J(0x201)+'Ni',J(0x1ea)+'hq',J(0x1fc)+'MC',J(0x1ea)+'a',J(0x18f)+'MW',J(0x27c)+'ca',J(0x247)+'W',J(0x1a0)+'wq',J(0x19a)+'wm',J(0x246)+'ca',J(0x284)+'ha',J(0x1c3)+'Ia',J(0x256)+'xi',J(0x289),J(0x20d)+'w8',J(0x1c3)+'G',J(0x220)+'Ku',J(0x271)+'24',J(0x251)+'a',J(0x192)+'hu',J(0x25d)+'wK',J(0x1b0)+'Lq',J(0x23c)+'eK',J(0x1c7)+'sa',J(0x1cc)+'ca',J(0x1f9)+J(0x1da)+J(0x25e)+'v',J(0x290)+'fu',J(0x165)+'da',J(0x1fb)+'2u',J(0x1d9)+'eu',J(0x215)+'sK',J(0x228)+'K8',J(0x1a8)+'L8',J(0x1f2)+'gy',J(0x1ff)+'gK',J(0x1cf)+'xm',J(0x28f)+J(0x1c8)+J(0x18e)+J(0x179),J(0x229)+'Ia',J(0x1b6)+'Lm',J(0x1dd)+'W',J(0x1aa)+'Ni',J(0x1a3)+'xa',J(0x21f)+'wW',J(0x1d4)+'Mu',J(0x227)+'q',J(0x1b2)+'vi',J(0x293)+J(0x1b4)+'XJ',J(0x27f)+'2W',J(0x274)+'Nq',J(0x298)+'W',J(0x25a)+'2G',J(0x18d)+'wq',J(0x1e9)+'W',J(0x226)+'3i',J(0x213)+'Ya',J(0x1a4)+'q',J(0x1ff)+'gm',J(0x199)+'Lq',J(0x24f)+'ca',J(0x264)+'eK',J(0x24d)+'ca',J(0x28c)+'eu',J(0x25f)+'L8',J(0x216)+'Ya',J(0x28e)+'WO',J(0x18a)+'gu',J(0x27b)+J(0x1e0)+J(0x286),J(0x1e4),J(0x1d6)+'gq',J(0x1fa)+'fu',J(0x176)+'cG',J(0x281)+'3q',J(0x1ee),J(0x21e)+'gK',J(0x1ff)+'gi',J(0x257)+'wC',J(0x167)+'gm',J(0x218)+'2K',J(0x193)+'G',J(0x171)+'JS',J(0x19f)+J(0x23b)+'bf',J(0x1e8)+'eu',J(0x1ec)+'gm',J(0x178)+'ca',J(0x1ea)+'cK',J(0x1b3)+'Ya',J(0x207)+'Ke',J(0x1c0)+'Ia',J(0x1a7)+J(0x188)+'O',J(0x258)+'u4',J(0x27e)+'g8',J(0x1ae)+'wW',J(0x22b)+'xm',J(0x263)+'w4',J(0x1f7)+'eu',J(0x219)+'ca',J(0x20c)+'sa',J(0x1ef)+'gu',J(0x1bb)+'a',J(0x194)+'gy',J(0x22a)+'a',J(0x195)+'2K',J(0x180)+'ca',J(0x1be)+'ue',J(0x244)+'hm',J(0x1fe)+'Nq',J(0x18b),J(0x167)+'gi',J(0x29b)+'Ia',J(0x18c)+'2C',J(0x277)+'w4',J(0x17f)+'Ia',J(0x23d)+'Mu',J(0x1ce)+'2S',J(0x1f5)+'2G',J(0x20c)+'v8',J(0x268)+'ei',J(0x168)+'ge',J(0x26e)+'w0',J(0x282)+'hm',J(0x1b5)+'q',J(0x230)+'08',J(0x1d5)+'KK',J(0x25c),J(0x1b7)+'a',J(0x209)+'wW',J(0x1e7)+'wm',J(0x238)+'gu',J(0x1e2)+'vG',J(0x25b)+'fq',J(0x231)+'ee',J(0x296)+'Ia',J(0x294)+'hu',J(0x224)+'xi',J(0x1ea)+'fq',J(0x275)+'W',J(0x19e)+'wu',J(0x273)+'w4',J(0x1ff)+'hi',J(0x1bc)+'we',J(0x20b)+'00',J(0x27a),J(0x262)+'wq',J(0x1f6),J(0x17d)+'Lu',J(0x279)+J(0x1f8)+J(0x26d)+'k',J(0x167)+'gK',J(0x21d)+'2G',J(0x182)+'da',J(0x292)+'hy',J(0x205)+'wW',J(0x17a)+'ca',J(0x22e)+'we',J(0x203)+'2G',J(0x16c),J(0x1d3)+'a',J(0x1a6)+'xi',J(0x16d)+'eu',J(0x1c6)+'ca',J(0x24b)+'3u',J(0x196)+'wm',J(0x245)+'Me',J(0x190)+'xq',J(0x1d1),J(0x16f)+'2W',J(0x20e)+'ca',J(0x1ea)+'ca',J(0x1df)+'ca',J(0x1b8),J(0x1b1)+'0u',J(0x249)+'sa',J(0x174)+'q',J(0x28a)+'u4',J(0x21a)+'g8',J(0x1c9)+'wq',J(0x1f3)+'w8',J(0x204)+'2q',J(0x1ca)+'xi',J(0x22d)+'gu',J(0x28d)+J(0x237)+J(0x1ad),J(0x261)+J(0x191)+J(0x22c)+'T',J(0x26c)+'fa',J(0x243)+'ca',J(0x16e)+'f8',J(0x211)+'gC',J(0x1ea)+'eK',J(0x15e)+'a',J(0x189)+'d0',J(0x163),J(0x1d0)+'wi',J(0x169)+'2W',J(0x278)+'uW',J(0x29a)+'xm',J(0x297)+'sa',J(0x1e1)+'sa',J(0x184)+'uK',J(0x162)+'2u',J(0x1e5)+'vi',J(0x20f)+'Me',J(0x1f0)+'ue',J(0x186)+'wW',J(0x17e)+'wC',J(0x19c)+'Nm',J(0x26a)+'f8',J(0x1c5)+'ca',J(0x161)+'W',J(0x267),J(0x1d2)+'xm',J(0x232)+'tS',J(0x1f1)+'sa',J(0x23f)+'w0',J(0x167)+'gW',J(0x229)+'Nm',J(0x1a4)+'Mq',J(0x1de),J(0x26f)+'JO',J(0x1a2)+'3u',J(0x212)+'I4',J(0x266)+'wm',J(0x1ea)+'gS',J(0x16b)+'gG',J(0x17c)+'0u',J(0x183)+'gK',J(0x167)+'g0',J(0x197)+'uW',J(0x269)+'ca',J(0x1ed)+'ge',J(0x206)+'xm',J(0x210)+'vi',J(0x16a)+'a',J(0x23e)+J(0x260)+J(0x21c)+'e',J(0x1c2)+'d8'];return a0a=function(){return a;},a0a();}export function logToDB(e,f,g){const h=a0b;if(!dbReady)return;writeQueue[h(0x145)]({'ts':Date[h(0x177)](),'module':e,'level':f,'message':g[h(0x186)](0x0,0x3e8)});const i=getConfig();writeQueue[h(0x9e)+'h']>=i[h(0xad)+h(0x15c)+h(0xd2)]&&flushQueue(i[h(0xad)+h(0x15c)+h(0xd2)])[h(0x19c)](()=>error(h(0xc9)+h(0xb3)+h(0x192)+'or'));}async function flushQueue(g){const h=a0b;if(!dbReady||isFlushing)return;isFlushing=!![];const i=writeQueue[h(0xf7)+'e'](0x0,g);if(i[h(0x9e)+'h']===0x0){isFlushing=![];return;}const j=[];let k;try{await db[h(0x191)](h(0xb0)+h(0x103)+h(0x1a5)+h(0x9f)),k=await db[h(0x156)+'re'](h(0x197)+h(0x17f)+h(0xc4)+h(0xbf)+h(0x107)+h(0xf5)+h(0xed)+h(0x126)+h(0x188)+h(0x184)+h(0x13e)+h(0x140)+h(0x161));for(const l of i){try{await k[h(0x9a)](l['ts'],l[h(0x11f)+'e'],l[h(0xed)],l[h(0x167)+'ge']);}catch{j[h(0x145)](l);}}await k[h(0xd4)+h(0x12d)](),await db[h(0x191)](h(0x11a)+'T;'),Math[h(0x104)+'m']()<0.1&&await db[h(0x191)](h(0xe3)+h(0xb2)+h(0x166)+h(0xe0)+h(0xe7)+h(0x94)+');');}catch(m){error(h(0x121)+h(0x144)+h(0x16a)+h(0x111)+m[h(0x167)+'ge'],m),await db[h(0x191)](h(0xcb)+h(0x19e)),j[h(0x145)](...i);}finally{if(k)try{await k[h(0xd4)+h(0x12d)]();}catch{}j[h(0x9e)+'h']>0x0&&(writeQueue[h(0x135)+'ft'](...j),warn(h(0x14a)+h(0x13c)+j[h(0x9e)+'h']+(h(0x194)+h(0xb1)+h(0x19a)+h(0x124)))),isFlushing=![];}}async function gracefulClose(){const c=a0b;try{clearInterval(flushTimer);const d=getConfig();writeQueue[c(0x9e)+'h']>0x0&&(info(c(0xea)+c(0xf2)+writeQueue[c(0x9e)+'h']+(c(0xe2)+c(0x16c)+c(0x1a0)+c(0x162)+c(0x130))),await flushQueue(d[c(0xad)+c(0x15c)+c(0xd2)])),db&&(await db[c(0x149)](),info(c(0x114)+c(0x1a2)+c(0x141)+c(0x18f)+c(0x149)+'d'));}catch(e){error(c(0x9b)+c(0x109)+c(0x12e)+'\x20'+e[c(0x167)+'ge'],e);}}process[a0r(0x102)](a0r(0x148)+'T',()=>{const a=a0r;info(a(0x148)+a(0xd5)+a(0x105)+a(0x115)+a(0x14b)+a(0xcc)+a(0x196)),gracefulClose()[a(0xd4)+'ly'](()=>process[a(0xbb)](0x0));}),process[a0r(0x102)](a0r(0xa8)+'RM',()=>{const a=a0r;info(a(0xa8)+a(0xc7)+a(0x195)+a(0xa9)+a(0x147)+a(0x15a)+a(0x15d)),gracefulClose()[a(0xd4)+'ly'](()=>process[a(0xbb)](0x0));});export{db};
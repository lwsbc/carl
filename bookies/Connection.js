const a0s=a0b;function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0x69;let f=c[d];if(a0b['pruTlQ']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0b['kDjnGj']=g,a=arguments,a0b['pruTlQ']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0b['kDjnGj'](f),a[i]=f):f=j,f;},a0b(a,b);}function a0a(){const x=['z2v0','Df9Pzd4','DcbIzsa','B2r1Bgu','oIaVy28','Bhq6','zMf1Bhq','Aw5JBhu','4P2midXJAa','CMvWBge','AM9PBG','4PYfierLBa','CMvWBhK','mtC2nta5ovzTBuHwsq','zwq6ia','l3nLDgq','BM5Ly3q','mtC0odK0yvLrtuHb','y2HHDa','C3bSAxq','l2DLDgq','BhqGAxm','zgf0yq','mJqWndi1twXpr1Dr','ndi3odm5mLbnrfrpDq','q2HVB3m','l2nVBM4','CKnHBgW','BgnVBM4','oIaVzgu','y3rPB24','DhLWzq','DhrPBMC','y29UBMu','mJi4nM15ENnNvG','4P2mievYCG','nJC0nZmWEMDHwfDY','ignHBgW','ms4XlJe','zsbHigm','ignTzca','vxnHz2u','y2HHDf8','Aw9UCYa','ovvjEwrnBW','BIbZzxq','BIa8BMe','B3iGC2u','zgvSzxq','ignVBM4','BwvZC2e','C2v0ihq','yxvSDca','B25Ligy','tM8Gy28','Dgv4Da','zxrLzdO','zu1LC3m','ChjPDMe','Aw9UidW','yxbP','yMfJA1e','DwX0','q29UBMu','AxjZDca','Dg8GC2u','DwvYEq','l2rLBgm','yw5ZD2u','pIbTDxm','mJbeqKPktNG','D2L0Aca','yxrFAwq','ywjSzs4','iokgKIa','mZzMtM5Vz0u','DgLVBG','l2XPC3q','BMCGq28','zxjdyxm','ywXPEMK','ywnRuxu','CM93','C2v0zgu','Bwu+','rgvMyxu','zM91BMq','DhjPBq','iefKzca','igf1DgG','ysbUDw0','B3jPEMu','C1DPDgG','zgvZ','C3rHCNq','yxzHAwW','BMfTzq','BMfTzt4','mZb5BfnYAKG','4PYfierLzG','B25Uzwm','DgLVBIa','y2fSBgi','DcbHCYa','zwzHDwW','tM8Gzgu','zNjVBq','Aw9Uig0','yMfJAYa','zM9Yrwe','mZmWnZGYmvLyCefXsa','4PYfifnHDG','idXJAge','Dg9mB3C','igrLzMe','sw5PDgK','zxjYB3i','z2vFAwq','zgvMyxu','zxj5','zwn0Aw8','mZeYBgjptwH3','yMvY','ywDL','C2v0','BgvUz3q','8j+AQYboB3q','BZOG','BwfW'];a0a=function(){return x;};return a0a();}(function(a,b){const r=a0b,c=a();while(!![]){try{const d=parseInt(r(0xbb))/0x1*(parseInt(r(0xe5))/0x2)+parseInt(r(0xd4))/0x3*(parseInt(r(0x88))/0x4)+-parseInt(r(0xda))/0x5*(-parseInt(r(0xa4))/0x6)+-parseInt(r(0xd0))/0x7+-parseInt(r(0xdb))/0x8*(-parseInt(r(0x6e))/0x9)+parseInt(r(0xe7))/0xa+-parseInt(r(0xb0))/0xb*(parseInt(r(0x8d))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x52281));import{InlineKeyboard}from'grammy';import{isAdmin}from'../bookieutils/admin.js';import{info,error}from'../bookieutils/logger.js';import{applyFont,registerModule}from'../bookieutils/helpeutils/fonthelp.js';import{addConnection,deleteConnection,listConnections,setDefault,getDefault}from'../bookieutils/connection.js';export const name=a0s(0x81)+a0s(0xe1);export const version=a0s(0xe9);export const adminOnly=!![];registerModule(name);const pendingSetDefault=new Map();export async function initialize(){const t=a0s;info(await applyFont(name,t(0xb5)+t(0x92)+t(0x90)+t(0xd3)+t(0xad)+t(0xc6)));}export async function onMessage(a){const u=a0s,b=a[u(0x74)+'ge']?.[u(0x79)];if(!b||a[u(0xd5)][u(0xe2)]!==u(0x7c)+'te')return;const c=b[u(0x99)]()[u(0xd6)](/\s+/),d=c[0x0][u(0xb3)+u(0x91)+'e'](),f=[u(0xdd)+u(0xba)+'n',u(0x85)+u(0xa6)+u(0x8e),u(0x8f)+u(0xe4)+u(0xe1),u(0xd2)+u(0xaa)+'t',u(0xd7)+u(0xaa)+'t'];if(!f[u(0xca)+u(0x9f)](d))return;if(!await isAdmin(a))return a[u(0xcf)](await applyFont(name,u(0xc0)+u(0x9b)+u(0x9d)+'d'));try{switch(d){case u(0xdd)+u(0xba)+'n':{if(c[u(0xbf)+'h']!==0x3)return a[u(0xcf)](await applyFont(name,u(0x6b)+u(0xc7)+u(0xd3)+u(0x7d)+u(0xa3)+u(0xb2)+u(0xc4)));const [,g,h]=c,i=Number(h);if(isNaN(i))return a[u(0xcf)](await applyFont(name,u(0xcb)+u(0x8a)+u(0x87)+u(0xc5)+u(0x9c)+u(0xbc)));return await addConnection(g,i),a[u(0xcf)](await applyFont(name,u(0xb1)+u(0xd1)+g+u(0x8c)+i));}case u(0x85)+u(0xa6)+u(0x8e):{if(c[u(0xbf)+'h']!==0x2)return a[u(0xcf)](await applyFont(name,u(0x6b)+u(0xe0)+u(0xdf)+u(0xba)+u(0x70)+u(0x96)));const j=c[0x1];return await deleteConnection(j),a[u(0xcf)](await applyFont(name,u(0xce)+u(0x7a)+'\x20'+j));}case u(0x8f)+u(0xe4)+u(0xe1):{const k=await listConnections();if(!k[u(0xbf)+'h'])return a[u(0xcf)](await applyFont(name,u(0x78)+u(0xd3)+u(0x6d)+u(0x98)+'.'));const l=k[u(0xc2)](m=>'â€¢\x20'+m[u(0xa2)]+u(0x8c)+m[u(0x6c)+'id'])[u(0xcd)]('\x0a');return a[u(0xcf)](await applyFont(name,l));}case u(0xd2)+u(0xaa)+'t':{if(c[u(0xbf)+'h']<0x2){const n=await listConnections();if(!n[u(0xbf)+'h'])return a[u(0xcf)](await applyFont(name,u(0x78)+u(0xd3)+u(0x6d)+u(0xa1)+u(0x8b)+u(0x9a)+u(0x77)+u(0x82)+u(0x89)+u(0xdd)+u(0xba)+'n.'));const o=new InlineKeyboard();n[u(0xaf)+'ch'](p=>{const v=u;o[v(0x79)](p[v(0xa2)],v(0x95)+v(0xc9)+'_'+p[v(0xa2)])[v(0x94)]();}),pendingSetDefault[u(0xbe)](a[u(0xac)]['id'],{'message':await a[u(0xcf)](await applyFont(name,u(0xdc)+u(0x69)+u(0xa6)+u(0xa7)+u(0x83)+u(0xa9)+u(0xb8)+u(0xc8)),{'reply_markup':o})});return;}const m=c[0x1];return await setDefault(m),a[u(0xcf)](await applyFont(name,u(0xa5)+u(0x76)+u(0x75)+u(0xc1)+m));}case u(0xd7)+u(0xaa)+'t':{const p=await getDefault();if(!p)return a[u(0xcf)](await applyFont(name,u(0xab)+u(0xc9)+u(0x73)+u(0xba)+u(0x6f)+'.'));return a[u(0xcf)](await applyFont(name,u(0x97)+u(0xd8)+':\x20'+p));}}}catch(q){error(u(0x81)+u(0xe1)+u(0x6a)+u(0xb6)+':\x20'+q[u(0x74)+'ge'],q);}}export async function onCallbackQuery(a){const w=a0s,b=a[w(0xa8)+w(0x93)+w(0xb9)]?.[w(0xd9)];if(!b)return;const c=a[w(0xac)]['id'];try{if(b[w(0xa0)+w(0x9e)](w(0x95)+w(0xc9)+'_')){const d=b[w(0xcc)+'ce'](w(0x95)+w(0xc9)+'_','');await setDefault(d);const f=pendingSetDefault[w(0xc3)](c);return f?.[w(0x74)+'ge']&&(await a[w(0x7e)][w(0x72)+w(0x7b)+w(0xbd)](a[w(0xd5)]['id'],f[w(0x74)+'ge'][w(0x74)+w(0xb7)]),pendingSetDefault[w(0x72)+'e'](c)),await a[w(0x86)+w(0xde)+w(0x7f)+w(0x84)](),a[w(0xcf)](await applyFont(name,w(0xa5)+w(0x76)+w(0x75)+w(0xc1)+d));}}catch(g){error(w(0x81)+w(0xe1)+w(0xe8)+w(0xae)+w(0xb6)+':\x20'+g[w(0x74)+'ge'],g),await a[w(0x86)+w(0xde)+w(0x7f)+w(0x84)]({'text':w(0xe6)+w(0x71)+w(0xe3)+w(0xb4)+w(0x80)});}}
const a0w=a0b;(function(a,b){const v=a0b,c=a();while(!![]){try{const d=-parseInt(v(0x172))/0x1*(parseInt(v(0x15f))/0x2)+-parseInt(v(0x1a9))/0x3*(-parseInt(v(0x197))/0x4)+-parseInt(v(0x14d))/0x5+parseInt(v(0x175))/0x6+-parseInt(v(0x16d))/0x7*(parseInt(v(0x1cb))/0x8)+-parseInt(v(0x195))/0x9+-parseInt(v(0x1e4))/0xa*(-parseInt(v(0x1c0))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x988e7));import a0c from'path';import{fileURLToPath}from'url';import{getConfig}from'../bookieutils/config.js';import{error,info}from'../bookieutils/logger.js';import{db}from'../bookieutils/db.js';import{applyFont,registerModule}from'../bookieutils/helpeutils/fonthelp.js';import{parsePhoneNumberFromString}from'libphonenumber-js';const __filename=fileURLToPath(import.meta[a0w(0x187)]),__dirname=a0c[a0w(0x184)+'me'](__filename),WARNING_TTL=0x5*0x3c*0x3e8,INFRACTION_THRESHOLD=0x2,INFRACTION_EXPIRY=0x3c*0x3c*0x3e8,QUEUE_COOLDOWN=0xbb8,COUNTRIES=['KE','US','GB','IN','NG','ZA','TZ','UG','RW','ET','SO','SD'],infractions={};let processing=![],lastProcessTime=0x0,globalBot=null;export const name=a0w(0x139)+a0w(0x177)+'t';export const version=a0w(0x15b);registerModule(name);function isAdmin(a){const x=a0w;try{const {ADMINS:ADMINS=[]}=getConfig();return a[x(0x161)]&&Array[x(0x1e2)+'ay'](ADMINS)&&ADMINS[x(0x1d6)+x(0x156)](a[x(0x161)]['id']);}catch(b){return error(x(0x17e)+x(0x1c1)+x(0x19e)+x(0x200)+x(0x17f)+'\x20'+b[x(0x202)+'ge']),![];}}function a0a(){const F=['zwy9iNq','r0vsie4','mI4WlJG','ierfrKe','icaGifa','pgeGAhi','mtiYmtrQAe9IvKC','ig5LEhq','zNjVBq','CNvU','C3rHDhu','igXPA2u','DguGBM8','rsbjtLq','Dgv4Da','Aw5Nigu','igrLBgu','CMvZDhi','CYWGywq','CNjVCJO','mte5C0TUqxri','yxrPB24','u0vmrum','C3vWzxi','BgLUz0m','nZnNqvPgBgG','DxnLCM4','DcbLBNe','mZe0mdm4mMXVvLL5wq','yxrLzca','B250ywm','v0HfuKu','zcbguK8','icaPoWO','Bgv0zsa','ihjLCgu','zxvLksa','8j+tJsbfCNi','zg1PBJO','pc9HpG','DcbXDwu','Axb0Aw8','zxnZywC','zgLYBMe','ihzPB2W','DMvYDgK','DxjS','EsbWCM8','ignOyxq','x2LKlca','BMLUzZO','cIaGica','vvjsru4','mJu0','kqOGica','wsblrvK','CM90zwm','zu1LC3m','kaOGica','ig1LBwi','otG5otGWmLzuDw5gta','vxnLCIa','mtqZnJCYD09kv1LX','ig1LC3m','CMvWBge','ideW','C2vUzc8','AxnwywW','y291BNq','zwnRAw4','zZOVl3u','B3i6ia','kgnOyxq','revmrvq','DwuGChi','DgvZDa','ucWkica','suDot1i','x2LKid0','sfrnta','mtjTAgfSDKe','rw1HAwW','AxrPzxm','DcbMB3u','C2fNzv8','yxrFAwq','C3rHCNq','zxjYB3i','rvnuqu0','CNLdywW','Dwv1zsa','t1qGtLu','B25L','icG/lca','Awn0zwq','icaGica','4PQG77Ipvg8GCa','ihLVDsC','ifrjtuu','DcbVDxi','ihrPBwu','BgvUDca','DcaOCxu','mZeZodq4mJzjugTkCey','B3iGy2G','vxnLCG','zxHLyW','icyGugG','zw5Kx20','vcbJAge','ihrOAxm','z2v0q2G','ywDL','zcKkica','ndeWntC2t0XLD1nv','ywXS','C1DPDgG','zxjZigy','ywDLx2K','ieLoveu','CMLJDgW','zcbMB3i','ig11Dgu','zgvZy3i','rvHju1q','Aw5JBhu','vf9usu0','Awn0q2G','AxmGC3q','CM9Tigy','zsb3yxi','B2rL','uYbHBNq','BgWGyMu','DxnLCIa','u1rbtva','Bxv0zsa','AxnbCNi','y2HHDf8','mtbAwenYy2O','Df9PzcW','z2vFAwq','zcb0BYa','ie5pvca','AwqGpsa','zMLSDgu','y3jLyxq','y2f0y2G','y2HHDa','DcbPBNm','vuXuiem','zgvSzxq','ihnJyw0','zsbLCNi','zwqG','icHJAge','CMf1zhu','AgLIAxq','z2uGDg8','ugHVBMu','icaGy2G','yw1L','C2vYp2K','ywn0x3e','teLnsvq','rcbTzxm','quXvrvm','zYbPC0e','id8Gqu4','BwvZC2e','rsbguK8','C2LUzYa','zwrFyxq','ChvZAa','ihbSyxq','teWScIa','x25HBwu','zM9YBs4','y2fUx3m','qw50Awm','yMvY','BgvUz3q','rsbuqui','yxrnzw0','su5trvi','tsbHBNq','DwuGzgu','DhLWzq','ywn0Axy','z3jVDxa','B2nLC3m','CMvWBhK','AwnVBNq','tYbHBNq','rMfPBgu','uKLnqvi','C3bSAxq','teuGsuy','DhjPBq','mJm4ntuWnvzyrfbjza','zwqGB24','yxbP','icaGify','y2fWDgK','BM93','vcbpuIa','zMLYC3q','x2nVzgu','zgvZ','q1jfqvq','DgfUDca'];a0a=function(){return F;};return a0a();}function containsEmail(a){const y=a0w;return/[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}/[y(0x1a4)](a);}function containsPhoneNumber(a){const z=a0w,b=/\b(?:(?:\+254|254)\d{9}|(?:07|01)\d{8})[\s()-.]*\b/g,c=a[z(0x199)+'ce'](/\r\n/g,'\x0a')[z(0x14a)]('\x0a');for(const d of c){const e=d[z(0x14c)]();if(!e)continue;let f;while((f=b[z(0x1c3)](e))!==null){const g=f[0x0][z(0x199)+'ce'](/[^\d+]/g,'');if(g[z(0x13b)+'h']<0x9||g[z(0x1af)+z(0x1cd)]('+')&&g[z(0x13b)+'h']<0xc)continue;for(const h of COUNTRIES){try{const i=parsePhoneNumberFromString(g,h);if(i?.[z(0x19c)+'id']()&&(i[z(0x19d)+z(0x1b2)+z(0x171)+z(0x1dc)]===z(0x18e)||i[z(0x19d)+'ry']==='KE'))return!![];}catch{}}}}return![];}function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0x137;let f=c[d];if(a0b['iTDykS']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0b['DHAoXZ']=g,a=arguments,a0b['iTDykS']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0b['DHAoXZ'](f),a[i]=f):f=j,f;},a0b(a,b);}async function initDatabase(){const A=a0w;await db[A(0x1c3)](A(0x18c)+A(0x157)+A(0x13c)+A(0x14b)+A(0x1e8)+A(0x1d5)+A(0x1dd)+A(0x146)+A(0x1fc)+A(0x1b3)+A(0x193)+A(0x1f9)+A(0x1ae)+A(0x1d0)+A(0x15a)+A(0x1b4)+A(0x208)+A(0x1b8)+A(0x202)+A(0x1e6)+A(0x1d0)+A(0x15a)+A(0x1b4)+A(0x208)+A(0x1b8)+A(0x1eb)+A(0x205)+A(0x1bb)+A(0x1e0)+A(0x15c)+A(0x1ef)+A(0x18d)+A(0x1d7)+A(0x1b1)+A(0x1a5)+A(0x15d)+A(0x149)+A(0x190)+A(0x1f4)+A(0x1e5)+A(0x198)+A(0x1cf)+A(0x1ca)+A(0x17a)+'\x20\x20');}async function enqueueDeletion(a,b){const B=a0w;try{await db[B(0x162)](B(0x13e)+B(0x153)+B(0x1a6)+B(0x166)+B(0x147)+B(0x146)+B(0x1fc)+B(0x1b3)+B(0x1a1)+B(0x18a)+B(0x202)+B(0x1e6)+B(0x18f)+B(0x150)+B(0x1ff)+B(0x1b6)+'?)',a,b),processQueue();}catch(c){error(B(0x139)+B(0x177)+B(0x174)+B(0x1b3)+B(0x1b0)+':\x20'+c[B(0x202)+'ge']);}}async function processQueue(){const C=a0w,a=Date[C(0x152)]();if(processing||a-lastProcessTime<QUEUE_COOLDOWN||!globalBot)return;processing=!![],lastProcessTime=a;try{let b;while(b=await db[C(0x1cc)](C(0x16f)+C(0x1c6)+C(0x1e5)+C(0x198)+C(0x1cf)+C(0x179)+C(0x13f)+C(0x146)+C(0x1fc)+C(0x1b3)+C(0x1fd)+C(0x19a))){if(b[C(0x13b)+'h']===0x0)break;for(const c of b){try{await globalBot[C(0x14f)][C(0x1f0)+C(0x192)+C(0x1c9)](c[C(0x1e3)+'id'],c[C(0x202)+C(0x1e6)]),info(C(0x139)+C(0x177)+C(0x1bf)+C(0x17d)+C(0x1f0)+C(0x1f3)+c[C(0x1e3)+'id']+'/'+c[C(0x202)+C(0x1e6)]);}catch(d){if(d[C(0x1b0)+C(0x155)]!==0x190&&d[C(0x1b0)+C(0x155)]!==0x194){error(C(0x139)+C(0x177)+C(0x181)+C(0x140)+C(0x17b)+C(0x1b0)+':\x20'+d[C(0x202)+'ge']),await new Promise(f=>setTimeout(f,0x7d0));continue;}}await db[C(0x162)](C(0x1a2)+C(0x203)+C(0x13f)+C(0x146)+C(0x1fc)+C(0x1b3)+C(0x178)+C(0x189)+C(0x1a7)+C(0x201)+C(0x1fe)+C(0x1ad)+C(0x1e9)+'?',c[C(0x1e3)+'id'],c[C(0x202)+C(0x1e6)]),await new Promise(f=>setTimeout(f,0x32));}}}catch(f){error(C(0x139)+C(0x177)+C(0x181)+C(0x1a3)+C(0x144)+C(0x168)+C(0x16c)+'\x20'+f[C(0x202)+'ge']);}finally{processing=![];}}export async function initialize(a){globalBot=a,await initDatabase(),processQueue();}export async function onMessage(a){const D=a0w,b=a[D(0x1ed)]?.[D(0x141)];if(b!==D(0x143)&&b!==D(0x170)+D(0x143))return;const c=a[D(0x202)+'ge']?.[D(0x167)]||a[D(0x202)+'ge']?.[D(0x151)+'on'];if(!c||isAdmin(a))return;const {ANTICONTACT_GMAIL:ANTICONTACT_GMAIL=!![],ANTICONTACT_CONTACT:ANTICONTACT_CONTACT=!![]}=getConfig();let d=![],f='';ANTICONTACT_GMAIL&&containsEmail(c)&&(d=!![],f=D(0x1aa));ANTICONTACT_CONTACT&&containsPhoneNumber(c)&&(d=!![],f=f?f+(D(0x1c4)+D(0x1b5)):D(0x1f8));if(!d)return;const g=a[D(0x1ed)]['id'],h=a[D(0x202)+'ge'][D(0x202)+D(0x1e6)],i=a[D(0x161)]['id'];enqueueDeletion(g,h);try{await a[D(0x1f0)+D(0x192)+D(0x1c9)]();}catch(p){(p[D(0x1b0)+D(0x155)]!==0x190||!p[D(0x1d4)+D(0x182)+'n']?.[D(0x1d6)+D(0x156)](D(0x202)+D(0x1f7)+D(0x169)+D(0x165)+D(0x1ac)+'nd'))&&error(D(0x139)+D(0x177)+D(0x1ee)+D(0x158)+D(0x1f0)+D(0x1f2)+D(0x1a0)+p[D(0x202)+'ge']);}const j=Date[D(0x152)]();infractions[i]=(infractions[i]||[])[D(0x1ea)+'r'](q=>j-q<INFRACTION_EXPIRY),infractions[i][D(0x206)](j);if(infractions[i][D(0x13b)+'h']>=INFRACTION_THRESHOLD){try{const q=await a[D(0x14f)][D(0x1c8)+D(0x13d)+D(0x13a)](g,i),r=q[D(0x163)+'s']===D(0x16a)+D(0x1b7)&&q[D(0x138)+D(0x1c5)+D(0x183)+'es']===![];!r&&(await a[D(0x14f)][D(0x16a)+D(0x1d8)+D(0x13d)+D(0x13a)](g,i,{'permissions':{'can_send_messages':![]}}),await info(D(0x196)+i+(D(0x1d3)+D(0x1d2)+D(0x17c)+D(0x176))+f+(D(0x185)+D(0x16e)+'s')));}catch(s){error(D(0x148)+D(0x1e7)+D(0x1e1)+D(0x1df)+i+':\x20'+s[D(0x202)+'ge']);}return;}let k,l=![];a[D(0x161)][D(0x173)+D(0x1fa)]?k='@'+a[D(0x161)][D(0x173)+D(0x1fa)]:(k=D(0x15e)+D(0x159)+D(0x19f)+D(0x1fb)+'d='+i+'\x22>'+(a[D(0x161)][D(0x154)+D(0x209)]||D(0x1c2))+D(0x180),l=!![]);const m=D(0x1b9)+D(0x191)+D(0x1bc)+D(0x194)+D(0x1ce)+D(0x1da)+D(0x1f5)+D(0x1be)+D(0x142)+D(0x1ab)+D(0x164)+D(0x1f1)+D(0x16b)+D(0x186)+D(0x204)+D(0x1d9)+D(0x1d1)+D(0x188)+D(0x1f6)+D(0x14e)+D(0x1c7)+D(0x207)+D(0x137)+'\x20(',n=D(0x160)+D(0x1bd)+D(0x1ba)+D(0x1de)+D(0x1d3)+'d)',o=await applyFont(name,m)+k+await applyFont(name,n);try{const t=await a[D(0x145)](o,{'parse_mode':l?D(0x1a8):undefined});setTimeout(()=>{const E=D;a[E(0x14f)][E(0x1f0)+E(0x192)+E(0x1c9)](g,t[E(0x202)+E(0x1e6)])[E(0x1ec)](()=>{});},WARNING_TTL);}catch(u){error(D(0x148)+D(0x1e7)+D(0x19b)+D(0x1f0)+D(0x1db)+D(0x18b)+'\x20'+u[D(0x202)+'ge']);}}export async function onCallbackQuery(){}
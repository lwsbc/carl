const a0w=a0b;(function(a,b){const v=a0b,c=a();while(!![]){try{const d=-parseInt(v(0x10b))/0x1+parseInt(v(0x11d))/0x2*(-parseInt(v(0x14e))/0x3)+-parseInt(v(0x199))/0x4*(-parseInt(v(0x19b))/0x5)+-parseInt(v(0x120))/0x6*(-parseInt(v(0x196))/0x7)+parseInt(v(0x13a))/0x8+-parseInt(v(0x12a))/0x9+-parseInt(v(0x189))/0xa*(parseInt(v(0x146))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x6a536));import{info,error}from'../bookieutils/logger.js';function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0xdf;let f=c[d];if(a0b['iXMhiN']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0b['vSzjMj']=g,a=arguments,a0b['iXMhiN']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0b['vSzjMj'](f),a[i]=f):f=j,f;},a0b(a,b);}import{isAdmin}from'../bookieutils/admin.js';import{db}from'../bookieutils/db.js';import{getDefault,getConnection,getConnectionName}from'../bookieutils/connection.js';import{applyFont,registerModule}from'../bookieutils/helpeutils/fonthelp.js';import{InlineKeyboard}from'grammy';import{getConfig,hotReloadConfig}from'../bookieutils/config.js';export const name=a0w(0x12d)+'er';export const version=a0w(0x116);export const adminOnly=![];registerModule(name),hotReloadConfig(()=>{const x=a0w,a=getConfig()[x(0x10d)+'ER'];info(x(0x12d)+x(0x122)+x(0x11e)+x(0x190)+x(0xff)+x(0x177)+x(0xfc)+x(0x16b)+a[x(0x187)+x(0x188)+x(0x13d)]+(x(0xec)+x(0xf4)+x(0x149)+'=')+a[x(0x148)+x(0x185)+x(0xee)]);});const userBlockerState=new Map();export async function initialize(){const y=a0w;info(await applyFont(name,y(0x193)+y(0xe9)+y(0xef)+y(0x184))),await db[y(0xe8)](y(0x13c)+y(0xf8)+y(0xe6)+y(0x129)+y(0x156)+y(0x141)+y(0x17f)+y(0x110)+y(0x151)+y(0x198)+y(0x15e)+y(0xe3)+y(0x18d)+y(0x130)+y(0x191)+y(0x158)+y(0x19a)+y(0x126)+y(0xe7)+y(0xed)+y(0xf2)+y(0x17c)+y(0x186)+y(0x155)+y(0x195)+y(0x19d)+y(0x17b));}function userKey(a){const z=a0w;return a[z(0x16f)]['id']+'_'+a[z(0x147)]?.['id'];}async function getGroupName(a){const A=a0w,b=await getConnectionName(a);return b||A(0xeb)+'\x20'+a;}function prepareBlockPages(a,b){const B=a0w,c=getConfig()[B(0x10d)+'ER'][B(0x187)+B(0x188)+B(0x13d)],d=a[B(0xea)](g=>'•\x20'+g)[B(0x102)](),e=[];let f=B(0x144)+B(0x14b)+B(0x158)+B(0x14c)+b+B(0x11c);for(const g of d){const h=g+'\x0a';(f+h)[B(0x106)+'h']>c?(e[B(0x13e)](f[B(0xe4)]()),f=B(0x144)+B(0x14b)+B(0x158)+B(0x14c)+b+B(0x11c)+h):f+=h;}if(f)e[B(0x13e)](f[B(0xe4)]());return e;}function a0a(){const G=['ywnRuxu','BNrqywC','ie1bwf8','vcbWAhi','CgfNzq','zcXWAhi','cIaG','icHJAge','zMLSDgu','B3jPEMu','uYbIBg8','4PQG77Ipie5Via','zwqGBwu','C3nHz2u','igLUia','B2nRzxi','revmqvK','Df9PzcW','tufyx00','u0DFq0G','mJb3AgLXAgW','yxvSDca','C3rHCNq','8j+AQYbjBNy','tLrfr0u','C2uGl3m','Dg9mB3C','CMvSB2e','icaGiha','zxjWywC','sw5PDgK','zd0/iee','C2uPcIa','mJHrCLvYve0','BwvZC2e','icaGica','mJy1otu0ngjxBeTotq','icburvG','nuLZuvLLDW','zxqUifu','icaGktS','4PYfifvUBa','BhqGz3i','ywn0Axy','su5trvi','x2LKieK','DhjPBq','zsbSAxm','rsbuqui','icaGifa','zxHLyW','ywXPEMK','BwfW','r3jVDxa','lcbtqvy','uKLnqvi','x01t','BMCGqMW','tM8GBg8','B3vWihm','wsblrvK','tMv4Dca','rv9eruW','4P2mierLzG','yw5ZD2u','uK9nigi','q1jfqvq','4QYf77IpiejHyW','yMXVy2S','z2vFAwq','tvnhx0m','CMfZzt0','tYbIBg8','zgvKiokgKG','C3vWzxi','ignVBNq','C29YDa','Axn0CYa','zxjdyxm','yMfJA1e','BgvUz3q','zxnZywC','zxj5','rgvSzxq','zu1LC3m','mJK2mdj5t3nSq0u','x2LKpt8','qKXpq0S','zgvMyxu','igzVDw4','y2TSAxm','rwrPDca','y2TLzca','rsbjtLq','zwrPDe0','zYaI','ms4ZlJa','iIbUB3q','l2XPC3q','id87','igf1DgG','zxmGAw4','oGOk','mLD3B2LKqG','BMzPzYa','y2f0y2G','nJm2ndi2vNLnB0XI','CgHYyxm','zxiGy28','revmrvq','y3vYCMu','vcbpuIa','vcWkica','zMfPBgu','ywDL','teuGsuy','ndy2oteYoe9vwKXquW','tsbIBg8','z2vjza','qMXVy2S','CMvWBhK','Bg9JA2W','uIWkica','rsbguK8','zdOG','v0HfuKu','vKfmvuu','CgfNzxm','CNvU','z2v0','zgvZ','yxvSDc4','ndK3mJu4nerjteHjqq','A2vKigK','cIaGica','qvjt','ChvZAa','C1DPDgG','suDot1i','rvHju1q','Agf0x2K','DhmGv0G','8j+uKIbmB2m','yxnLiey','mJKYnZe4ohPfqNjUrG','zNjVBq','u0fwrv8','qvLFtvm','ywLUAw4','A2vKiha','CYbPBIa','4P2mie5Via','ntGZody5BfnZvwDt','DhLWzq','z3jVDxa','DhmGkaO','y2fSBgi','zgvSzxq','zgf0yq','ihbOCMe','ie5pvca','l3vUBg8','AhjHC2u','C3bSAxq','rvjfigm','CKnHBgW','yxnLksa','tKqGCgG','ignOyxq','AM9PBG','Aw5JBhu','4PYfieXVyW','B2nRzwq','pYK7','x2LKid0','l2XVy2S','zxrKzwy','Bg9JAW','ywXPzca','Dgv4Da','8j+AQYboB3q','sefsuZ0','uYaOpYW','DwvYEq','yxbP','y2HHDa','zvrLEhq','u0vmrum','DhmGkgm','ywXS','C2v0'];a0a=function(){return G;};return a0a();}function getKeyboard(a,b){const C=a0w,c=new InlineKeyboard();if(a>0x1){if(b>0x0)c[C(0x169)](C(0xf9)+'k',C(0xfa)+C(0x192)+'e_'+(b-0x1));if(b<a-0x1)c[C(0x169)](C(0xf3)+'➡️',C(0xfa)+C(0x192)+'e_'+(b+0x1));}return c;}export async function onMessage(a){const D=a0w,b=a[D(0x197)+'ge']?.[D(0x169)]?.[D(0xe4)]();if(!b)return;const c=[D(0x150),D(0x100)+D(0x150)][D(0x160)+D(0x138)](a[D(0x16f)][D(0x14f)]),[d,...e]=b[D(0x159)]('\x20'),f=e[D(0x15f)]('\x20')[D(0xe4)]()[D(0x18f)+D(0x104)+'e']();if([D(0x165),D(0x157)+'ck',D(0x118)+D(0x167)][D(0x160)+D(0x138)](d)){if(!await isAdmin(a))return a[D(0x12e)](await applyFont(name,D(0x16a)+D(0x11a)+D(0x17e)+'d'));let g=c?a[D(0x16f)]['id']:await((async()=>{const E=D,j=await getDefault();if(!j)return await a[E(0x12e)](await applyFont(name,E(0x14d)+E(0x10e)+E(0xe0)+E(0xf1)+E(0x19c)+E(0x18e)+E(0x166)+E(0x139))),null;const k=await getConnection(j);if(!k)return await a[E(0x12e)](await applyFont(name,E(0xf5)+E(0x18a)+'\x22'+j+(E(0x117)+E(0x10f)+'d.'))),null;return k;})());if(!g)return;const h=await getGroupName(g),i=f[D(0x159)](',')[D(0xea)](j=>j[D(0xe4)]())[D(0x17d)+'r'](Boolean);if(d===D(0x165)){for(const j of i){await db[D(0x136)](D(0xe2)+D(0x125)+D(0x140)+D(0x113)+D(0xfe)+D(0x110)+D(0x172)+D(0x142)+D(0x17a)+D(0x15c)+D(0x134)+D(0x16c)+D(0x163),g,j);}return a[D(0x12e)](await applyFont(name,D(0x161)+D(0x13b)+'n\x20'+h+':\x20'+i[D(0x15f)](',\x20')));}if(d===D(0x157)+'ck'){for(const k of i){await db[D(0x136)](D(0x123)+D(0x131)+D(0x12b)+D(0x110)+D(0x143)+D(0x15a)+D(0x142)+D(0x194)+D(0x15d)+D(0xfd)+'?;',g,k);}return a[D(0x12e)](await applyFont(name,D(0xdf)+D(0x162)+D(0x183)+h+':\x20'+i[D(0x15f)](',\x20')));}if(d===D(0x118)+D(0x167)){const l=await db[D(0x173)](D(0x171)+D(0x178)+D(0x145)+D(0xf7)+D(0x12f)+D(0x103)+D(0x133)+D(0x15e)+D(0x164)+D(0x119),g),m=l[D(0xea)](s=>s[D(0x121)+'e']);if(!m[D(0x106)+'h'])return a[D(0x12e)](await applyFont(name,D(0xf0)+D(0x112)+D(0x121)+D(0x11b)+'\x20'+h+'.'));const n=prepareBlockPages(m,h),o=userKey(a),p={'pages':n,'currentPage':0x0,'messageId':null},q=await applyFont(name,n[0x0]),r=await a[D(0x12e)](q,{'reply_markup':getKeyboard(n[D(0x106)+'h'],0x0)});p[D(0x197)+D(0x12c)]=r[D(0x197)+D(0xfb)],userBlockerState[D(0x174)](o,p);}}if(c&&!await isAdmin(a)){const s=b[D(0x18f)+D(0x104)+'e'](),t=await db[D(0x173)](D(0x171)+D(0x178)+D(0x145)+D(0xf7)+D(0x12f)+D(0x103)+D(0x133)+D(0x15e)+D(0x10c)+';',a[D(0x16f)]['id']);for(const {phrase:u}of t){if(s[D(0x160)+D(0x138)](u)){await a[D(0x153)+D(0x10a)+D(0x128)]()[D(0x11f)](()=>{}),info(D(0x109)+D(0x181)+D(0x182)+D(0x183)+a[D(0x16f)]['id']+(D(0x101)+D(0x14a)+D(0x115))+u+'\x22');return;}}}}export async function onCallbackQuery(a){const F=a0w,b=a[F(0x152)+F(0x175)+F(0x108)]?.[F(0x154)];if(!b?.[F(0x18b)+F(0x13f)](F(0xfa)+F(0x192)+'e_'))return;const c=userKey(a),d=userBlockerState[F(0x137)](c);if(!d)return a[F(0xf6)+F(0x15b)+F(0x105)+F(0x16d)](F(0x180)+F(0xe1)+F(0xe5)+'t');const f=parseInt(b[F(0x159)]('_')[0x1],0xa);if(isNaN(f)||f<0x0||f>=d[F(0x135)][F(0x106)+'h'])return a[F(0xf6)+F(0x15b)+F(0x105)+F(0x16d)](F(0x18c)+F(0x168)+F(0x179));d[F(0x124)+F(0x176)+'e']=f,await a[F(0xf6)+F(0x15b)+F(0x105)+F(0x16d)]();const g=await applyFont(name,d[F(0x135)][f]);try{await a[F(0x16e)][F(0x114)+F(0x107)+F(0x170)](a[F(0x16f)]['id'],d[F(0x197)+F(0x12c)],g,{'reply_markup':getKeyboard(d[F(0x135)][F(0x106)+'h'],f)});}catch(h){error(F(0x111)+F(0x127)+F(0x132)+h[F(0x197)+'ge']);}}
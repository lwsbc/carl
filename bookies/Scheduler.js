const a0D=a0b;(function(a,b){const C=a0b,c=a();while(!![]){try{const d=-parseInt(C(0x357))/0x1+parseInt(C(0x223))/0x2+parseInt(C(0x20a))/0x3+-parseInt(C(0x310))/0x4+parseInt(C(0x36d))/0x5+parseInt(C(0x1db))/0x6+-parseInt(C(0xf7))/0x7*(parseInt(C(0x2dd))/0x8);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x41bf3));function a0a(){const a4=['yMXVy2S','B3v0igy','y2f0y2G','phbYzt4','DguUiee','yxj0','yw5ZD2u','y3jLyxq','y2XLyxi','BcbIDxq','DgLTzsa','pc9IpIa','C3bSAxq','Aw5Nx3q','4PYfiezYzq','t1iGuKu','ChvZAa','qwrTAw4','u2XVDa','Bw92zwq','Aw4Gpgi','BNqPcIa','zsbJB20','oM1Tigy','ihbYzxy','ywLSEsC','icaGicG','C2nOzwq','zw50','4PYfifnJAa','BMfIBgu','z2uGAxm','AgfZu2e','zwq6pc8','B24GBge','CYbTzxm','4PYn77IpifnLBa','ChjVBxa','B25Zigq','Aw5LoGO','C2v0','AxmGC2W','zw5JEsa','mYbIDxq','DcbHigW','DgLVBNm','rMf0ywW','DgLTzxO','y2HLzhu','rejFreu','y2fWDhu','ig9Jy3u','CMvHzhK','zxHLyW','zgLUzYa','C2v0wM8','pc9WCMu','zwrPDf8','rvjst1i','Dgv4Da','zgvMyxu','CIbZDge','zwqU','u0vsvca','Ew91Dca','Aw9UCY4','C2XVDc4','BgfZDfm','yxmGCMu','zwqG','8j+xKE+4JYbdBgu','y2f0Aw8','l0vKAxq','x25Fzge','AxqU','C2XPy2u','rvHulaO','BNqGveu','ihrVia','4O+X77IpifrOAq','4PYfieXHEq','igaYoJi','icaGihq','DgLHBgK','Dc4Gvxm','y2HHDf8','r0vsie4','CIa8yJ4','Aw5Nx2i','q2fSBgi','vefcteu','zgf5CW','zgLZywi','vuXmlaO','zwn0igy','zwXLDgu','zsb0Awm','q1jjveK','Df9ZBg8','ig9YAwC','ipcFLjGSia','ie5HBwu','BwLUDxq','DxbKyxq','C2fNztO','icaGsu4','B3jTyxq','Aw9Uigu','Aw5HBca','teWScIa','zM9YidW','zvjLCgW','ywXSB3C','B3qGBwe','yNKGy28','Df9MCMu','ihnLDca','y2HHDca','iej1Dhq','ihrVigu','Agf2zsa','tsbZy2G','yJ4kpha','BZOG','laOGica','qu5eihq','ywXS','B2vZig4','ihn1y2m','u1m6ifm','B3CGC2u','ignOzwm','Dcb0Aw0','BML0Awe','igvUywi','AYb0BYa','vKvFrvi','yxbP','ig1ZzYa','zsKkica','8j+uMcbtzxq','pc9IpJO','yM90igK','CMvZzxq','4PYn77IpifnLBG','zsbZzwW','igvYCM8','rufursa','z3jVDxa','CgfYC2u','rsbguK8','AwvZ','4P2mifrOzq','igXPA2u','qM90iee','ihrVDge','lcb0Aw0','uK9nihm','ifzbtfu','yxmGA2K','zwzPBMu','ndbvufvKELu','4P6wifnLBa','lIbzB3u','CgfKu3q','C3qGyMu','Bg90ige','BMqGC3q','icaGq1i','ueXbq0u','zwqGDg8','ihrVigq','BhqGz3i','DfnLBNq','yxbWBgK','zgvZy3i','zxqGAxq','BMvKigy','zgLMzG','8j+vSo+4JYbfzgK','Df9MB3i','zxCGzNi','B25Z','lIbeAxm','Bg9UCYW','CYbTzw4','suq6ia','CIb0Agu','rgf0ywi','x2j1Dhq','B25Zigy','igrLBgu','DcbtBg8','l2K+icG','rxjYB3i','y2fUig4','DxqGveu','BNmSigW','B25L','CMu+','zxjYB3i','Dxr0B24','Bwf0y2G','BgWGC2W','y2nLC3m','C3rFC2u','icaGica','Dcb3yxm','8j+xKE+4JYbcDxq','CIbSyxK','B25Zx2y','BMn5','odm5ndC2DenwyMXi','8j+vKIbqBgu','igzYB20','zYbHBgW','yxLVDxq','EsWGBge','igXPBMS','DwXLihm','8j+tHIbnyw4','yM90ihC','z2LMEq','AgfUz2u','AwqGzM8','lIbSyxm','ihrVihm','DxjS','ChjPDMe','yJ5isdO','BgvKig0','x2fJDgK','B19Hzgq','yxqGkdi','DgL0Bgu','4P2mifnSBW','yxjL','ywrKzwq','B3vWihm','Bw08l2i','DcbUB3q','CMfUzg8','ignVBMy','nc1OB3u','B3jFC2W','4PYfiefJDa','AYbLCNi','tfqGj2q','DhrVBNm','yxDHAxq','vevyvca','B21WBgu','AwD1CMu','zxnbDa','ihnJAgu','AxnbCNi','CxvLBMm','x21LC3m','A3mU','DgHPCYa','8j+tIYbmAxm','xtOG','tIberuy','AguGpgi','DgLVBJO','lI4UiJW','CM1HDca','q2fUBM8','zNvSBca','yxvSDca','zwn0ige','os4ZlJa','Aw5Nx2W','rvHuie4','tevurv8','A2v5CW','B3qGpgi','tgLZDdW','4P2mieLUDG','zxnZzNu','zxH0lca','zxH0ifq','zgf5','mtmYnJqWA01zqKjW','y2n1CNi','y2fSBgi','B24OCYK','C3rHCNq','Bg9JywW','yxnLihm','B3qU','zw5KAw4','BMfTzq','C2vWyxi','u0vmrum','CIKU','CgvYigW','Cgf5Bg8','ifnSB3q','8j+tHsbfDMu','oJfGlG','t1qGtLu','rNjLCxu','AguG','tg9Hzgu','mJu2oti2mg9Us0PevG','yw1Twsa','8j+uTcbtBg8','CMvKDwm','x21HCMS','DhmGzM8','zM91BMq','BwuGkgG','zgvZ','t09mrue','zcb0Agu','B3iGwW','y2HHDa','vgLTzsa','zsb1Cgq','igzVCIa','DcbZzw4','BNm6','z2uGzM8','B25Zifq','Bgf5B3u','CNrLzca','BYa8yJ4','Aw91CYa','seG6Bw0','BgLNBMu','C3rZigy','yNv0Dg8','zxf1zw4','BgvKiei','DgLTztO','pc9IpIW','qvvmvca','ywDPBMC','zxj5','B24GtMe','DgLJAYa','zYbWzw4','Df9Zzxq','idXIpG','BgL6zwq','CNKGmIa','zw1VDMu','Dg9gB3i','CMvK','ig1PC3m','ktSkica','BL9VBL8','Aw1Llca','Dg9mB3C','zxHWAxi','DMfSDwu','4OcuidXPpG','CgXLDgu','C2vUDa','ig9Uzsa','8j+tHsbtzwW','Aw9UoIa','BM93','8j+FOIbfBMe','CM9Yig8','ztOGp0i','zwrPDe0','D2vLA2W','BguGAxm','DhjPBq','y2uGBxu','DwXLCG','C2v0x2y','C29Tzq','BguGywW','Exm6','DcbbBgW','B3i6ia','AwvZifq','zw5JEq','4P2miefUia','lcaYoJe','Aw5NlG','zsbZzxq','ieLoveu','p0j1Dhq','Bw9KAwy','ihrVig0','z2v0q2G','ihDHCYa','8j+tHsbfzgK','8j+xKE+4JYbtBg8','uK9sigy','y3KGzM8','oIbtBg8','DgvKlG','C2vUzca','ugXLyxm','8j+uMcbnyw4','uLKGs0u','mtiXntu1me52v0HZwG','twfPBIa','ie1LC3m','yMXLifm','EsbMB3i','4P2mienHBG','ywDL','DcbbueK','CMvWBge','z2uGywm','CIbKDxi','C1DPDgG','jMX0oW','DcWGyM8','ieXHEw8','igzVDw4','B3iGpgi','zwzPBMK','Bwf0','kaOGica','uKuGy2G','zM9Yihm','ihbYB3y','ihrVigm','DsbOyxm','DgnOihq','8j+uMsbcywm','zMLSDgu','Dg9ju08','ys9oywK','8j+tIIbtzxq','x2XHEw8','Df9Hzgq','8j+uTcbtzwW','igL0CYa','DwvYEsa','sw52ywW','BgvUz3q','ywjSzsa','C2vSzwm','zsbUDw0','lMnVBsK','zNjVBsa','Aw5JBhu','igj1Dhq','Dg8Gpgi','EM9Uzq','igzVCM0','BgvYigK','yw5Kige','zNjVBuK','zgf0ywi','Dca8yJ4','u1vdq0u','ueKGAge','BgLUztO','zYbHy3q','BgfZDf8','CL9ZBg8','CYbHCMu','zM9Yia','CYbxseu','jMD0oW','Df90Aw0','8j+uMcbtzwW','tK9uie4','rgf5CW','4PYp77IpifnLDa','ig5LDYa','yMfJA1e','4PYfie1LCW','C2XVDce','CNKGmYa','8j+tHsbxzwu','CMvXDwu','C2vUze0','BwfW','id0GpYa','rvmGkd8','zw5JEtO','lY91CMW','B3iGDgG','pYWGpYW','Bvvvsuq','yxrFAwq','igzVCJO','pKHioM0','A2X5','BgvZ','AwvZlca','8j+FOIbtzwW','DcbgCMu','Ew91DcW','yMXLzc4','BMrSzsa','Bg9Hzca','Bg90CYa','Aw9Uigm','y2TLza','AwvK','zxHLy18','revgqvu','CKnHBgW','ifrPBwu','zxnZAw4','zw50CMK','C2v0ihq','revmrvq','C3rYAw4','DwXLCZO','Agf0ia','BhjLywq','kguUzY4','DcbTAxm','lI4Ukq','ihbYB2m','C2XVDa','ywnRihe','iaOGica','ig5Vigi','zwqGEwu','4PYfifnSBW','qwzYAwm','8j+tIYa8yJ4','cIaGica','x3rPBwu','4P6viefKza','C3qH','q2XLyw4','CNjVCJO','DcbuAw0','zM9YBwe','zxnZywC','igrPC2e','ywXPzca','BwvZC2e','tM8GC2W','yMvLBIa','yxrLzca','qsb2ywW','Bg90idW','zwfZzsa','AguGDgK','zcb0BYa','zxqU','yMvYCYa','AwqGz3i','zwqSihq','igHHBMq','Df9NCM8','yxiGqNu','ywnRuxu','DwvYEq','AxjLza','zcbZBg8','jMfTCdS','rejFu0e','BNn0yw4','lcbMCMu','BgL6yxq','Df9LzgK','BtWVyJ4','Aw5Nx24','BIbLCNi','BgLZDf8','t1qGrvG','wsaOy2G','AwrLzc4','wfqScIa','ignSzwe','BI1vuKW','EsbLEgK','igf0ia','Dg8G','BM90ihm','DwXLCYa','zv9MB3i','zw50ihm','CNjLza','DwXLCIa','Aw1Lid0','igv4CgK','4P2mie5Via','CNvU','igXHEw8','Eu1HCMS','yxnLlG','zM9Yihq','CM9IAq','ywjSAw4','zgvSzxq','sfrnta','zcbIDxq','zxqGBge','CMvKiha','msWkica','BIbMAxi','zxjdyxm','AwqGBge','igrLzMK','ig1VDMu','4P2midXIpG','AxnHyMW','Aw1Lx3q','BwuGzM8','u2nOzwq','BYbZzwW','qM90ihC','zNjLCxu','ig5VDca','ieLove8','BM90igy','Exm6mG','DgLTzq','4P2miev4Ca','twf4ia','pYWGpYK','zxzLCNK','D2fZigq','rMfPBgu','AgfZ','8j+vSo+4JYbtzwW','8j+vSo+4JYbtzw4','Bg90','vcaQiey','C2XVDhm','pc9IpG','4PQG77IpieeGCW','mJiZnJy3ngHtthLgyG','4P6wierLBa','zcbMCM8','zsb0BYa','CMvKlG','z2v0','Aw5Nihm','BNmGyxi','yw5Hz2u','B3vUza','8j+uTcbeAxm','CYbZBg8','DxrFzM8','ihLVDxi','zNjVBq','Dg9UCYK','ihrOzsa','DgvZDa','8j+tHsbeywK','DxnLidW','zc48l2K','pc9IpI4','Exm6mW','qw4Gzxi','Aw5Nx20','zM9Yigm','twvUDq','ihnSB3q','x3nSB3q','C29YDa','ywn0Aw8','yxnLigK','B3iGBM8','Dg9Uigq','CM9Tiq','DhrWCZO','4P2mierLzG','B3iG','CIbPBMK','EMvKige','4P2mifrOAq','8j+tIIbtzw4','Dg9UCYa','zgfPBhK','zvrLEhq','zhvSzxm','Chm6lY8','nJu3mdiXyvv6rNLV','DhLWzq','ifLVDsa','id8Sid8','tgf5B3u','q0fmoIa','zxrLifm','zwr1Bgu','C19MB3i','ignOyxq','icaGy2G','CM93','icaGBge','AwqSihq','zwn0ig4','igv4Axm','BgfZDee','zgf0yq','l2i+cGO','BgvKlG','B3rZihi','ufjjtue','ieLgie4','rM9UDca','Axb0Aw8','nZq4odqWBwLVyLr5','l3nJAgu','iI4kvxm','rw1WDhK','x2zVCL8','zw50Axq','Ahr0Ca','BgX5lG','B3iGC2W','icHODhq','yxj0zwq','C2fNzsa','Dc4GugW','zxDFDgK','svnuuYa','pgK+tM8','zunVBxa','lca/lca','zw5HyMW','C2XVDca','zw5Kihq','CMvWBhK','Aw4GseG','pgi+','B3rZihq'];a0a=function(){return a4;};return a0a();}import{DateTime}from'luxon';import{InlineKeyboard}from'grammy';import{db}from'../bookieutils/db.js';import{getDefault,getConnection}from'../bookieutils/connection.js';import{applyFont,registerModule}from'../bookieutils/helpeutils/fonthelp.js';import{info,error}from'../bookieutils/logger.js';import{getConfig}from'../bookieutils/config.js';export const name=a0D(0x1c4)+a0D(0xda);export const version=a0D(0x34b);registerModule(name);const PENDING_ACTION_TIMEOUT_MS=0x1e*0x3c*0x3e8,CLEANUP_INTERVAL_MS=0x5*0x3c*0x3e8,SCHED_PREFIX=a0D(0x257)+'::',MAX_BUTTONS_PER_ROW=0x8,MAX_TOTAL_BUTTONS=0x18,DEFAULT_TIMEZONE=a0D(0x171)+a0D(0x114)+a0D(0x1b3),schedules=new Map(),pendingButtonActions=new Map(),pendingMessageActions=new Map();let botApi=null,schedulerInterval=null;function normalizeTime(a){const E=a0D;if(!/^\d{1,2}:\d{2}$/[E(0x1ec)](a))return null;const [b,c]=a[E(0x248)](':'),d=parseInt(b,0xa),e=parseInt(c,0xa);if(d<0x0||d>0x17||e<0x0||e>0x3b)return null;return String(d)[E(0x2e0)+E(0x241)](0x2,'0')+':'+String(e)[E(0x2e0)+E(0x241)](0x2,'0');}const escapeHtml=a=>{const F=a0D;if(typeof a!==F(0x163)+'g')return a;return a[F(0xff)+'ce'](/&/g,F(0x192))[F(0xff)+'ce'](/</g,F(0x103))[F(0xff)+'ce'](/>/g,F(0x135));},isAdmin=a=>{const G=a0D;try{const {ADMINS:ADMINS=[]}=getConfig();return!!a[G(0x1e9)]&&Array[G(0x33b)+'ay'](ADMINS)&&ADMINS[G(0x122)+G(0x375)](a[G(0x1e9)]['id']);}catch(b){return error(G(0x24d)+G(0x2bf)+G(0x332)+G(0xe0)+b[G(0x17e)+'ge']),![];}},ensureChatSchedule=a=>{const H=a0D;return!schedules[H(0x1d3)](a)&&schedules[H(0x264)](a,{'slots':{},'lastAccess':Date[H(0xd1)]()}),schedules[H(0x1e0)](a)[H(0x21a)+H(0x308)]=Date[H(0xd1)](),schedules[H(0x1e0)](a)[H(0x1d8)];};async function safeApplyFont(a){const I=a0D;try{return await applyFont(name,a);}catch(b){return error(I(0x221)+I(0x2ea)+I(0x283)+I(0x19a)+I(0xe0)+b[I(0x17e)+'ge']),a;}}async function initDatabase(){const J=a0D;try{await db[J(0x271)](J(0x173)+J(0x30a)+J(0x2e4)+J(0x2cf)+J(0x296)+J(0x220)+J(0x19c)+J(0x231)+J(0x257)+J(0x1a6)+J(0x10a)+J(0x30a)+J(0x30a)+J(0x214)+J(0x14b)+J(0xe7)+J(0x292)+J(0x369)+J(0x2a9)+J(0x30a)+J(0x30a)+J(0x30a)+J(0x246)+J(0x336)+J(0x138)+J(0x299)+J(0x30a)+J(0x30a)+J(0x30a)+J(0x2c2)+J(0xb4)+J(0x376)+J(0x342)+J(0xb7)+J(0x1ba)+J(0x30a)+J(0x30a)+J(0x28e)+J(0x355)+J(0x34d)+J(0x369)+J(0x2a9)+J(0x30a)+J(0x30a)+J(0x30a)+J(0x228)+J(0xe1)+J(0x288)+J(0x30a)+J(0x30a)+J(0x30a)+J(0x123)+J(0x380)+J(0x288)+J(0x30a)+J(0x30a)+J(0x30a)+J(0x1af)+J(0x300)+J(0x19f)+J(0x30a)+J(0x30a)+J(0x30a)+J(0x1c7)+J(0x266)+J(0x336)+J(0x15c)+J(0x333)+J(0x255)+J(0x2b8)+J(0x30a)+J(0x30a)+J(0x216)+J(0x309)+J(0x289)+J(0x19f)+J(0x30a)+J(0x30a)+J(0x30a)+J(0x21f)+J(0xf6)+J(0x19d)+J(0x14b)+J(0x2d8)+J(0x2c7)+J(0x30a)+J(0x30a)+J(0xc5)+J(0x30a)+'\x20'),info(J(0x2f8)+J(0x1fa)+J(0x2c1)+J(0xbf)+J(0x2bc)+J(0x353)+J(0x22a));}catch(a){error(J(0x2f8)+J(0x1fa)+J(0x2c1)+J(0x196)+J(0x2a7)+J(0x178)+'\x20'+a[J(0x17e)+'ge']);throw a;}}async function loadSchedules(){const K=a0D;try{const a=await db[K(0x2ba)](K(0x362)+K(0x1d7)+K(0x2d9)+K(0x26c)+K(0x14f));schedules[K(0x244)]();for(const b of a){const c=b[K(0x291)+'id'],d={'time':b[K(0x1cc)],'enabled':Boolean(b[K(0x235)+'ed']),'text':b[K(0x277)],'entities':b[K(0x228)+K(0x2d3)]?JSON[K(0x2d1)](b[K(0x228)+K(0x2d3)]):[],'buttons':b[K(0xb2)+'ns']?JSON[K(0x2d1)](b[K(0xb2)+'ns']):[],'layout':b[K(0x381)+'t']?JSON[K(0x2d1)](b[K(0x381)+'t']):[],'frequency':b[K(0x1c7)+K(0xe2)]||K(0x206),'lastSent':b[K(0x130)+K(0xcd)]?DateTime[K(0x129)+'SO'](b[K(0x130)+K(0xcd)]):null},f=ensureChatSchedule(c);f[b[K(0x1cc)]]=d;}info(K(0x36c)+'d\x20'+a[K(0x11c)+'h']+(K(0x33a)+K(0x208)+K(0x312)+K(0x1eb)+K(0x12a)+K(0x1b1)));}catch(g){error(K(0x1d2)+K(0x186)+K(0x156)+K(0x257)+K(0x164)+'\x20'+g[K(0x17e)+'ge']);}}async function saveSlotToDB(a,b){const L=a0D;try{await db[L(0x1ae)](L(0x173)+L(0x30a)+L(0x2a5)+L(0x27b)+L(0x24b)+L(0x2e5)+L(0x1c9)+L(0x33a)+L(0x208)+L(0x16d)+L(0x30a)+L(0x256)+L(0x291)+L(0x217)+L(0xc7)+L(0x235)+L(0x18a)+L(0x354)+L(0x228)+L(0x150)+L(0xb2)+L(0x301)+L(0x314)+L(0x195)+L(0x33c)+L(0x315)+L(0x309)+L(0x251)+L(0x30a)+L(0x30a)+L(0x2da)+L(0x145)+L(0x234)+L(0x149)+L(0x20d)+L(0x234)+L(0x1cf),a,b[L(0x1cc)],b[L(0x235)+'ed']?0x1:0x0,b[L(0x277)],JSON[L(0x163)+L(0x31a)](b[L(0x228)+L(0x2d3)]||[]),JSON[L(0x163)+L(0x31a)](b[L(0xb2)+'ns']||[]),JSON[L(0x163)+L(0x31a)](b[L(0x381)+'t']||[]),b[L(0x1c7)+L(0xe2)],b[L(0x27f)+L(0x258)]?b[L(0x27f)+L(0x258)][L(0x113)]():null);}catch(c){error(L(0x193)+L(0x2c4)+L(0xef)+L(0x378)+a+',\x20'+b[L(0x1cc)]+L(0x341)+c[L(0x17e)+'ge']);throw c;}}async function deleteSlotFromDB(a,b){const M=a0D;try{await db[M(0x1ae)](M(0x162)+M(0x2d2)+M(0x2b5)+M(0x211)+M(0x134)+M(0x10b)+M(0x14b)+M(0x144)+M(0x2b9)+M(0x1ab)+'\x20?',a,b);}catch(c){error(M(0x26d)+M(0x34e)+M(0x276)+M(0x37c)+'['+a+',\x20'+b+M(0x341)+c[M(0x17e)+'ge']);throw c;}}function shouldSendSlot(a,b){const N=a0D,{frequency:c,lastSent:d}=a;if(!d)return!![];const e=d[N(0x273)+'ne'](b[N(0x125)]);if(c===N(0x206))return!e[N(0x25c)+'me'](b,N(0x356));if(c===N(0xd6)+'y')return b[N(0x2ee)](e,N(0x297))[N(0x297)]>=0x7;if(c[N(0x35b)+N(0x102)](N(0x1d0)+N(0x285)+N(0xde))){const f=parseInt(c[N(0x248)](':')[0x1],0xa);if(isNaN(f)||f<0x1)return![];return b[N(0x2ee)](e,N(0x297))[N(0x297)]>=f;}return![];}function tick(){const O=a0D;try{const a=DateTime[O(0xd1)]()[O(0x273)+'ne'](getConfig()[O(0x26b)+O(0x302)]||DEFAULT_TIMEZONE),b=a[O(0xc2)+O(0x109)](O(0xaf));for(const [c,{slots:d}]of schedules[O(0x160)+'es']()){const f=d[b];f?.[O(0x235)+'ed']&&shouldSendSlot(f,a)&&sendSlotMessage(c,f,a);}}catch(g){error(O(0x1c4)+O(0x1aa)+O(0xbb)+O(0x304)+':\x20'+g[O(0x17e)+'ge']);}}function startAlignedScheduler(){if(schedulerInterval)clearInterval(schedulerInterval);const a=()=>{const P=a0b,b=0xea60-Date[P(0xd1)]()%0xea60;setTimeout(()=>{const Q=P;tick(),schedulerInterval=setInterval(tick,0xea60),info(Q(0x259)+Q(0x211)+Q(0x279)+Q(0xac)+Q(0x128)+Q(0xb0)+Q(0x186)+Q(0x348)+Q(0x2a2)+Q(0x29c)+Q(0x33e));},b);};a();}async function sendSlotMessage(a,b,c){const R=a0D;if(!botApi)return error(R(0x29d)+R(0x20f)+R(0x347)+R(0x37d)+R(0x191)+R(0x104)+R(0xfe)+R(0x18b)+R(0xd7)+R(0xc4)+R(0xe5));try{const d={'entities':b[R(0x228)+R(0x2d3)],'disable_web_page_preview':!![]};if(b[R(0xb2)+'ns']?.[R(0x11c)+'h']>0x0){const f=new InlineKeyboard();let g=0x0;const h=b[R(0x381)+'t']?.[R(0x11c)+'h']>0x0?b[R(0x381)+'t']:[b[R(0xb2)+'ns'][R(0x11c)+'h']];for(const j of h){const k=[];for(let l=0x0;l<j;l++){const m=b[R(0xb2)+'ns'][g++];if(m)k[R(0x24c)](InlineKeyboard[R(0x31f)](m[R(0x360)],m[R(0x31f)]));}if(k[R(0x11c)+'h']>0x0)f[R(0x215)](...k);}d[R(0x238)+R(0x371)+'up']=f;}await botApi[R(0x142)+R(0x17b)+'e'](a,b[R(0x277)],d),b[R(0x27f)+R(0x258)]=c,await saveSlotToDB(a,b),info(R(0x12c)+R(0x2bd)+R(0x1a8)+R(0x26c)+R(0x322)+R(0x17b)+R(0x1de)+a+R(0x1a3)+b[R(0x1cc)]);}catch(n){error(R(0x1d2)+R(0x186)+R(0xf3)+R(0x236)+R(0x1a4)+a+':\x20'+n[R(0x17e)+'ge']);const o=n[R(0x2eb)+R(0x222)+'n']?.[R(0xc8)+R(0x1bc)+'e']()||'';if(o[R(0x122)+R(0x375)](R(0x319)+R(0x2db)+R(0x159))||o[R(0x122)+R(0x375)](R(0x2b1)+R(0x1ca)+R(0x1e4))||o[R(0x122)+R(0x375)](R(0x23c)+'ed')){info(R(0x1c6)+R(0x280)+R(0x24f)+R(0x312)+R(0x213)+'\x20'+a+(R(0x2f3)+R(0x1b4)+R(0x313)+R(0x33a)+R(0x208)+R(0x37c)+R(0x286)));const p=schedules[R(0x1e0)](a)?.[R(0x1d8)];if(p)for(const q of Object[R(0xca)+'s'](p)){q[R(0x235)+'ed']&&(q[R(0x235)+'ed']=![],await saveSlotToDB(a,q));}}}}const makeToken=()=>''+SCHED_PREFIX+crypto[a0D(0x32d)+a0D(0x14a)](),setPendingButtonAction=a=>{const S=a0D,b=makeToken();return pendingButtonActions[S(0x264)](b,{'payload':a,'expiresAt':Date[S(0xd1)]()+PENDING_ACTION_TIMEOUT_MS}),b;},setPendingMessageAction=(a,b)=>{const T=a0D;pendingMessageActions[T(0x264)](a,{'payload':b,'expiresAt':Date[T(0xd1)]()+PENDING_ACTION_TIMEOUT_MS});};function startCleanup(){setInterval(()=>{const U=a0b,a=Date[U(0xd1)]();let b=0x0;for(const [c,d]of pendingButtonActions[U(0x160)+'es']())d[U(0xc9)+U(0x339)]<a&&(pendingButtonActions[U(0x1b5)+'e'](c),b++);for(const [e,f]of pendingMessageActions[U(0x160)+'es']())f[U(0xc9)+U(0x339)]<a&&(pendingMessageActions[U(0x1b5)+'e'](e),b++);if(b>0x0)info(U(0x177)+U(0x281)+b+(U(0x1ac)+U(0x1b9)+U(0x35f)+U(0x12f)+U(0x27d)));},CLEANUP_INTERVAL_MS);}async function generateMainMenu(a){const V=a0D,b=new InlineKeyboard();return b[V(0x277)](await safeApplyFont(V(0x175)+V(0x15e)+V(0x366)),setPendingButtonAction({'type':V(0x261)+V(0x117)+V(0x174),'chatId':a}))[V(0x215)](),b[V(0x277)](await safeApplyFont(V(0x13a)+V(0x284)+V(0xf9)+V(0xfd)),setPendingButtonAction({'type':V(0x11e)+V(0x29e)+V(0x2f0)+V(0x323)+'on','action':V(0x261)+V(0xbd)+V(0x33d)+V(0xfd),'chatId':a})),b[V(0x277)](await safeApplyFont(V(0x2c8)+V(0x284)+V(0x2b2)+V(0x2f2)),setPendingButtonAction({'type':V(0x11e)+V(0x29e)+V(0x2f0)+V(0x323)+'on','action':V(0x275)+V(0xb2)+'ns','chatId':a}))[V(0x215)](),b[V(0x277)](await safeApplyFont(V(0x2ef)+V(0x2fc)+V(0x179)+'e'),setPendingButtonAction({'type':V(0x11e)+V(0x29e)+V(0x2f0)+V(0x323)+'on','action':V(0x261)+V(0x197)+V(0x136)+'e','chatId':a})),b[V(0x277)](await safeApplyFont(V(0xed)+V(0x152)+V(0x33c)+'y'),setPendingButtonAction({'type':V(0x11e)+V(0x29e)+V(0x2f0)+V(0x323)+'on','action':V(0x261)+V(0x197)+V(0x2af)+V(0x33c)+'y','chatId':a}))[V(0x215)](),b[V(0x277)](await safeApplyFont(V(0xd2)+V(0xfa)+V(0x1d6)),setPendingButtonAction({'type':V(0x11e)+V(0x29e)+V(0x2f0)+V(0x323)+'on','action':V(0x235)+'e','chatId':a})),b[V(0x277)](await safeApplyFont(V(0x1e5)+V(0x11d)+V(0x24e)),setPendingButtonAction({'type':V(0x11e)+V(0x29e)+V(0x2f0)+V(0x323)+'on','action':V(0x298)+'le','chatId':a}))[V(0x215)](),b[V(0x277)](await safeApplyFont(V(0x1dc)+V(0x210)+V(0x1d6)),setPendingButtonAction({'type':V(0x11e)+V(0x29e)+V(0x2f0)+V(0x323)+'on','action':V(0x1b5)+'e','chatId':a})),b[V(0x277)](await safeApplyFont(V(0x340)+V(0xdf)+V(0x366)+'s'),setPendingButtonAction({'type':V(0x19b)+V(0x1d8),'chatId':a})),b;}async function generateSlotSelector(a,b){const W=a0D,c=ensureChatSchedule(a),d=Object[W(0x34f)](c)[W(0x1f8)]((f,g)=>f[W(0x35c)+W(0x233)+W(0x328)](g,undefined,{'numeric':!![]}));if(d[W(0x11c)+'h']===0x0)return null;const e=new InlineKeyboard();for(const f of d){const g=c[f],h=g[W(0x235)+'ed']?'🟢':'🔴',i=g[W(0xb2)+'ns']?.[W(0x11c)+'h']||0x0,j=setPendingButtonAction({'type':W(0x15b)+W(0x1f9)+W(0xc6)+W(0x16b),'chatId':a,'action':b,'time':f});e[W(0x277)](h+'\x20'+f+'\x20('+i+W(0x2a0)+g[W(0x1c7)+W(0xe2)]+')',j)[W(0x215)]();}return e[W(0x277)](await safeApplyFont(W(0x111)+W(0x2c3)+W(0xf8)+W(0x1f5)),setPendingButtonAction({'type':W(0x11e)+W(0x18c)+'up','chatId':a}))[W(0x215)](),e;}async function generateFrequencySelector(a,b){const X=a0D,c=new InlineKeyboard();return c[X(0x277)](await safeApplyFont(X(0x1ed)+'ly'),setPendingButtonAction({'type':X(0xdb)+X(0x141)+X(0x30f),'chatId':a,'time':b,'frequency':X(0x206)}))[X(0x215)](),c[X(0x277)](await safeApplyFont(X(0x140)+X(0x14e)),setPendingButtonAction({'type':X(0xdb)+X(0x141)+X(0x30f),'chatId':a,'time':b,'frequency':X(0xd6)+'y'}))[X(0x215)](),c[X(0x277)](await safeApplyFont(X(0x367)+X(0xc0)+X(0x139)),setPendingButtonAction({'type':X(0xdb)+X(0x141)+X(0x30f),'chatId':a,'time':b,'frequency':X(0x1d0)+X(0x285)+X(0x1cb)})),c[X(0x277)](await safeApplyFont(X(0x367)+X(0x13f)+X(0x139)),setPendingButtonAction({'type':X(0xdb)+X(0x141)+X(0x30f),'chatId':a,'time':b,'frequency':X(0x1d0)+X(0x285)+X(0x1f1)}))[X(0x215)](),c[X(0x277)](await safeApplyFont(X(0x111)+'k'),setPendingButtonAction({'type':X(0x11e)+X(0x29e)+X(0x2f0)+X(0x323)+'on','action':X(0x261)+X(0x197)+X(0x2af)+X(0x33c)+'y','chatId':a})),c;}async function generateButtonEditorMenu(a,b){const Y=a0D,c=new InlineKeyboard();return c[Y(0x277)](await safeApplyFont(Y(0x13a)+Y(0x284)+Y(0x2b2)+Y(0x2f2)),setPendingButtonAction({'type':Y(0x261)+Y(0xbd)+Y(0x2f9)+Y(0x30e)+Y(0x330)+'ot','chatId':a,'time':b}))[Y(0x215)](),c[Y(0x277)](await safeApplyFont(Y(0x115)+Y(0x105)+'ut'),setPendingButtonAction({'type':Y(0x261)+Y(0xbd)+Y(0x116)+Y(0x1e7)+Y(0x131)+'t','chatId':a,'time':b})),c[Y(0x277)](await safeApplyFont(Y(0x282)+Y(0x18d)+Y(0x334)),setPendingButtonAction({'type':Y(0x244)+Y(0x2f9)+Y(0x30e)+Y(0x330)+'ot','chatId':a,'time':b}))[Y(0x215)](),c[Y(0x277)](await safeApplyFont(Y(0x111)+Y(0x2c3)+Y(0xf8)+Y(0x1f5)),setPendingButtonAction({'type':Y(0x11e)+Y(0x18c)+'up','chatId':a})),c;}export async function onMessage(a){const Z=a0D;if(a[Z(0x379)][Z(0x20b)]!==Z(0x320)+'te'||!isAdmin(a))return;const b=a[Z(0x1e9)]['id'],c=a[Z(0x17e)+'ge'][Z(0x277)]?.[Z(0xd8)]()||'',d=pendingMessageActions[Z(0x1e0)](b);if(!d||d[Z(0xc9)+Z(0x339)]<Date[Z(0xd1)]()){if(c[Z(0x35b)+Z(0x102)](Z(0x224)+'d')){const k=await getDefault();if(!k)return a[Z(0x238)](Z(0x1ad)+Z(0x278)+Z(0x2e8)+Z(0x32a)+Z(0x187));const l=await getConnection(k);if(!l)return a[Z(0x238)](Z(0x1ff)+Z(0x349)+Z(0x2d0)+Z(0x1c8)+Z(0x373)+'.');const m=await botApi[Z(0xeb)+'at'](l)[Z(0x23e)](()=>({'title':Z(0x2f6)+l}));await a[Z(0x238)](Z(0x318)+Z(0xb8)+Z(0x33a)+Z(0x208)+Z(0x14c)+Z(0xbe)+escapeHtml(m[Z(0x326)])+Z(0x1d9),{'parse_mode':Z(0x1b6),'reply_markup':await generateMainMenu(l)});}return;}const {type:f,chatId:g,time:h,oldTime:i}=d[Z(0x365)+'ad'],j=ensureChatSchedule(g);pendingMessageActions[Z(0x1b5)+'e'](b);try{switch(f){case Z(0x335)+Z(0x249)+Z(0x1c2)+Z(0x324):{const n=normalizeTime(c);if(!n)return a[Z(0x238)](Z(0x352)+Z(0x17d)+Z(0x246)+Z(0x17a)+Z(0x22f)+Z(0x184)+Z(0x1ee)+Z(0x321)+Z(0x32b)+'>.',{'parse_mode':Z(0x1b6)});if(j[n])return a[Z(0x238)](Z(0x1da)+Z(0x26c)+Z(0xdd)+Z(0x270)+Z(0x219)+Z(0x372)+Z(0x293)+n+Z(0x1f0),{'parse_mode':Z(0x1b6)});const o={'time':n,'enabled':![],'text':Z(0x226)+Z(0x2c6)+Z(0x133)+n,'frequency':Z(0x206),'lastSent':null,'buttons':[],'layout':[]};j[n]=o,await saveSlotToDB(g,o),await a[Z(0x238)](Z(0x170)+Z(0x12b)+n+(Z(0x247)+Z(0x329)+'.'),{'parse_mode':Z(0x1b6),'reply_markup':await generateMainMenu(g)});break;}case Z(0x335)+Z(0x199)+Z(0x230)+'me':{const p=normalizeTime(c);if(!p)return a[Z(0x238)](Z(0x352)+Z(0x17d)+Z(0x246)+Z(0x17a)+Z(0x22f)+Z(0x184)+Z(0x1ee)+Z(0x321)+Z(0x32b)+'>.',{'parse_mode':Z(0x1b6)});if(j[p])return a[Z(0x238)](Z(0x1da)+Z(0x2e2)+Z(0x166)+Z(0x1a2)+Z(0xb1)+Z(0x107)+'>'+p+Z(0x1f0),{'parse_mode':Z(0x1b6)});const q=j[i];if(!q)return a[Z(0x238)](Z(0x2d4)+Z(0x29f)+Z(0x2a8)+Z(0x236)+Z(0x1d1)+Z(0x29b)+'d.');const r={...q,'time':p,'lastSent':null};await deleteSlotFromDB(g,i),await saveSlotToDB(g,r),delete j[i],j[p]=r,info(Z(0x37a)+Z(0x236)+Z(0x1f4)+Z(0x165)+g+(Z(0x1bf)+Z(0x1dd)+'m\x20')+i+Z(0x28a)+p+(Z(0x31d)+Z(0x2e9)+Z(0xec)+Z(0x2cb)+'.')),await a[Z(0x238)](Z(0x170)+Z(0x2c0)+Z(0x37b)+Z(0x181)+Z(0x121)+Z(0x23a)+i+(Z(0x247)+Z(0x124)+'>')+p+Z(0x1f0),{'parse_mode':Z(0x1b6),'reply_markup':await generateMainMenu(g)});break;}case Z(0x335)+Z(0x1f3)+Z(0x17b)+Z(0x1a7)+Z(0x1f7):{const s=j[h];if(!s)return a[Z(0x238)](Z(0x203)+Z(0x1e6)+Z(0x30b)+Z(0x2fb)+Z(0xf2));s[Z(0x277)]=c,s[Z(0x228)+Z(0x2d3)]=a[Z(0x17e)+'ge'][Z(0x228)+Z(0x2d3)]||[],await saveSlotToDB(g,s),await a[Z(0x238)](Z(0x13d)+Z(0x22e)+Z(0x2aa)+'b>'+h+(Z(0x247)+Z(0x2a3)+Z(0x27a)),{'parse_mode':Z(0x1b6),'reply_markup':await generateMainMenu(g)});break;}case Z(0x335)+Z(0x294)+Z(0x305)+Z(0x212)+Z(0x1f7):{const t=j[h];if(!t)return a[Z(0x238)](Z(0x203)+Z(0x1e6)+Z(0x30b)+Z(0x2fb)+Z(0xf2));const u=c[Z(0x248)]('\x0a')[Z(0x143)](w=>w[Z(0xd8)]())[Z(0x112)+'r'](Boolean);if(u[Z(0x11c)+'h']>MAX_TOTAL_BUTTONS)throw new Error(Z(0x1ce)+MAX_TOTAL_BUTTONS+(Z(0x2d7)+Z(0x245)+Z(0x205)+Z(0x2ac)+Z(0x27a)));const v=u[Z(0x143)](w=>{const a0=Z,x=w[a0(0x306)](/^\?([^\(]+)\(([^)]+)\)/);if(!x||!x[0x2][a0(0x35b)+a0(0x102)](a0(0x229)))throw new Error(a0(0x11b)+a0(0x31c)+a0(0x346)+a0(0x1fb)+a0(0x1a1)+a0(0x316)+a0(0x37c)+a0(0x12e)+'\x20\x22'+w+(a0(0x225)+a0(0xd4)+a0(0x305)+a0(0x2a1)+a0(0x22c)+a0(0x209)+a0(0x169)));return{'name':x[0x1][a0(0xd8)](),'url':x[0x2][a0(0xd8)]()};});t[Z(0xb2)+'ns']=v,t[Z(0x381)+'t']=[],await saveSlotToDB(g,t),await a[Z(0x238)]('✅\x20'+v[Z(0x11c)+'h']+(Z(0x123)+Z(0x35a)+Z(0x2b0)+Z(0x10c)+Z(0x183)+'b>')+h+(Z(0x1f0)+Z(0x20c)+Z(0x2ff)+Z(0x2be)+Z(0x268)+Z(0x314)+'.'),{'parse_mode':Z(0x1b6),'reply_markup':await generateButtonEditorMenu(g,h)});break;}case Z(0x335)+Z(0x34c)+Z(0x314)+Z(0x227)+Z(0x16b):{const w=j[h];if(!w)return a[Z(0x238)](Z(0x203)+Z(0x1e6)+Z(0x30b)+Z(0x2fb)+Z(0xf2));if(w[Z(0xb2)+'ns'][Z(0x11c)+'h']===0x0)return a[Z(0x238)](Z(0xfc)+Z(0x1a5)+Z(0x1b8)+Z(0x153)+Z(0x16e)+Z(0x305)+Z(0x132)+Z(0x1be)+Z(0x2ed)+Z(0x148)+Z(0x265)+Z(0x35e));const x=c[Z(0x248)](':')[Z(0x143)](z=>parseInt(z[Z(0xd8)](),0xa));if(x[Z(0xdc)](isNaN))throw new Error(Z(0x11b)+Z(0x1bd)+Z(0x27c)+Z(0x17a)+Z(0x290)+Z(0x11f)+Z(0x188)+Z(0x361)+Z(0x181)+Z(0x2ae)+Z(0x2f4)+Z(0x2d5)+Z(0x28d)+Z(0x368));const y=x[Z(0x370)+'e']((z,A)=>z+A,0x0);if(y!==w[Z(0xb2)+'ns'][Z(0x11c)+'h'])throw new Error(Z(0x20e)+Z(0x168)+Z(0x306)+Z(0x2df)+Z(0x30d)+Z(0x23d)+Z(0x200)+y+(Z(0x123)+Z(0x262)+Z(0x2bb)+Z(0x2ad)+Z(0x110)+Z(0x36b))+w[Z(0xb2)+'ns'][Z(0x11c)+'h']+(Z(0x123)+Z(0x262)+Z(0x2dc)+'d.'));w[Z(0x381)+'t']=x,await saveSlotToDB(g,w),await a[Z(0x238)](Z(0x28c)+Z(0x23d)+Z(0x107)+'>'+h+(Z(0x247)+Z(0x161)+Z(0xad))+c+Z(0x1f0),{'parse_mode':Z(0x1b6),'reply_markup':await generateButtonEditorMenu(g,h)});break;}}}catch(z){error(Z(0x2fe)+Z(0x16a)+Z(0x15f)+Z(0xbc)+Z(0x272)+Z(0x17e)+Z(0x100)+Z(0x344)+'\x20'+z[Z(0x17e)+'ge']),await a[Z(0x238)](Z(0x1c0)+Z(0x1f2)+Z(0xd3)+Z(0x358)+Z(0x25d)+Z(0x2b6)+Z(0x303)+escapeHtml(z[Z(0x17e)+'ge'])+(Z(0x274)+'>'),{'parse_mode':Z(0x1b6)});}}function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0xac;let f=c[d];if(a0b['fSkJUy']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0b['nVoOXn']=g,a=arguments,a0b['fSkJUy']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0b['nVoOXn'](f),a[i]=f):f=j,f;},a0b(a,b);}export async function onCallbackQuery(a){const a1=a0D;if(!a[a1(0x359)+a1(0x18e)+a1(0xb9)][a1(0x21b)]?.[a1(0x35b)+a1(0x102)](SCHED_PREFIX))return;const b=a[a1(0x359)+a1(0x18e)+a1(0xb9)][a1(0x21b)],c=a[a1(0x1e9)]['id'],d=pendingButtonActions[a1(0x1e0)](b);if(!d||d[a1(0xc9)+a1(0x339)]<Date[a1(0xd1)]())return await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x28b)+a1(0x2f5)+a1(0x10f)+a1(0x1ac)+a1(0x1df))[a1(0x23e)](()=>{}),a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0x1cd)+a1(0x190),'show_alert':!![]});pendingButtonActions[a1(0x1b5)+'e'](b);const {payload:f}=d,{type:g,chatId:h,action:i,time:j,frequency:k}=f,l=ensureChatSchedule(h),m=async()=>{const a2=a1;if(pendingMessageActions[a2(0x1d3)](c))return await a[a2(0x242)+a2(0x15d)+a2(0x13c)+a2(0x18f)]({'text':a2(0xf4)+a2(0x252)+a2(0xcc)+a2(0x1e8)+a2(0x254)+a2(0xae)+a2(0x1f9)+a2(0x1bb)+a2(0x176),'show_alert':!![]}),!![];return![];};try{switch(g){case a1(0x11e)+a1(0x18c)+'up':{await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x318)+a1(0xb8)+a1(0x33a)+a1(0x208)+a1(0x14c)+a1(0xbe)+escapeHtml((await botApi[a1(0xeb)+'at'](h)[a1(0x23e)](()=>({'title':a1(0x2f6)+h})))[a1(0x326)])+a1(0x1d9),{'parse_mode':a1(0x1b6),'reply_markup':await generateMainMenu(h)});break;}case a1(0x261)+a1(0x117)+a1(0x174):{if(await m())return;setPendingMessageAction(c,{'type':a1(0x335)+a1(0x249)+a1(0x1c2)+a1(0x324),'chatId':h}),await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x311)+a1(0x35d)+a1(0x237)+a1(0x185)+a1(0x1c3)+a1(0x2f7)+a1(0x13b)+a1(0x236)+a1(0x250)+a1(0x14d)+a1(0x198)+a1(0x126)+a1(0x325)+a1(0x32f)+a1(0x363),{'parse_mode':a1(0x1b6)});break;}case a1(0x11e)+a1(0x29e)+a1(0x2f0)+a1(0x323)+'on':{const n=await generateSlotSelector(h,i);if(!n)return await a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0x17f)+a1(0x23b)+a1(0x1c5)+a1(0x29a)+a1(0x1fd),'show_alert':!![]}),a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x1ad)+a1(0x257)+a1(0x317)+a1(0x157)+a1(0x2b4)+a1(0x180)+a1(0x243)+a1(0x16f)+'t.',{'reply_markup':await generateMainMenu(h)});const o={'prompt_set_message':a1(0x260)+a1(0x34a)+a1(0x1f6)+a1(0x31e)+a1(0x2ec)+a1(0x25f)+a1(0x2a4),'edit_buttons':a1(0x137)+a1(0x34a)+a1(0x1f6)+a1(0xea)+a1(0x1e3)+a1(0x119)+a1(0xb2)+a1(0x37e),'prompt_edit_time':a1(0x1d4)+a1(0x34a)+a1(0x1f6)+a1(0x10e)+a1(0x31b)+a1(0x119)+a1(0xb5),'prompt_edit_frequency':a1(0xcf)+a1(0x34a)+a1(0x1f6)+a1(0x10e)+a1(0x31b)+a1(0x119)+a1(0x1c7)+a1(0x146),'enable':a1(0x151)+a1(0x34a)+a1(0x1f6)+a1(0x2b3)+a1(0x25a)+':','disable':a1(0x118)+a1(0x34a)+a1(0x1f6)+a1(0x2e7)+a1(0x1c1)+'e:','delete':a1(0x2de)+a1(0x34a)+a1(0x1f6)+a1(0x2e7)+a1(0x29b)+':'}[i]||a1(0xf4)+a1(0x2cd)+a1(0x34a)+a1(0x1f6)+':';await a[a1(0xd5)+a1(0x17b)+a1(0x207)](o,{'reply_markup':n,'parse_mode':a1(0x1b6)});break;}case a1(0x15b)+a1(0x1f9)+a1(0xc6)+a1(0x16b):{const p=l[j];if(!p)return a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x327)+a1(0x32c)+a1(0x106)+'d.',{'reply_markup':await generateMainMenu(h)});switch(i){case a1(0x235)+'e':{p[a1(0x235)+'ed']=!![],await saveSlotToDB(h,p),await a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0x170)+'t\x20'+j+(a1(0x2c2)+a1(0x21d))});break;}case a1(0x298)+'le':{p[a1(0x235)+'ed']=![],await saveSlotToDB(h,p),await a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0x36f)+'t\x20'+j+(a1(0x17c)+a1(0x154))});break;}case a1(0x1b5)+'e':{await deleteSlotFromDB(h,j),delete l[j],await a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0xee)+'t\x20'+j+(a1(0x2fb)+a1(0xf2))});break;}case a1(0x261)+a1(0xbd)+a1(0x33d)+a1(0xfd):{if(await m())return;setPendingMessageAction(c,{'type':a1(0x335)+a1(0x1f3)+a1(0x17b)+a1(0x1a7)+a1(0x1f7),'chatId':h,'time':j}),await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x2cc)+a1(0x377)+a1(0x13b)+a1(0x17e)+a1(0x37f)+a1(0x2f7)+a1(0xbe)+j+(a1(0x247)+a1(0x27e)),{'parse_mode':a1(0x1b6)});return;}case a1(0x261)+a1(0x197)+a1(0x136)+'e':{if(await m())return;setPendingMessageAction(c,{'type':a1(0x335)+a1(0x199)+a1(0x230)+'me','chatId':h,'oldTime':j}),await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x1d5)+a1(0x377)+a1(0x13b)+a1(0x246)+a1(0x1b2)+a1(0x343)+'>'+j+(a1(0x247)+a1(0x236)+a1(0x239)+a1(0x253)+a1(0x2a6)+'.'),{'parse_mode':a1(0x1b6)});return;}case a1(0x261)+a1(0x197)+a1(0x2af)+a1(0x33c)+'y':{await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0xcf)+a1(0x218)+a1(0x2f1)+a1(0xb3)+a1(0xf0)+a1(0x293)+j+a1(0x2c9),{'parse_mode':a1(0x1b6),'reply_markup':await generateFrequencySelector(h,j)});return;}case a1(0x275)+a1(0xb2)+'ns':{await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0xf5)+a1(0xb8)+a1(0x123)+a1(0x2fa)+a1(0x22b)+a1(0x350)+'>'+j+a1(0x1d9),{'parse_mode':a1(0x1b6),'reply_markup':await generateButtonEditorMenu(h,j)});return;}}const q=await generateSlotSelector(h,i);if(q)await a[a1(0xd5)+a1(0x17b)+a1(0x2ab)+a1(0x1b0)+'up']({'reply_markup':q});else await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x331)+a1(0x158)+a1(0x337)+a1(0x240)+a1(0x307)+a1(0x21e)+a1(0xc1)+'d.',{'reply_markup':await generateMainMenu(h)});break;}case a1(0x261)+a1(0xbd)+a1(0x2f9)+a1(0x30e)+a1(0x330)+'ot':{if(await m())return;setPendingMessageAction(c,{'type':a1(0x335)+a1(0x294)+a1(0x305)+a1(0x212)+a1(0x1f7),'chatId':h,'time':j}),await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x2cc)+a1(0x1b7)+a1(0x1fc)+a1(0x108)+a1(0x269)+a1(0x37c)+a1(0x236)+a1(0x23a)+j+(a1(0xb6)+a1(0xce)+a1(0x364)+a1(0x263)+a1(0x23f)+a1(0xe8)+a1(0xba)+a1(0x374)+a1(0x1fe)+a1(0x147)+a1(0x120)+a1(0x274)+'>'),{'parse_mode':a1(0x1b6)});break;}case a1(0x261)+a1(0xbd)+a1(0x116)+a1(0x1e7)+a1(0x131)+'t':{if(await m())return;const r=l[j];if(!r||r[a1(0xb2)+'ns'][a1(0x11c)+'h']===0x0)return await a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0x1ad)+a1(0xb2)+a1(0x1e2)+a1(0xe6)+a1(0x37c)+a1(0x33f)+a1(0x13e),'show_alert':!![]});setPendingMessageAction(c,{'type':a1(0x335)+a1(0x34c)+a1(0x314)+a1(0x227)+a1(0x16b),'chatId':h,'time':j}),await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x204)+a1(0x377)+a1(0x123)+a1(0x25e)+a1(0x27c)+a1(0x10c)+a1(0x183)+'b>'+j+(a1(0x247)+a1(0x167)+a1(0xe4)+a1(0x37c)+a1(0x267)+a1(0x1ea)+'.'),{'parse_mode':a1(0x1b6)});break;}case a1(0x244)+a1(0x2f9)+a1(0x30e)+a1(0x330)+'ot':{const u=l[j];if(!u)return await a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0x327)+a1(0x32c)+a1(0x106)+'d!','show_alert':!![]});u[a1(0xb2)+'ns']=[],u[a1(0x381)+'t']=[],await saveSlotToDB(h,u),await a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0x30c)+a1(0x205)+a1(0x133)+j+(a1(0x1a0)+a1(0x1df))}),await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0xf5)+a1(0xb8)+a1(0x123)+a1(0x2fa)+a1(0x22b)+a1(0x350)+'>'+j+a1(0x1d9),{'parse_mode':a1(0x1b6),'reply_markup':await generateButtonEditorMenu(h,j)});break;}case a1(0xdb)+a1(0x141)+a1(0x30f):{const v=l[j];if(!v)return a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0x2fe)+a1(0xf1)+'t\x20'+j+(a1(0x1c8)+a1(0x373)+'!'),'show_alert':!![]});v[a1(0x1c7)+a1(0xe2)]=k,await saveSlotToDB(h,v),await a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0x36a)+a1(0x266)+a1(0x161)+a1(0x2b7)+k}),await a[a1(0xd5)+a1(0x17b)+a1(0x207)](a1(0x24a)+a1(0x33c)+a1(0xfb)+a1(0xbe)+j+(a1(0x247)+a1(0x2a3)+a1(0x2e6)+a1(0xbe))+k+a1(0x1f0),{'parse_mode':a1(0x1b6),'reply_markup':await generateMainMenu(h)});break;}case a1(0x19b)+a1(0x1d8):{const w=Object[a1(0x34f)](l)[a1(0x1f8)]((y,z)=>y[a1(0x35c)+a1(0x233)+a1(0x328)](z,undefined,{'numeric':!![]}));let x=a1(0x172)+a1(0x1c4)+a1(0x1a6)+a1(0x351)+a1(0x21c);if(w[a1(0x11c)+'h']===0x0)x+=a1(0x232)+a1(0x1f6)+a1(0x132)+a1(0x32e)+a1(0x338)+a1(0x1ef)+'>';else for(const y of w){const z=l[y],A=(z[a1(0x277)]||'')[a1(0xff)+'ce'](/<[^>]*>?/gm,'')[a1(0x287)](0x0,0x23);x+=(z[a1(0x235)+'ed']?'🟢':'🔴')+a1(0xbe)+z[a1(0x1cc)]+(a1(0x247)+a1(0xcb)+'\x22')+escapeHtml(A)+(a1(0x345)+a1(0x2fd))+(z[a1(0xb2)+'ns']?.[a1(0x11c)+'h']||0x0)+a1(0x2a0)+z[a1(0x1c7)+a1(0xe2)]+')\x0a';}await a[a1(0xd5)+a1(0x17b)+a1(0x207)](x,{'parse_mode':a1(0x1b6),'reply_markup':new InlineKeyboard()[a1(0x277)](await safeApplyFont(a1(0x111)+'k'),setPendingButtonAction({'type':a1(0x11e)+a1(0x18c)+'up','chatId':h}))});break;}}}catch(B){error(a1(0x295)+a1(0x16c)+a1(0x11a)+a1(0x304)+':\x20'+B[a1(0x17e)+'ge']),!B[a1(0x2eb)+a1(0x222)+'n']?.[a1(0x122)+a1(0x375)](a1(0x17e)+a1(0x25b)+a1(0x1c8)+a1(0xe9)+a1(0x15a))&&await a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]({'text':a1(0xe3)+a1(0x304)+a1(0x26f)+a1(0x1a9),'show_alert':!![]});}finally{if(!a[a1(0x242)+a1(0xc3)])a[a1(0x242)+a1(0x15d)+a1(0x13c)+a1(0x18f)]()[a1(0x23e)](()=>{});}}export async function initialize(a){const a3=a0D;try{if(!a?.[a3(0x2c5)])throw new Error(a3(0x182)+a3(0x189)+a3(0x36e)+a3(0x2ca)+a3(0x194)+a3(0xd9)+a3(0x2e1)+a3(0x10d)+a3(0x19e));botApi=a[a3(0x2c5)],info(a3(0x2d6)+a3(0x12d)+a3(0x155)+a3(0x26e)+a3(0x1df)),await initDatabase(),await loadSchedules(),startAlignedScheduler(),startCleanup(),info(a3(0x259)+a3(0x211)+a3(0x201)+a3(0x28f)+a3(0x202)+a3(0x2e3)+a3(0x22d)+a3(0x2bc)+a3(0x353)+a3(0x22a));}catch(b){error(a3(0x26a)+a3(0x2ce)+a3(0x101)+a3(0x1e1)+a3(0x26c)+a3(0x127)+a3(0x2c1)+a3(0x196)+a3(0xd0)+b[a3(0x17e)+'ge']);throw b;}}
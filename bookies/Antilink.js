const a0t=a0b;(function(a,b){const s=a0b,c=a();while(!![]){try{const d=-parseInt(s(0x142))/0x1*(-parseInt(s(0x12e))/0x2)+-parseInt(s(0x16c))/0x3*(parseInt(s(0x16a))/0x4)+parseInt(s(0x132))/0x5*(parseInt(s(0x120))/0x6)+parseInt(s(0x14c))/0x7+-parseInt(s(0x15b))/0x8+-parseInt(s(0x162))/0x9*(parseInt(s(0x14d))/0xa)+parseInt(s(0x171))/0xb*(-parseInt(s(0x115))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0xdf140));import a0c from'fs';import a0d from'path';import{error,info}from'../bookieutils/logger.js';import{registerModule}from'../bookieutils/helpeutils/fonthelp.js';import{getConfig}from'../bookieutils/config.js';function a0a(){const F=['C2f2zsa','zgf0ys8','rMfPBgu','y2HHDa','zgvSzxq','Ew5J','zu1LC3m','C29Tzq','yw50AwW','su9ox1e','zMXVB3i','D2fYBIa','ndy5ntLctvPYshC','CMvWBge','ywLSzwq','z2vFAwq','ig5LEhq','BgvUz3q','ig11Dgu','zgvZ','Aw9Uigy','zMfPBgu','mta1mZe4mdfVDvzowwW','mJu5mZbzsNvAC1i','su5l','v0fstKK','C2v0','C3rHDgu','DxjS','DxrMltG','zxHPC3q','BwvZC2e','4PQG77Ipia','vuvvrv8','vKfmx00','A2v5CW','yxrnzw0','mty4nty4D3HHCe5Z','tvvurv8','BMCGBwu','B3DUvJi','ywrK','rfvsqvq','su9ox00','mJy3m1zVs1fKCa','C29U','rurFqLK','AwvZ','BwTKAxi','revmrvq','BM93','ihrPBwu','nJq4nJe2EvzKAvDQ','ig1LC3m','nMzXqvrAqG','qurnsu4','4P2mieXPBG','CMvWBhK','zNjVBq','nJK2nJnytuvqBfi','xcqX','u3LUyW','zw50Axq','C3rYAw4','CMvZB2W','DxnLCM4','ihLVDsC','AgfZ','DhLWzq','vuXu','zdOG','yMvY','Aw5Rigu','x0rfrKe','CNjVCJO','D3jPDgu','igzHAwW','8j+uHYbnDxq','C3nHz2u','rMLSzvm','AwXLu3K','igLUia','C1n5BMm','BwvUDgK','CMvHzey','Aw5R','Dgv4Df8','ywDLigy','Aw5JBhu','AYbKzwW','zwqG','CMvZDhi','BgWGyMu','nZa4rez4seHR','y2f0y2G','z2LMEq','BgLUAW','ms40lJi','su5urvi','tgLUAYa','zxrLzdO','Awn0q2G','CgfYC2u','zcb0BYa','mtHAAfjltxK','u1nbr0u','qu5usuW','z2v0','zgLYBMe','ywDL','v2fYBMK','y2XLyxi','yw1L','tKDFtuu','zwq6ia','twfYA2q','C2L6zq','rxHWCMu','mJjXChfIDg4','Aw5RlMO','yxbP','ru5bqKW','nJm2mZa1ugndCxbk','qw50AwW','C3nPB24','txv0zsa'];a0a=function(){return F;};return a0a();}export const name=a0t(0x133)+a0t(0x18b);export const version=a0t(0x119);registerModule(name);function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0x113;let f=c[d];if(a0b['TBwsSm']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0b['HSNsUV']=g,a=arguments,a0b['TBwsSm']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0b['HSNsUV'](f),a[i]=f):f=j,f;},a0b(a,b);}const DATA_FILE=a0d[a0t(0x176)+'ve'](a0t(0x137)+a0t(0x13e)+a0t(0x12f)+a0t(0x163));let globalBot=null;const warnMap=loadWarnMap(),exprState=new Map(),LINK_WINDOW_MS=0x18*0x3c*0x3c*0x3e8;function escapeMarkdownV2(a){const u=a0t;return a[u(0x143)+'ce'](/([_*\[\]()~`>#+=|{}.!-])/g,u(0x172));}function loadWarnMap(){const v=a0t;if(!a0c[v(0x154)+v(0x188)](DATA_FILE))return{};try{return JSON[v(0x11e)](a0c[v(0x18a)+v(0x186)+'nc'](DATA_FILE,v(0x153)))||{};}catch{return{};}}function saveWarnMap(){const w=a0t;try{a0c[w(0x166)+w(0x173)](a0d[w(0x124)+'me'](DATA_FILE),{'recursive':!![]}),a0c[w(0x181)+w(0x185)+w(0x13b)](DATA_FILE,JSON[w(0x175)+w(0x117)](warnMap,null,0x2));}catch(a){error(w(0x138)+w(0x11f)+w(0x136)+w(0x141)+w(0x151)+':\x20'+a[w(0x155)+'ge']);}}function recordWarn(a,b){const x=a0t;if(!warnMap[a])warnMap[a]={};warnMap[a][b]=Date[x(0x168)](),saveWarnMap();}function clearWarn(a,b){const y=a0t;if(warnMap[a]){delete warnMap[a][b];if(Object[y(0x159)](warnMap[a])[y(0x147)+'h']===0x0)delete warnMap[a];saveWarnMap();}}function isWarnedRecently(a,b){const z=a0t,c=warnMap[a]?.[b];return c&&Date[z(0x168)]()-c<LINK_WINDOW_MS;}function getNextExpression(a){const A=a0t,{EXPRESSIONS:b}=getConfig()[A(0x122)+A(0x14e)];if(!b||b[A(0x147)+'h']===0x0)return'';if(!exprState[A(0x179)](a))exprState[A(0x150)](a,new Set());const c=exprState[A(0x123)](a);if(c[A(0x12c)]>=b[A(0x147)+'h'])c[A(0x127)]();for(let d=0x0;d<b[A(0x147)+'h'];d++){if(!c[A(0x179)](d))return c[A(0x15f)](d),b[d];}return b[0x0];}function isAdmin(a){const B=a0t;try{return a[B(0x170)]&&getConfig()[B(0x16d)+'S'][B(0x18e)+B(0x149)](a[B(0x170)]['id']);}catch{return![];}}export async function initialize(a){globalBot=a;}export async function onMessage(a){const C=a0t;try{const b=getConfig()[C(0x122)+C(0x14e)];if(!b[C(0x131)+C(0x164)+C(0x17f)+C(0x17b)]||isAdmin(a))return;const c=a[C(0x155)+'ge']?.[C(0x174)+C(0x165)]||[];if(!c[C(0x13d)](k=>[C(0x152),C(0x18c)+C(0x118),C(0x18c)+C(0x189)+'on'][C(0x18e)+C(0x149)](k[C(0x17a)])))return;const d=a[C(0x139)]['id'],e=a[C(0x170)]['id'],f=a[C(0x170)][C(0x177)+C(0x128)]?'@'+a[C(0x170)][C(0x177)+C(0x128)]:''+e,g=escapeMarkdownV2('('+f+(C(0x146)+C(0x169)+C(0x178)+C(0x114)+C(0x148)+'d)')),h=escapeMarkdownV2('('+f+')');try{await a[C(0x130)][C(0x13a)+C(0x13c)+C(0x125)](d,a[C(0x155)+'ge'][C(0x155)+C(0x145)]),info(C(0x16e)+C(0x18f)+C(0x11c)+'\x20'+a[C(0x155)+'ge'][C(0x155)+C(0x145)]);}catch(k){error(C(0x11b)+C(0x13a)+C(0x14a)+C(0x144)+':\x20'+k[C(0x155)+'ge']);}if(!isWarnedRecently(d,e)){const l=C(0x156)+escapeMarkdownV2(b[C(0x14f)+C(0x129)+C(0x121)])+'\x20'+g;try{const m=await a[C(0x16f)](l,{'parse_mode':C(0x12b)+C(0x15e)});setTimeout(()=>{const D=C;globalBot[D(0x130)][D(0x13a)+D(0x13c)+D(0x125)](d,m[D(0x155)+D(0x145)])[D(0x116)](()=>{});},b[C(0x167)+C(0x13f)+C(0x157)+C(0x11a)+C(0x158)+'S']);}catch(n){error(C(0x126)+C(0x15d)+C(0x184)+C(0x182)+C(0x12a)+n[C(0x155)+'ge']);}recordWarn(d,e);return;}const i=getNextExpression(d),j=escapeMarkdownV2(i)+'\x20'+h;try{const o=await a[C(0x16f)](j,{'parse_mode':C(0x12b)+C(0x15e)});setTimeout(()=>{const E=C;globalBot[E(0x130)][E(0x13a)+E(0x13c)+E(0x125)](d,o[E(0x155)+E(0x145)])[E(0x116)](()=>{});},b[C(0x167)+C(0x13f)+C(0x157)+C(0x11a)+C(0x158)+'S']);}catch(p){error(C(0x12d)+C(0x134)+C(0x16b)+C(0x18d)+C(0x144)+':\x20'+p[C(0x155)+'ge']);}try{await a[C(0x130)][C(0x113)+C(0x11d)+C(0x15a)+C(0x17d)](d,e,{'permissions':{'can_send_messages':![],'can_send_media_messages':![],'can_send_polls':![],'can_send_other_messages':![],'can_add_web_page_previews':![],'can_change_info':![],'can_invite_users':![],'can_pin_messages':![]},'until_date':b[C(0x15c)+C(0x160)+C(0x161)+'S']>0x0?Math[C(0x140)](Date[C(0x168)]()/0x3e8)+Math[C(0x140)](b[C(0x15c)+C(0x160)+C(0x161)+'S']/0x3e8):0x0}),info(C(0x183)+C(0x190)+e+C(0x187)+d);}catch(q){error(C(0x135)+C(0x14b)+C(0x17c)+q[C(0x155)+'ge']);}clearWarn(d,e);}catch(r){error(C(0x133)+C(0x17e)+C(0x180)+'\x20'+r[C(0x155)+'ge']);}}
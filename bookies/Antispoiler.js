const a0q=a0b;(function(a,b){const p=a0b,c=a();while(!![]){try{const d=parseInt(p(0xe8))/0x1+-parseInt(p(0x73))/0x2*(-parseInt(p(0xd7))/0x3)+parseInt(p(0xa7))/0x4+parseInt(p(0xbf))/0x5+parseInt(p(0xe9))/0x6+parseInt(p(0x75))/0x7*(-parseInt(p(0xd4))/0x8)+parseInt(p(0xef))/0x9*(-parseInt(p(0x6b))/0xa);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0xd514c));import{db}from'../bookieutils/db.js';import{getConfig}from'../bookieutils/config.js';import{error,info}from'../bookieutils/logger.js';import{applyFont,registerModule}from'../bookieutils/helpeutils/fonthelp.js';import{getDefault,getConnection,getConnectionName}from'../bookieutils/connection.js';function a0a(){const B=['AxmGz3i','z2v0','q1jfqvq','r3jVDxa','tefdrsa','psa/','C3rHy2S','zxHLyW','icaGica','u0vmrum','DgL0Awu','ifzbtfu','BwvZC2e','DgvZDa','zxrKzwy','mtu4nZmWnhnHB21nBG','icK7cIa','Aw5JBhu','Cg9PBgu','B3zLzca','DhLWzq','rvmGkd8','BgvYx3m','4PQG77IpifbSzq','DgL0Bgu','mqOGica','ihnWB2K','C2v0rw4','teuGsuy','AxnbCNi','zc4GuMu','y2fWDgK','BgvKkqO','CMvWBhK','B25Uzwm','zgvMyxu','C2uGl3m','z2vFAwq','igLUia','mJeXnZa3mhLcwgngqq','x2LKieK','AxnWB2K','CL9Zzxq','igvYCM8','zxqUifu','rsbJAge','4P2mierLzG','rvHju1q','CJOG','rvjuie8','zsbLCNi','uIbquKK','AwvZ','s0vzlaO','lca/kqO','zwnRAw4','y2f0y2G','ignOyxq','B3i6ia','Df9PzcW','mZi4AwnuwwXZ','tLrfr0u','C3bVAwW','nZHNzNHAz3K','z3mGkaO','DgLVBI4','C29Tzq','BgvKieK','B3iGy2G','Df9Pzca','CIbYzw0','uYbHBNq','y2HHDa','vcbLBMe','yxbP','qw50Axm','igzVDw4','icbjtLm','AxnfBMe','ywjSzwq','ndGWodm0v055ALDc','otK1mtyZmfbNCujpyq','zNjVBq','Aw9Uie8','4P2mie5Via','icaGia','zgvSzxq','mteWndu3sffRBunI','yxnLigq','B25Fzw4','rgvSzxq','zg1PBJO','u3bVAwW','Dgv4Da','zYbPC0e','CNvU','AxqU','mte3mgTKswPrtq','su5utYa','rLjptsa','tufswsa','zw5HyMW','ie5pvca','mI4WlJa','icHJAge','ndyZntjYvwPUAvK','uIbsrva','mJe0mde4rM9Ztxfy','z2v0q2G','zxjYB3i','C3vWzxi','yxvSDca','B3vWihm','zxiGChi','Aw4Gl2m','DgLUz3m','B3vWlG','BYbUB3q','Aw4GDgG','ihbVC3q','cIaGica','zxr0Aw4','lxnLDca','ywDL','z3jVDxa','BgvYCYa','ChjPDMe','B3rLy3q','uIberuy','rsbuqui','zxjZigK','igvUywi','zgvZ','zu1LC3m','iIbUB3q','yw50Axm','qvvmvca','8j+tJsbfCNi','yMXLzca','ifDirvi','BhqGz3i','zw50Axq'];a0a=function(){return B;};return a0a();}export const name=a0q(0xe3)+a0q(0xaa)+'r';function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0x66;let f=c[d];if(a0b['yhGHYa']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0b['LfHPmt']=g,a=arguments,a0b['yhGHYa']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0b['LfHPmt'](f),a[i]=f):f=j,f;},a0b(a,b);}export const version=a0q(0x71);registerModule(name);async function initDatabase(){const r=a0q;await db[r(0x9f)](r(0x82)+r(0x9a)+r(0x8b)+r(0xb4)+r(0x70)+r(0xc7)+r(0xdf)+r(0xc1)+r(0xae)+r(0x83)+r(0xd8)+r(0xa0)+r(0xd1)+r(0xc0)+r(0xd5)+r(0xcb)+r(0x6e)+r(0xcd)+r(0xa0)+r(0x8d)+r(0xdb)+r(0xd5)+r(0x8a)+r(0x92)+r(0xb1)+r(0xa8)+'\x20');}async function isEnabled(a){const s=a0q;try{const b=await db[s(0x99)](s(0xa1)+s(0xe1)+s(0x94)+s(0x6d)+s(0x91)+s(0xaa)+s(0xc2)+s(0x7d)+s(0x95)+s(0xc5)+s(0xdd)+s(0x9d),a);return b?Boolean(b[s(0x6f)+'ed']):!![];}catch(c){return error(s(0xe6)+s(0x94)+s(0x77)+':\x20'+c[s(0xa4)+'ge']),!![];}}async function setEnabled(a,b){const t=a0q;try{await db[t(0x69)](t(0x82)+t(0xe5)+t(0xc9)+t(0x74)+t(0x9c)+t(0x6c)+t(0x91)+t(0xaa)+t(0xc2)+t(0x7d)+t(0x72)+t(0xd3)+t(0x8d)+t(0xb8)+t(0xa0)+t(0xa3)+t(0xad)+t(0xce)+t(0xed),a,b?0x1:0x0);}catch(c){error(t(0xb3)+t(0xe7)+t(0xc3)+t(0xc8)+c[t(0xa4)+'ge']);}}async function getGroupInfo(a){const u=a0q;try{const b=await getConnectionName(a);if(b)return b;try{const c=await globalBot[u(0xe2)][u(0x76)+'at'](a);return c[u(0xb0)]||u(0x9b)+'\x20'+a;}catch{return u(0x9b)+'\x20'+a;}}catch(d){return u(0x9b)+'\x20'+a;}}async function sendResponse(a,b,c){const v=a0q,d=await getGroupInfo(c),e=b+v(0xbe)+d,f=await applyFont(name,e),g=await a[v(0xb9)](f);setTimeout(()=>{const w=v;a[w(0xe2)][w(0xee)+w(0x8f)+w(0x85)](a[w(0xe0)]['id'],g[w(0xa4)+w(0xbd)])[w(0xd0)](()=>{});},0x1388);}async function sendWarning(a,b){const x=a0q,c=await applyFont(name,b),d=await a[x(0xb9)](c);d?.[x(0xa4)+x(0xbd)]&&setTimeout(()=>{const y=x;a[y(0xe2)][y(0xee)+y(0x8f)+y(0x85)](a[y(0xe0)]['id'],d[y(0xa4)+y(0xbd)])[y(0xd0)](()=>{});},0x1388);}export async function initialize(){await initDatabase();}export async function onMessage(a){const z=a0q,b=a[z(0xa4)+'ge'];if(!b)return;const c=b[z(0x67)]??b[z(0xb7)+'on']??'',d=b[z(0xe0)]['id'],f=b[z(0xe0)][z(0xac)],g=b[z(0xa4)+z(0xbd)];if(isAdmin(a)&&c){let h=null,i=d;if(/^\/spoileron\b/i[z(0xa5)](c))h=z(0x66)+z(0x7b)+z(0x89)+z(0xeb)+'N';else/^\/spoileroff\b/i[z(0xa5)](c)&&(h=z(0x66)+z(0x7b)+z(0x89)+z(0xeb)+'FF');if(h){if(f===z(0x88)+'te'){const k=await getDefault();if(!k){await a[z(0xb9)](z(0xec)+z(0xbb)+z(0x96)+z(0x7a)+z(0xc4)+z(0xbc)+z(0xa6)+z(0x79)+z(0x7c)+z(0xba)+z(0xd9));return;}i=await getConnection(k);if(!i){await a[z(0xb9)](z(0xc6)+z(0x79)+'\x22'+k+(z(0x90)+z(0xe4)+z(0xb6)+z(0x84)+z(0x6a)));return;}}const j=h[z(0xa9)+z(0x8e)]('ON');await setEnabled(i,j),await sendResponse(a,'âœ…\x20'+h,i);}return;}if([z(0x86),z(0x78)+z(0x86)][z(0xa9)+z(0x8e)](f)&&!isAdmin(a)){const l=await isEnabled(d);if(l){const m=b[z(0x97)+z(0xcc)]||b[z(0xb7)+z(0xf1)+z(0xa2)+'s']||[],n=m[z(0xda)](o=>o[z(0xac)]===z(0xd6)+'er');if(n)try{await a[z(0xee)+z(0x8f)+z(0x85)](),await sendWarning(a,z(0xaf)+z(0xf0)+z(0x7f)+z(0x81)+z(0xb2)+z(0x87)+z(0x80)+z(0x98)+z(0x7e)),info(z(0xe3)+z(0xaa)+z(0xde)+z(0xab)+z(0xd6)+z(0x8c)+'n\x20'+d);}catch(o){error(z(0xf2)+z(0xca)+z(0xd2)+o[z(0xa4)+'ge']);}}}}export async function onCallbackQuery(){}function isAdmin(a){const A=a0q;try{const {ADMINS:ADMINS=[]}=getConfig();return a[A(0xea)]&&Array[A(0xb5)+'ay'](ADMINS)&&ADMINS[A(0xa9)+A(0x8e)](a[A(0xea)]['id']);}catch(b){return error(A(0x93)+A(0xdc)+A(0xcf)+A(0x68)+A(0xf3)+'\x20'+b[A(0xa4)+'ge']),console[A(0x77)](b[A(0x9e)]),![];}}
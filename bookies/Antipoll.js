function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0x1eb;let f=c[d];if(a0b['PntaAB']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0b['KDsWID']=g,a=arguments,a0b['PntaAB']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0b['KDsWID'](f),a[i]=f):f=j,f;},a0b(a,b);}const a0n=a0b;(function(a,b){const m=a0b,c=a();while(!![]){try{const d=-parseInt(m(0x28a))/0x1*(-parseInt(m(0x272))/0x2)+-parseInt(m(0x221))/0x3+-parseInt(m(0x234))/0x4*(-parseInt(m(0x27b))/0x5)+parseInt(m(0x24c))/0x6*(parseInt(m(0x21a))/0x7)+parseInt(m(0x1ef))/0x8+-parseInt(m(0x28b))/0x9*(parseInt(m(0x1ec))/0xa)+-parseInt(m(0x278))/0xb;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x42818));import{db}from'../bookieutils/db.js';import{getConfig}from'../bookieutils/config.js';import{error,info}from'../bookieutils/logger.js';import{applyFont,registerModule}from'../bookieutils/helpeutils/fonthelp.js';import{getDefault,getConnection,getConnectionName}from'../bookieutils/connection.js';export const name=a0n(0x24b)+a0n(0x25b);export const version=a0n(0x274);registerModule(name);function a0a(){const z=['B2XS','ignOzwm','zcWGzw4','yxvSDc4','x2nVzgu','kaOGica','zca9id8','zxvLicG','su5utYa','BNrPCg8','idaScIa','uLKGs0u','Dgv4Da','pYWGpYK','uxvLDwu','q1jfqvq','cIaGica','icaGvKe','zxrKzwy','wsblrvK','vevhrvi','C2v0rw4','qwrTAw4','nZr3CMH6Aw4','CM9YoIa','mI4XlJa','BhqGz3i','y2HHDa','vcaXcIa','oda3nZC0mev2DfDpqW','teuGsuy','rLjptsa','mtG4ndaWnuzVu21lrq','rsbguK8','Cg9SBf8','Aw5JBhu','tfvfuYa','Cg9SBa','uIbsrva','revmrvq','z3mGkgm','icaGzw4','r0vsifa','t1jfieK','4P2mie5Via','zs93yxi','rw5XDwu','mtq2ntDXyNfIBM8','mZqYu0v2vfbZ','uIbjr04','v2fYBMK','zgvSzxq','igvYCM8','ruzbvuW','Df9PzcW','zw5HyMW','C2fNzv8','AwqSig0','ieLoveu','qu5eig0','ie9grG','yMXLzca','uYbHBNq','rvjfigm','zu1LC3m','zgvZ','CMvWBhK','ihbYB2m','Agf0x2K','AwqPcIa','yxbP','ihjLDhi','igLUia','DgvZDa','AwqGsu4','ieXjtuK','BMqGzxi','AwvZid0','iIbUB3q','z2v0','igfUDgK','wsaOy2G','icaGktS','ie9o','zsaOcIa','ug9SBca','uKLnqvi','mZm1mJbjBNnNwK0','zxr0Aw4','AxnfBMe','mZy0mdu3nMvyD2TTqG','vcbJAge','AxqU','zxjYB3i','ywDLx2K','BwvZC2e','B3i6ia','rsbuqui','psa/','ywDL','vcbLBMe','B3vWihm','id0GpW','C3vWzxi','y2HHDf8','t0Xm','zxnZAw4','icaGica','z3jVDxa','id0GpYa','yw50Axa','zYbLCNi','CMLLCYa','ywXS','rsbHBNq','rKfvtfq','kd8Sid8','BgvKoIa','CMv0CMK','AxbVBgW','icbTzxm','tsbHBNq','y2f0y2G','zv9PzcK','uKuGy2G','CJOG','laOGica','vvbeqvq','ufjjtue','icbjtLm','ie5pvca','kqOGica','rvHju1q','mteZnhLqweLKAa','id8Gv0G','su5uruC','BgvUz3q','qu5usva','tLvmtcW','y3rPB24','mtuXody3mNbiBgrdCW','r3jVDxa','lxnLDca','DhLWzq','yxrFAwq','r0vsieq','ieforca','zv9Pzca','ig1LC3m','z2v0q2G','rvjuie8','cIaG','zgvMyxu','ywjSzwq','x3nLDhq','C2uGl3m','zc4GuMu','vcaXma','x3f1zxu','nfbqAermzG','z2vFAwq','DgL0Bgu','BIbMywK','AYbMywK','4P2mierLzG','DwuGzxi','CNvU','u0vmrum','zxHLyW','ChjVDgu','zcWGCMu','CxvLDwu','icbwquW','zsbxseu','z3mGv0G','DhjPzxm','tLrpige','igzVDw4','ChjPDMe','vuvticG','zsbtrvq','yxvSDca','qw50Axa','otG1ogLlAw1YrW','zxqUifu','icaGy2G','icbYzxq','rviGreu','zNjVBq','tefdrsa','Aw5NCYa','zxnZywC','BgXFCxu','iezst00','B2XSx3m','lcbTzxm','BMCGC2u','rgvSzxq'];a0a=function(){return z;};return a0a();}let globalBot=null,processing=![];function isAdmin(a){const o=a0n;try{const {ADMINS:ADMINS=[]}=getConfig();return a[o(0x251)]&&ADMINS[o(0x27e)+o(0x29c)](a[o(0x251)]['id']);}catch(b){return error(name,o(0x271)+o(0x25c)+o(0x238)+o(0x20a)+b[o(0x1f4)+'ge']),![];}}async function initDatabase(){const p=a0n;await db[p(0x23d)](p(0x26b)+p(0x26a)+p(0x1f6)+p(0x279)+p(0x217)+p(0x219)+p(0x299)+p(0x20c)+p(0x22f)+p(0x253)+p(0x260)+p(0x24e)+p(0x225)+p(0x295)+p(0x285)+p(0x1eb)+p(0x26e)+p(0x213)+p(0x284)+p(0x22e)+p(0x295)+p(0x226)+p(0x290)+p(0x277)+p(0x2ad)+p(0x26b)+p(0x26a)+p(0x1f6)+p(0x279)+p(0x217)+p(0x219)+p(0x299)+p(0x20c)+p(0x233)+p(0x2af)+p(0x200)+p(0x1fd)+p(0x2a5)+p(0x26f)+p(0x217)+p(0x21f)+p(0x26b)+p(0x20d)+p(0x293)+p(0x2a5)+p(0x26f)+p(0x217)+p(0x21f)+p(0x26b)+p(0x24f)+p(0x205)+p(0x21c)+p(0x250)+p(0x208)+p(0x265)+p(0x200)+p(0x215)+p(0x266)+p(0x2ac)+p(0x225)+p(0x258)+p(0x293)+p(0x2a0)+p(0x2ad)+p(0x22c));}async function isEnabled(a){const q=a0n;try{const b=await db[q(0x2aa)](q(0x23c)+q(0x1f9)+q(0x298)+q(0x27a)+q(0x203)+q(0x257)+q(0x1ed)+q(0x243)+q(0x29a)+q(0x29f)+q(0x261),a);return b?Boolean(b[q(0x292)+'ed']):!![];}catch(c){return error(name,q(0x1ee)+q(0x298)+q(0x1f2)+':\x20'+c[q(0x1f4)+'ge']),!![];}}async function setEnabled(a,b){const r=a0n;try{await db[r(0x23b)](r(0x26b)+r(0x216)+r(0x22b)+r(0x281)+r(0x252)+r(0x263)+r(0x203)+r(0x257)+r(0x1ed)+r(0x283)+r(0x29f)+r(0x25d)+r(0x22e)+r(0x218)+r(0x26c)+r(0x27f)+r(0x209)+r(0x218)+'\x20',a,b?0x1:0x0);}catch(c){error(name,r(0x270)+r(0x22e)+r(0x28f)+r(0x212)+c[r(0x1f4)+'ge']);}}async function enqueueDeletion(a,b){const s=a0n;try{await db[s(0x23b)](s(0x26b)+s(0x216)+s(0x22b)+s(0x28c)+s(0x286)+s(0x245)+s(0x264)+s(0x255)+s(0x262)+s(0x1fd)+s(0x294)+s(0x254)+s(0x210)+s(0x26b)+s(0x241)+s(0x248)+s(0x268)+s(0x26b),a,b),processQueue();}catch(c){error(name,s(0x289)+s(0x23a)+s(0x273)+c[s(0x1f4)+'ge']);}}async function processQueue(){const t=a0n;if(processing||!globalBot)return;processing=!![];try{let a;while(a=await db[t(0x206)](t(0x23c)+t(0x1f0)+t(0x291)+t(0x229)+t(0x1f3)+t(0x23f)+t(0x244)+t(0x256)+t(0x2ab)+t(0x27d)+t(0x240)+t(0x2a6)+t(0x232))){if(!a[t(0x21d)+'h'])break;for(const b of a){try{await globalBot[t(0x2a1)][t(0x28e)+t(0x29b)+t(0x1f8)](b[t(0x1fd)+'id'],b[t(0x1f4)+t(0x235)]),await db[t(0x23b)](t(0x282)+t(0x27c)+t(0x20e)+t(0x20c)+t(0x233)+t(0x242)+t(0x211)+t(0x225)+t(0x202)+t(0x296)+t(0x254)+t(0x228)+t(0x1f7),b[t(0x1fd)+'id'],b[t(0x1f4)+t(0x235)]);}catch(c){const d=c[t(0x1f2)+t(0x25f)];if(d===0x190||d===0x194)await db[t(0x23b)](t(0x282)+t(0x27c)+t(0x20e)+t(0x20c)+t(0x233)+t(0x242)+t(0x211)+t(0x225)+t(0x202)+t(0x296)+t(0x254)+t(0x228)+t(0x1f7),b[t(0x1fd)+'id'],b[t(0x1f4)+t(0x235)]);else{const f=b[t(0x20b)+'es']+0x1;f>=0x5?await db[t(0x23b)](t(0x282)+t(0x27c)+t(0x20e)+t(0x20c)+t(0x233)+t(0x242)+t(0x211)+t(0x225)+t(0x202)+t(0x296)+t(0x254)+t(0x228)+t(0x1f7),b[t(0x1fd)+'id'],b[t(0x1f4)+t(0x235)]):(await db[t(0x23b)](t(0x214)+t(0x207)+t(0x20c)+t(0x233)+t(0x249)+t(0x2a2)+t(0x2a8)+t(0x21b)+t(0x29a)+t(0x29f)+t(0x261)+t(0x227)+t(0x1f4)+t(0x235)+t(0x1fb),f,b[t(0x1fd)+'id'],b[t(0x1f4)+t(0x235)]),await new Promise(g=>setTimeout(g,0x7d0)));}await new Promise(g=>setTimeout(g,0x32));}}}}catch(g){error(name,t(0x269)+t(0x29e)+t(0x1ff)+t(0x204)+t(0x1f5)+g[t(0x1f4)+'ge']);}finally{processing=![];}}async function getGroupInfo(a){const u=a0n;try{const b=await getConnectionName(a);if(b)return b;const c=await globalBot[u(0x2a1)][u(0x22a)+'at'](a);return c[u(0x236)]||u(0x222)+'\x20'+a;}catch{return u(0x222)+'\x20'+a;}}async function sendResponse(a,b,c){const v=a0n,d=await getGroupInfo(c),e=b+v(0x2a3)+d,f=await applyFont(name,e),g=await a[v(0x29d)](f);setTimeout(()=>a[v(0x2a1)][v(0x28e)+v(0x29b)+v(0x1f8)](c,g[v(0x1f4)+v(0x235)])[v(0x20f)](()=>{}),0x1388);}async function sendWarning(a){const w=a0n,{WARNING_TEXT:WARNING_TEXT='',SEND_WARNING:SEND_WARNING=!![],WARNING_TTL_MS:WARNING_TTL_MS=0x1388}=getConfig()[w(0x21e)+w(0x1fe)];if(!SEND_WARNING||!WARNING_TEXT)return;try{const b=await applyFont(name,WARNING_TEXT),c=await a[w(0x29d)](b);c?.[w(0x1f4)+w(0x235)]&&setTimeout(()=>{const x=w;a[x(0x2a1)][x(0x28e)+x(0x29b)+x(0x1f8)](a[x(0x276)]['id'],c[x(0x1f4)+x(0x235)])[x(0x20f)](()=>{});},WARNING_TTL_MS);}catch(d){error(name,w(0x28d)+w(0x259)+w(0x2a7)+w(0x273)+d[w(0x1f4)+'ge'],d);}}export async function initialize(a){globalBot=a,await initDatabase(),processQueue();}export async function onMessage(a){const y=a0n,b=getConfig()[y(0x21e)+y(0x1fe)]||{},c=a[y(0x276)]?.['id'],d=a[y(0x1f4)+'ge']?.[y(0x1f4)+y(0x235)],f=a[y(0x1f4)+'ge']?.[y(0x267)]||'';if(isAdmin(a)&&f){let g=null,h=c;if(/^\/pollon\b/i[y(0x2a4)](f))g=y(0x2b0)+y(0x23e)+y(0x220)+y(0x2ae);else{if(/^\/polloff\b/i[y(0x2a4)](f))g=y(0x2b0)+y(0x23e)+y(0x220)+y(0x297);}if(g){if(a[y(0x276)][y(0x224)]===y(0x247)+'te'){const j=await getDefault();if(!j)return await a[y(0x29d)](y(0x287)+y(0x22d)+y(0x275)+y(0x1fa)+y(0x24d)+y(0x230)+y(0x26d)+y(0x25e));h=await getConnection(j);if(!h)return await a[y(0x29d)](y(0x239)+y(0x24a)+'\x22'+j+(y(0x2a9)+y(0x246)+y(0x231)+y(0x223)+y(0x1f1)));}const i=g[y(0x27e)+y(0x29c)]('ON');await setEnabled(h,i),await sendResponse(a,'âœ…\x20'+g,h);}return;}if([y(0x201),y(0x1fc)+y(0x201)][y(0x27e)+y(0x29c)](a[y(0x276)]?.[y(0x224)])){const k=await isEnabled(c);if(k&&a[y(0x1f4)+'ge']?.[y(0x280)]&&!isAdmin(a))try{await a[y(0x28e)+y(0x29b)+y(0x1f8)](),enqueueDeletion(c,d),await sendWarning(a);}catch(l){error(name,y(0x25a)+y(0x288)+y(0x237)+y(0x20a)+l[y(0x1f4)+'ge'],l);}}}export async function onCallbackQuery(){}